{"version":3,"sources":["rules.ts","stats/equipment.ts","stats/weapons/nonHeavyRangedWeapons.ts","stats/weapons/heavyRangedWeapons.ts","stats/weapons/meleeWeapons.ts","stats/weapons/pistols.ts","stats/weapons.ts","helpers.ts","stats/factions/adeptusAstartes.ts","stats/factions/traitorSpaceMarine.ts","stats/abilities.ts","calculation.ts","stats/factions/forgeWorld.ts","stats/factions/broodCoven.ts","stats/factions/talonsOfTheEmperor.ts","stats/factions/hunterClade.ts","App.tsx","reportWebVitals.js","index.tsx"],"names":["specialRules","STORM_SHIELD","label","NO_COVER","AP1","AP2","RELENTLESS","CEASELESS","HEAVY","BLAST1","BLAST2","TORRENT","FUSILLADE","RNG3","RNG6","GRAV","LETHAL4","LETHAL5","COMBI","LIMITED","BRUTAL","HOT","UNWIELDY","BALANCED","criticalRules","RENDING","P1","MW2","MW3","MW4","STUN","equipment","GRISLY_TROPHY","DARK_BLESSING","BELT_FEED","additionalSpecialRules","MALEFIC_ROUNDS","ENRICHED_ROUNDS","damageAdjustment","nonHeavyRangedWeapons","name","profile","attackDice","damage","damageCritical","type","weaponBallisticSkillAdjustment","fixedWeaponBallisticSkill","heavyRangedWeapons","meleeWeapons","pistols","weapons","getWeaponProfiles","options","modifiedSkill","attackDiceAdjustment","filter","weapon","map","generateEquipmentVariantProfile","newEquipment","additionalCriticalRules","newCriticalRules","includes","index","indexOf","splice","push","newWeapon","generateEquipmentVariantProfiles","profiles","reduce","acc","equippedProfiles","eq","deathwatchVeteranWarrior","movement","apl","groupActivation","defense","save","saveCritical","wounds","ballisticSkill","weaponSkill","weaponOptions","deathwatchVeteranFighter","deathwatchVeteranGunner","defaultWeapons","deathwatchVeteranHeavyGunner","deathwatchVeteranWatchSergeant","reiverWarrior","reiverSergeant","adeptusAstartesStats","fireTeams","dataSheets","traitorSpaceMarineStats","abilities","THE_EMPERORS_CHOSEN","oneDiceChanceOfSuccess","successFrom","critFrom","chanceOfSuccess","chanceOfCrit","oneDiceChanceOfCrit","oneDiceChanceOfMiss","calculateDamage","attacker","defender","calculateDamageMelee","rolledDefenseDice","ballisticSkillCritical","Math","max","weaponBallisticSkill","adjustedballisticSkill","expectedHits","expectedCriticalHits","chanceOfMiss","min","chanceOfAtLeastOneCrit","chanceOfSave","chanceOfSaveCritical","expectedSaves","expectedCriticalSaves","chanceOfNoCrit","expectedNaturalOnes","expectedMisses","expectedHitDamage","expectedCritDamage","mw","expectedMortalWounds","total","toFixed","hit","crit","calculateDamageRanged","getAttackerAttackDice","calculateMeleeBlowByBlow","attackerWeaponProfile","attackerHits","attackerCrits","attackerStrategy","defenderWeaponProfile","defenderHits","defenderCrits","defenderStrategy","defenseProfile","attackProfile","stats","crits","hits","weaponProfile","stunAmount","attackerInitiative","counter","resolveDie","attackerDamage","defenderDamage","attackerDead","defenderDead","finalStats","strategy","respondingActor","initiator","responder","dieLeft","criticalDamageAmount","stunDone","damageAmount","criticalParryUsed","criticalParryDone","parryUsed","parryDone","attackerWeaponSkillCritical","attackerAdjustedWeaponSkill","attackerHitsPerDie","attackerCritsPerDie","attackerAttackDice","attackerExpectedCriticalHitsMax1","defenseWeaponSkillCritical","defenderHitsPerDie","defenderCritsPerDie","defenderAttackDice","defenderExpectedCriticalHitsMax1","calculateMeleeBasics","maxDamageOutput","parryDefenderOutput","parryAttackerOutput","parryBothOutput","maxDamage","parryDefender","parryAttacker","parryBoth","forgeWorldStats","broodCovenStats","custodianGuardLeader","defensiveMeleeWeapon","custodianGuardWarrior","talonsOfTheEmperorStats","hunterCladeStats","factions","custodesProfile","meqProfile","geqProfile","formatMeleeDamage","d","style","display","flexWrap","width","flex","flexBasis","color","marginLeft","isWeaponInOption","option","some","optionItem","isWeaponAddable","weaponName","viableOptions","Array","isArray","selectedWeapons","length","forEach","selectedWeapon","isWeaponInSuboptionWithSelectedWeapons","weapon1","weapon2","weaponsArray","areWeaponsInSameSuboption","every","isOptionComplete","generateWeaponRow","setDatasheet","showStats","isProfile","nextIsProfile","backgroundColor","geqDamage","meqDamage","custodesDamage","find","styles","buttonCellStyles","textAlign","borderBottomWidth","neededSkill","weaponOrBallisticSkill","adjustedWsOrBs","isSelected","selectedName","isSelectable","isDefaultWeapon","stormShieldDummies","TableRow","className","classNames","TableCell","Button","size","variant","onClick","console","warn","handleSelectWeapon","handleDeselectWeapon","item","rule","join","StatBlock","dataSheet","onToggleStats","useState","dataSheetLocal","setDataSheetLocal","rowColor","switchRowColor","rangedWeapons","TableContainer","component","Paper","Table","TableHead","rowSpan","Typography","ButtonBase","fontWeight","borderBottom","TableBody","sameNameAsPrevious","sameNameAsNext","TabPanel","props","children","value","other","role","hidden","id","Box","p","useStyles","makeStyles","theme","createStyles","formControl","margin","spacing","minWidth","selectEmpty","marginTop","App","isDrawerOpen","setIsDrawerOpen","setShowStats","factionIndex","setFactionIndex","fireteamIndex","setFireteamIndex","classes","toggleStats","Drawer","open","anchor","onClose","ml","mt","FormControl","InputLabel","Select","onChange","event","target","faction","MenuItem","fireTeam","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","createTheme","palette","primary","main","contrastText","secondary","ReactDOM","render","StrictMode","ThemeProvider","document","getElementById"],"mappings":"6ZAQaA,EAAe,CAC1BC,aAAc,CACZC,MAAO,gBAETC,SAAU,CACRD,MAAO,YAETE,IAAK,CACHF,MAAO,OAETG,IAAK,CACHH,MAAO,OAETI,WAAY,CACVJ,MAAO,cAETK,UAAW,CACTL,MAAO,aAETM,MAAO,CACLN,MAAO,SAETO,OAAQ,CACNP,MAAO,YAETQ,OAAQ,CACNR,MAAO,YAETS,QAAS,CACPT,MAAO,WAETU,UAAW,CACTV,MAAO,aAETW,KAAM,CACJX,MAAO,UAETY,KAAM,CACJZ,MAAO,UAETa,KAAM,CACJb,MAAO,QAETc,QAAS,CACPd,MAAO,aAETe,QAAS,CACPf,MAAO,aAETgB,MAAO,CACLhB,MAAO,SAETiB,QAAS,CACPjB,MAAO,WAETkB,OAAQ,CACNlB,MAAO,UAETmB,IAAK,CACHnB,MAAO,OAEToB,SAAU,CACRpB,MAAO,YAETqB,SAAU,CACRrB,MAAO,aAIEsB,EAAgB,CAC3BC,QAAS,CACPvB,MAAO,WAETwB,GAAI,CACFxB,MAAO,MAETyB,IAAK,CACHzB,MAAO,OAET0B,IAAK,CACH1B,MAAO,OAET2B,IAAK,CACH3B,MAAO,OAET4B,KAAM,CACJ5B,MAAO,SChFE6B,EAAiC,CAC5C9B,aAAc,CACZC,MAAO,gBAET8B,cAAe,CACb9B,MAAO,iBAET+B,cAAe,CACb/B,MAAO,iBAETgC,UAAW,CACThC,MAAO,YACPiC,uBAAwB,CAACnC,EAAaO,YAExC6B,eAAgB,CACdlC,MAAO,kBAETmC,gBAAiB,CACfnC,MAAO,kBACPoC,iBAAkB,IC9BTC,EAAkC,CAC7C,CACEC,KAAM,UACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,UACNC,QAAS,GACTC,WAAY,EACZI,gCAAiC,EACjCH,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAac,MAC5BU,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,qBACNC,QAAS,aACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaG,UAC5BqB,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,qBACNC,QAAS,WACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,CAACA,EAAcC,SAC9BM,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,qBACNC,QAAS,SACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,CAACA,EAAcE,IAC9BK,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,qBACNC,QAAS,YACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,qBACNC,QAAS,eACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,qBACNC,QAAS,cACTC,WAAY,EACZI,gCAAiC,EACjCH,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaa,KAAMb,EAAaW,SAC/Ca,cAAe,CAACA,EAAcE,IAC9BK,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,qBACNC,QAAS,YACTC,WAAY,EACZI,gCAAiC,EACjCH,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAac,MAC5BU,cAAe,CAACA,EAAcE,IAC9BK,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,eACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaM,YAC5BkB,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,eACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,cACNC,QAAS,OACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaU,QAC5Bc,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,cACNC,QAAS,QACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaI,KAC5BoB,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,kBACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaO,WAC5BiB,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,aACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,CAACA,EAAcE,IAC9BK,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,qBACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaQ,MAAOR,EAAaI,KAChDoB,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,UACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,mBACNC,QAAS,OACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaU,QAC5Bc,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,mBACNC,QAAS,OACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaI,KAC5BoB,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,SACNC,QAAS,GACTC,WAAY,EACZI,gCAAiC,EACjCH,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAac,KAAMd,EAAaiB,SAC/CO,cAAe,CAACA,EAAcM,MAC9BC,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,SACNC,QAAS,GACTC,WAAY,EACZK,0BAA2B,EAC3BJ,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAac,KAAMd,EAAaW,SAC/Ca,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,WACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaI,IAAKJ,EAAae,MAC9CS,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,WACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAac,KAAMd,EAAaK,KAC/CmB,cAAe,CAACA,EAAcK,KAC9BE,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,aACNC,QAAS,WACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaI,KAC5BoB,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,aACNC,QAAS,cACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaK,IAAKL,EAAaqB,KAC9CG,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,eACNC,QAAS,GACTC,WAAY,EACZK,0BAA2B,EAC3BJ,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAakB,MAAOlB,EAAac,KAAMd,EAAaW,QAASX,EAAamB,SACzFK,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,aACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAakB,MAAOlB,EAAaI,IAAKJ,EAAae,KAAMf,EAAamB,SACrFK,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,cACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAakB,MAAOlB,EAAac,KAAMd,EAAaK,IAAKL,EAAamB,SACrFK,cAAe,CAACA,EAAcK,KAC9BE,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,eACNC,QAAS,WACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAakB,MAAOlB,EAAaI,IAAKJ,EAAamB,SAClEK,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,eACNC,QAAS,cACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAakB,MAAOlB,EAAaK,IAAKL,EAAamB,QAASnB,EAAaqB,KACxFG,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,cACNC,QAAS,GACTC,WAAY,EACZK,0BAA2B,EAC3BJ,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAac,KAAMd,EAAaW,SAC/Ca,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,iBACNC,QAAS,WACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaI,KAC5BoB,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,iBACNC,QAAS,cACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaK,IAAKL,EAAaqB,KAC9CG,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,YACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaI,KAC5BoB,cAAe,CAACA,EAAcM,MAC9BC,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,iBACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,CAACA,EAAcC,SAC9BM,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,oBACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaM,WAAYN,EAAaY,UAAWZ,EAAac,MAC7EU,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,cACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaO,WAC5BiB,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,YACNC,QAAS,GACTC,WAAY,EACZI,gCAAiC,EACjCH,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaa,MAC5BW,cAAe,CAACA,EAAcM,MAC9BC,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,iBACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,CAACA,EAAcE,IAC9BK,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,iBACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAac,MAC5BU,cAAe,CAACA,EAAcE,IAC9BK,UAAW,GACXc,KAAM,WC/bGG,EAA+B,CAC1C,CACER,KAAM,0BACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaQ,MAAOR,EAAaI,KAChDoB,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,eACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaQ,MAAOR,EAAaY,WAChDY,cAAe,CAACA,EAAcE,IAC9BK,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,wBACNC,QAAS,eACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaQ,MAAOR,EAAaY,WAChDY,cAAe,CAACA,EAAcE,IAC9BK,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,wBACNC,QAAS,eACTC,WAAY,EACZK,0BAA2B,EAC3BJ,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaQ,MAAOR,EAAac,KAAMd,EAAaW,SACnEa,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,mBACNC,QAAS,OACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaQ,MAAOR,EAAaU,QAChDc,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,mBACNC,QAAS,OACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaQ,MAAOR,EAAaI,KAChDoB,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,gBACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaQ,MAAOR,EAAaO,UAAWP,EAAaY,WACxEY,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,eACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaQ,MAAOR,EAAaI,KAChDoB,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,iBACNC,QAAS,YACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaQ,MAAOR,EAAaU,QAChDc,cAAe,CAACA,EAAcM,MAC9BC,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,iBACNC,QAAS,aACTC,WAAY,EACZI,gCAAiC,EACjCH,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaQ,MAAOR,EAAac,MAChDU,cAAe,CAACA,EAAcM,KAAMN,EAAcE,IAClDK,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,iBACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaQ,OAC5BgB,cAAe,CAACA,EAAcE,IAC9BK,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,uBACNC,QAAS,GACTC,WAAY,EACZI,gCAAiC,EACjCH,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaI,IAAKJ,EAAaQ,MAAOR,EAAasB,UAClEE,cAAe,CAACA,EAAcI,KAC9BG,UAAW,GACXc,KAAM,WCrIGI,EAAyB,CACpC,CACET,KAAM,eACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,GACfO,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,kBACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaoB,OAAQpB,EAAaiB,SACjDO,cAAe,GACfO,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,eACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,GACfO,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,QACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,GACfO,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,WACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,GACfO,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,WACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,CAACA,EAAcM,MAC9BC,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,aACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaiB,SAC5BO,cAAe,CAACA,EAAcM,MAC9BC,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,aACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,GACfO,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,uBACNC,QAAS,GACTC,WAAY,EACZI,+BAAgC,EAChCH,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,CAACA,EAAcM,MAC9BC,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,iBACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaiB,SAC5BO,cAAe,GACfO,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,kBACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaiB,QAASjB,EAAaM,YAClDkB,cAAe,GACfO,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,aACNC,QAAS,GACTC,WAAY,EACZI,+BAAgC,EAChCH,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaoB,QAC5BI,cAAe,GACfO,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,aACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,CAACA,EAAcM,MAC9BC,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,aACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,CAACA,EAAcC,SAC9BM,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,eACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaiB,SAC5BO,cAAe,GACfO,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,iBACNC,QAAS,GACTC,WAAY,EACZI,+BAAgC,EAChCH,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,CAACA,EAAcM,MAC9BC,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,gCACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAauB,UAC5BC,cAAe,GACfO,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,iCACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAauB,UAC5BC,cAAe,CAACA,EAAcC,SAC9BM,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,mBACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,CAACA,EAAcC,SAC9BM,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,sBACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAauB,UAC5BC,cAAe,CAACA,EAAcC,SAC9BM,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,0BACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAauB,SAAUvB,EAAaiB,SACnDO,cAAe,GACfO,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,oBACNC,QAAS,GACTC,WAAY,EACZI,+BAAgC,EAChCH,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaiB,SAC5BO,cAAe,GACfO,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,oBACNC,QAAS,wBACTC,WAAY,EACZI,+BAAgC,EAChCH,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaiB,QAASjB,EAAaM,YAClDkB,cAAe,GACfO,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,mBACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaoB,QAC5BI,cAAe,GACfO,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,mBACNC,QAAS,wBACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaoB,OAAQpB,EAAaM,YACjDkB,cAAe,GACfO,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,iBACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,GACfO,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,iBACNC,QAAS,wBACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaM,YAC5BkB,cAAe,GACfO,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,yCACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAauB,SAAUvB,EAAaiB,SACnDO,cAAe,CAACA,EAAcC,SAC9BM,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,sBACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAauB,SAAUvB,EAAaoB,QACnDI,cAAe,CAACA,EAAcC,SAC9BM,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,iBACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaiB,SAC5BO,cAAe,GACfO,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,iBACNC,QAAS,iBACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaiB,SAC5BO,cAAe,GACfO,UAAW,CAACA,EAAU9B,cACtB4C,KAAM,SAER,CACEL,KAAM,yBACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaiB,SAC5BO,cAAe,GACfO,UAAW,GACXc,KAAM,SAER,CACEL,KAAM,wBACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,GACfO,UAAW,GACXc,KAAM,UChXGK,EAAoB,CAC/B,CACEV,KAAM,cACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAac,MAC5BU,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,4BACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAac,KAAMd,EAAaI,KAC/CoB,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,cACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAac,KAAMd,EAAaI,IAAKJ,EAAae,MACjES,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,iBACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaa,KAAMb,EAAaK,KAC/CmB,cAAe,CAACA,EAAcI,KAC9BG,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,gBACNC,QAAS,WACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAac,KAAMd,EAAaI,KAC/CoB,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,gBACNC,QAAS,cACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAac,KAAMd,EAAaK,IAAKL,EAAaqB,KACjEG,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,aACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAac,KAAMd,EAAaI,KAC/CoB,cAAe,CAACA,EAAcM,MAC9BC,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,wBACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAac,KAAMd,EAAaS,OAAQT,EAAaG,UACpEqB,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,gBACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAac,MAC5BU,cAAe,CAACA,EAAcC,SAC9BM,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,+BACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAac,KAAMd,EAAauB,UAC/CC,cAAe,CAACA,EAAcC,SAC9BM,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,aACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAac,MAC5BU,cAAe,GACfO,UAAW,GACXc,KAAM,UAER,CACEL,KAAM,aACNC,QAAS,GACTC,WAAY,EACZI,gCAAiC,EACjCH,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAac,MAC5BU,cAAe,CAACA,EAAcM,MAC9BC,UAAW,GACXc,KAAM,WCnCGM,EAAiB,sBAAOF,GAAP,YAAwBV,GAAxB,YAAkDS,GAAlD,YAAyEE,IChEhG,SAASE,EAAkBZ,EAAkBa,GAClD,IAAMC,EAAa,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAASP,+BACzBS,EAAoB,OAAGF,QAAH,IAAGA,OAAH,EAAGA,EAASE,qBAEtC,OAAOJ,EACJK,QAAO,SAACC,GAAD,OAAYA,EAAOjB,OAASA,KACnCkB,KAAI,SAACjB,GAAD,mBAAC,eACDA,GADA,IAEHK,+BAAgCQ,GAAgCb,EAAQK,+BACxEJ,WAAYa,EAAuBd,EAAQC,WAAaa,EAAuBd,EAAQC,gBAItF,SAASiB,EAAgCF,EAAgBG,GAC9D,IAAMzB,EAAyByB,EAAazB,wBAA0B,GAChE0B,EAA0BD,EAAaC,yBAA2B,GAClEC,EAAgB,YAAOL,EAAOjC,eAGpC,GAAIoC,IAAiB7B,EAAUK,eAC7B,GAAIqB,EAAOjC,cAAcuC,SAASvC,EAAcE,IAAK,CACnD,IAAMsC,EAAQF,EAAiBG,QAAQzC,EAAcE,IACrDoC,EAAiBI,OAAOF,EAAO,GAC/B7B,EAAuBgC,KAAKnE,EAAaI,UAEzCyD,EAAwBM,KAAK3C,EAAcE,IAI/C,IAAM0C,EAAS,eAAQX,GAOvB,OAJIG,IAAiB7B,EAAUM,kBAC7B+B,EAAUzB,QAAU,GAGf,2BACFyB,GADL,IAEE3B,QAAQ,KAAD,OAAOmB,EAAa1D,OAC3B6B,UAAU,GAAD,mBAAM0B,EAAO1B,WAAb,CAAwB6B,IACjC5D,aAAa,GAAD,mBAAMyD,EAAOzD,cAAb,YAA8BmC,IAC1CX,cAAc,GAAD,mBAAMsC,GAAN,YAA2BD,MAIrC,SAASQ,EAAiCC,EAAoBvC,GACnE,OAAOuC,EAASC,QAAiB,SAACC,EAAK/B,GACrC,IAAMgC,EAAmB1C,EAAUwC,QAAiB,SAACC,EAAKE,GAExD,MADY,sBAAOF,GAAP,CAAYb,EAAgClB,EAASiC,OAEhE,IAEH,MADY,sBAAOF,GAAP,CAAY/B,GAAZ,YAAwBgC,MAEnC,ICtFE,IAAME,EAAsC,CACjDnC,KAAM,+BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,uBADhB,YAEFA,EAAkB,uBAFhB,YAGFA,EAAkB,4BAHhB,YAIFA,EAAkB,iBAJhB,YAKFA,EAAkB,QAAS,CAAEG,qBAAsB,KALjD,YAMFH,EAAkB,kBAEvBiC,cAAe,CACb,CAAC,CAAC,sBAAuB,CAAC,iBAC1B,CAAC,CAAC,qBAAsB,0BAA2B,gBAAiB,CAAC,YAG5DC,EAAsC,CACjD9C,KAAM,+BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,gBADhB,YAEFA,EAAkB,gBAFhB,YAGFA,EAAkB,gBAHhB,YAIFA,EAAkB,mBAJhB,YAKFA,EAAkB,kBALhB,YAMFA,EAAkB,uBAAwB,CAAEG,qBAAsB,KANhE,YAOFH,EAAkB,kBAAmB,CAAEG,qBAAsB,KAP3D,YAQFc,EAAiCjB,EAAkB,aAAc,CAAEG,qBAAsB,IAAM,CAChGxB,EAAU9B,gBATP,YAWFoE,EAAiCjB,EAAkB,iBAAkB,CAAEG,qBAAsB,IAAM,CACpGxB,EAAU9B,gBAZP,YAcFoE,EAAiCjB,EAAkB,aAAc,CAAEG,qBAAsB,IAAM,CAChGxB,EAAU9B,gBAfP,YAiBFoE,EAAiCjB,EAAkB,aAAc,CAAEG,qBAAsB,IAAM,CAChGxB,EAAU9B,gBAlBP,YAoBFoE,EAAiCjB,EAAkB,eAAgB,CAAEG,qBAAsB,IAAM,CAClGxB,EAAU9B,gBArBP,YAuBFoE,EAAiCjB,EAAkB,iBAAkB,CAAEG,qBAAsB,IAAM,CACpGxB,EAAU9B,gBAxBP,YA0BFmD,EAAkB,kBAEvBiC,cAAe,CACb,CAAC,CAAC,yBACF,CAAC,CAAC,oBACF,CACE,CAAC,cAAe,cAAe,cAAe,iBAAkB,gBAAiB,gBACjF,CAAC,aAAc,iBAAkB,aAAc,aAAc,eAAgB,qBAItEE,EAAqC,CAChD/C,KAAM,8BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,iBADhB,YAEFA,EAAkB,eAFhB,YAGFA,EAAkB,gBAHhB,YAIFA,EAAkB,iBAJhB,YAKFA,EAAkB,uBALhB,YAMFA,EAAkB,WANhB,YAOFA,EAAkB,aAPhB,YAQFA,EAAkB,aARhB,YASFA,EAAkB,eAThB,YAUFA,EAAkB,WAEvBoC,eAAgB,CAAC,SACjBH,cAAe,CACb,CAAC,CAAC,sBAAuB,CAAC,iBAC1B,CAAC,CAAC,sBAAuB,CAAC,gBAC1B,CAAC,CAAC,sBAAuB,CAAC,iBAC1B,CAAC,CAAC,sBAAuB,CAAC,eAC1B,CAAC,CAAC,SAAU,WAAY,WAAY,iBAG3BI,EAA0C,CACrDjD,KAAM,oCACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,gBADhB,YAEFA,EAAkB,0BAFhB,YAGFA,EAAkB,qBAHhB,YAIFA,EAAkB,WAEvBiC,cAAe,CAAC,CAAC,CAAC,SAAU,CAAC,cAAe,wBAAyB,uBAE1DK,EAA4C,CACvDlD,KAAM,oCACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,uBADhB,YAEFA,EAAkB,uBAFhB,YAGFA,EAAkB,iBAHhB,YAIFA,EAAkB,eAJhB,YAKFA,EAAkB,gBALhB,YAMFA,EAAkB,iBANhB,YAOFA,EAAkB,WAPhB,YAQFA,EAAkB,aARhB,YASFA,EAAkB,aAThB,YAUFA,EAAkB,eAVhB,YAWFA,EAAkB,4BAXhB,YAYFA,EAAkB,iBAZhB,YAaFA,EAAkB,gBAbhB,YAcFA,EAAkB,gBAdhB,YAeFA,EAAkB,gBAfhB,YAgBFA,EAAkB,mBAhBhB,YAiBFA,EAAkB,kBAjBhB,YAkBFA,EAAkB,QAAS,CAAEG,qBAAsB,KAlBjD,YAmBFH,EAAkB,uBAAwB,CAAEG,qBAAsB,KAnBhE,YAoBFH,EAAkB,kBAAmB,CAAEG,qBAAsB,KApB3D,YAqBFc,EAAiCjB,EAAkB,aAAc,CAAEG,qBAAsB,IAAM,CAChGxB,EAAU9B,gBAtBP,YAwBFoE,EAAiCjB,EAAkB,iBAAkB,CAAEG,qBAAsB,IAAM,CACpGxB,EAAU9B,gBAzBP,YA2BFoE,EAAiCjB,EAAkB,aAAc,CAAEG,qBAAsB,IAAM,CAChGxB,EAAU9B,gBA5BP,YA8BFoE,EAAiCjB,EAAkB,aAAc,CAAEG,qBAAsB,IAAM,CAChGxB,EAAU9B,gBA/BP,YAiCFoE,EAAiCjB,EAAkB,eAAgB,CAAEG,qBAAsB,IAAM,CAClGxB,EAAU9B,gBAlCP,YAoCFoE,EAAiCjB,EAAkB,iBAAkB,CAAEG,qBAAsB,IAAM,CACpGxB,EAAU9B,gBArCP,YAuCFoE,EAAiCjB,EAAkB,kBAAmB,CAAEG,qBAAsB,IAAM,CACrGxB,EAAU9B,gBAxCP,YA0CFmD,EAAkB,kBAEvBiC,cAAe,CACb,CAAC,CAAC,yBACF,CAAC,CAAC,oBACF,CACE,CAAC,SACD,CACE,qBACA,qBACA,0BACA,eACA,eACA,cACA,aACA,eACA,SACA,WACA,WACA,eAGJ,CACE,CAAC,cAAe,cAAe,cAAe,iBAAkB,gBAAiB,gBACjF,CAAC,aAAc,iBAAkB,aAAc,aAAc,eAAgB,iBAAkB,sBASxFM,EAA2B,CACtCnD,KAAM,mBACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,iBADhB,YAEFA,EAAkB,8BAFhB,YAGFA,EAAkB,iBAHhB,YAIFA,EAAkB,QAAS,CAAEG,qBAAsB,MAExDiC,eAAgB,CAAC,6BACjBH,cAAe,CAAC,CAAC,CAAC,gBAAiB,CAAC,UAAW,CAAC,CAAC,mBAGtCO,EAA4B,CACvCpD,KAAM,kBACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,iBADhB,YAEFA,EAAkB,8BAFhB,YAGFA,EAAkB,iBAHhB,YAIFA,EAAkB,QAAS,CAAEG,qBAAsB,MAExDiC,eAAgB,CAAC,6BACjBH,cAAe,CACb,CAAC,CAAC,gBAAiB,CAAC,iBACpB,CAAC,CAAC,gBAAiB,CAAC,YA4DXQ,EAAuB,CAClCrD,KAAM,mBACNsD,UAAW,CACT,CACEtD,KAAM,eACNuD,WAAY,CA1D2B,CAC3CvD,KAAM,wBACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,oBADhB,YAEFA,EAAkB,eAFhB,YAGFA,EAAkB,uBAHhB,YAIFA,EAAkB,QAAS,CAAEG,qBAAsB,MAExDiC,eAAgB,CAAC,SACjBH,cAAe,CAAC,CAAC,CAAC,kBAAmB,qBAAsB,iBAGf,CAC5C7C,KAAM,uBACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,oBADhB,YAEFA,EAAkB,gBAFhB,YAGFA,EAAkB,eAHhB,YAIFA,EAAkB,gBAJhB,YAKFA,EAAkB,kBALhB,YAMFA,EAAkB,uBANhB,YAOFA,EAAkB,eAPhB,YAQFA,EAAkB,QAAS,CAAEG,qBAAsB,KARjD,YASFH,EAAkB,eAThB,YAUFA,EAAkB,iBAVhB,YAWFA,EAAkB,oBAEvBiC,cAAe,CACb,CACE,CAAC,kBAAmB,qBAAsB,aAAc,cAAe,cAAe,iBACtF,CAAC,aAAc,QAAS,aAAc,eAAgB,uBAYxD,CACE7C,KAAM,UACNuD,WAAY,CAACJ,EAAeC,IAE9B,CACEpD,KAAM,sBACNuD,WAAY,CACVpB,EACAW,EACAC,EACAE,EACAC,MC9HKM,EAA0B,CACrCxD,KAAM,wBACNsD,UAAW,CACT,CACEtD,KAAM,sBACNuD,WAAY,CA/MuB,CACvCvD,KAAM,+BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFkB,EAAiCjB,EAAkB,WAAY,CAACrB,EAAUG,UAAWH,EAAUK,kBAD7F,YAEFiC,EAAiCjB,EAAkB,eAAgB,CACpErB,EAAUG,UACVH,EAAUK,kBAJP,YAMFgB,EAAkB,QAAS,CAAEG,qBAAsB,KANjD,YAOFc,EAAiCjB,EAAkB,cAAe,CACnErB,EAAUC,cACVD,EAAUE,kBAGdoD,cAAe,CACb,CAAC,CAAC,WAAY,CAAC,UACf,CAAC,CAAC,eAAgB,CAAC,iBAGiB,CACtC7C,KAAM,8BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,WADhB,YAEFA,EAAkB,aAFhB,YAGFA,EAAkB,eAHhB,YAIFA,EAAkB,WAEvBoC,eAAgB,CAAC,SACjBH,cAAe,CAAC,CAAC,CAAC,SAAU,WAAY,iBAEG,CAC3C7C,KAAM,oCACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFkB,EAAiCjB,EAAkB,gBAAiB,CACrErB,EAAUG,UACVH,EAAUK,kBAHP,YAKFgB,EAAkB,qBALhB,YAMFA,EAAkB,WAEvBoC,eAAgB,CAAC,SACjBH,cAAe,CAAC,CAAC,CAAC,mBAAoB,mBAEI,CAC1C7C,KAAM,mCACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFkB,EAAiCjB,EAAkB,WAAY,CAACrB,EAAUG,UAAWH,EAAUK,kBAD7F,YAEFiC,EAAiCjB,EAAkB,eAAgB,CACpErB,EAAUG,UACVH,EAAUK,kBAJP,YAMFgB,EAAkB,UANhB,YAOFiB,EAAiCjB,EAAkB,cAAe,CACnErB,EAAUC,cACVD,EAAUE,kBAGdoD,cAAe,CACb,CAAC,CAAC,WAAY,CAAC,UACf,CAAC,CAAC,eAAgB,CAAC,iBAG2B,CAChD7C,KAAM,uCACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFkB,EAAiCjB,EAAkB,WAAY,CAACrB,EAAUG,UAAWH,EAAUK,kBAD7F,YAEFiC,EAAiCjB,EAAkB,eAAgB,CACpErB,EAAUG,UACVH,EAAUK,kBAJP,YAMFgB,EAAkB,kBANhB,YAOFA,EAAkB,QAAS,CAAEG,qBAAsB,KAPjD,YAQFc,EAAiCjB,EAAkB,cAAe,CACnErB,EAAUC,cACVD,EAAUE,iBAVP,YAYFoC,EAAiCjB,EAAkB,aAAc,CAAEG,qBAAsB,IAAM,CAChGxB,EAAUC,cACVD,EAAUE,iBAdP,YAgBFoC,EAAiCjB,EAAkB,eAAgB,CAAEG,qBAAsB,IAAM,CAClGxB,EAAUC,cACVD,EAAUE,kBAGdoD,cAAe,CACb,CACE,CAAC,cAAe,iBAChB,CAAC,aAAc,aAAc,qBA4E/B,CACE7C,KAAM,iBACNuD,WAAY,CAzE4B,CAC5CvD,KAAM,0BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,YADhB,YAEFA,EAAkB,YAFhB,YAGFA,EAAkB,0BAHhB,YAIFA,EAAkB,cAEvBiC,cAAe,CACb,CAAC,CAAC,WAAY,CAAC,aACf,CAAC,CAAC,cAAe,CAAC,4BAIuB,CAC3C7C,KAAM,yBACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBAAMC,EAAkB,WAAxB,YAAsCA,EAAkB,kBAAxD,YAA6EA,EAAkB,cACtGoC,eAAgB,CAAC,YACjBH,cAAe,CAAC,CAAC,CAAC,SAAU,oBAGiB,CAC7C7C,KAAM,yBACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,YADhB,YAEFA,EAAkB,eAFhB,YAGFA,EAAkB,YAHhB,YAIFA,EAAkB,0BAJhB,YAKFA,EAAkB,cAEvBiC,cAAe,CACb,CAAC,CAAC,WAAY,CAAC,aACf,CAAC,CAAC,cAAe,CAAC,0BAClB,CAAC,CAAC,WAAY,CAAC,gCCzMNY,EAAY,CACvBC,oBAAqB,CACnBhG,MAAO,yBCoDX,SAASiG,EAAuBC,GAA4C,IAAvBC,EAAsB,uDAAH,EAChEC,EAAuC,EAAI,GAAxB,EAAIF,GACvBG,EAAeC,EAAoBH,GACzC,OAAOC,EAAkBC,EAG3B,SAASE,EAAoBL,GAC3B,OAA4B,EAAI,GAAxBA,EAAc,GAGxB,SAASI,IAA2C,IAAvBH,EAAsB,uDAAH,EAC9C,OAAyB,EAAI,GAArB,EAAIA,GAGP,SAASK,EAAT,GAAwE,IAA7CC,EAA4C,EAA5CA,SAAUC,EAAkC,EAAlCA,SAC1C,MAA6B,UAAzBD,EAASlD,OAAOZ,KACXgE,GAAqB,CAAEF,WAAUC,aAGb,WAAzBD,EAASlD,OAAOZ,KAOtB,YAA4F,IAA3D8D,EAA0D,EAA1DA,SAAUC,EAAgD,EAAhDA,SACrCE,EAAoBF,EAASnE,QAAQsC,QAErCgC,EAAyB,EAGzBJ,EAASlD,OAAOzD,aAAa+D,SAAS/D,EAAaiB,WACrD8F,EAAyBC,KAAKC,IAAI,EAAGN,EAASlE,QAAQ0C,iBAIpDwB,EAASlD,OAAOzD,aAAa+D,SAAS/D,EAAagB,WACrD+F,EAAyBC,KAAKC,IAAI,EAAGN,EAASlE,QAAQ0C,iBAIpDwB,EAASlD,OAAOzD,aAAa+D,SAAS/D,EAAae,OAAS6F,EAASnE,QAAQuC,MAAQ,IACvF+B,EAAyBC,KAAKC,IAAI,EAAGN,EAASlE,QAAQ0C,iBAIpDwB,EAASlD,OAAOzD,aAAa+D,SAAS/D,EAAaI,OACrD0G,GAAqB,GAInBH,EAASlD,OAAOzD,aAAa+D,SAAS/D,EAAaK,OACrDyG,GAAqB,GAEvB,IAAMI,EACJP,EAASlD,OAAOV,2BAChB4D,EAASlE,QAAQ0C,gBAAkBwB,EAASlD,OAAOX,gCAAkC,GAEjFqE,EAAyBH,KAAKC,IAAI,EAAGC,GAEvCE,EAAejB,EAAuBgB,EAAwBJ,GAA0BJ,EAASlD,OAAOf,WACxG2E,EAAuBb,EAAoBO,GAA0BJ,EAASlD,OAAOf,WAGzF,GAAIiE,EAASlD,OAAOzD,aAAa+D,SAAS/D,EAAauB,UAAW,CAChE,IAAM+F,EAAeN,KAAKO,IAAI,EAAGd,EAAoBU,GAA0BR,EAASlD,OAAOf,YAC/F0E,GAAgBjB,EAAuBgB,EAAwBJ,GAA0BO,EACzFD,GAAwBb,EAAoBO,GAA0BO,EAGxE,IAAME,EAAyBR,KAAKO,IAAIF,EAAsB,GAGxDI,EAAetB,EAAuBS,EAASnE,QAAQuC,KAAM4B,EAASnE,QAAQwC,cAC9EyC,EAAuBlB,EAAoBI,EAASnE,QAAQwC,cAE9D0C,EAAgBF,EAAeX,EAC/Bc,EAAwBF,EAAuBZ,EAGnD,GAAIH,EAASlD,OAAOjC,cAAcuC,SAASvC,EAAcE,IAAK,CAC5D,IAAMmG,EAAiB,EAAIL,EAO3BG,EALgBH,GAA0BV,EAAoB,GAAKW,EAEhDI,EAAiBf,EAAoBW,EAIxDG,EALoBJ,GAA0BV,EAAoB,GAAKY,EAEhDG,EAAiBf,EAAoBY,EAO1Df,EAASlD,OAAOjC,cAAcuC,SAASvC,EAAcC,WACvD2F,GAAgBI,EAAyBb,EAASlD,OAAOf,WACzD2E,GAAwBG,EAAyBb,EAASlD,OAAOf,YAInE,GAAIiE,EAASlD,OAAOzD,aAAa+D,SAAS/D,EAAaO,WAAY,CACjE,IAAMuH,EAAuB,EAAI,EAAKnB,EAASlD,OAAOf,WAEtD0E,GACEU,EAAsB3B,EAAuBQ,EAASlE,QAAQ0C,eAAgB4B,GAChFM,GAAwBS,EAAsBtB,EAAoBO,GAIpE,GAAIJ,EAASlD,OAAOzD,aAAa+D,SAAS/D,EAAaM,YAAa,CAClE,IAAMyH,EAAiBtB,EAAoBE,EAASlE,QAAQ0C,gBAAkBwB,EAASlD,OAAOf,WAE9F0E,GAAgBW,EAAiB5B,EAAuBQ,EAASlE,QAAQ0C,eAAgB4B,GACzFM,GAAwBU,EAAiBvB,EAAoBO,GAG/D,IAAMiB,EAAoBhB,KAAKC,IAAI,EAAGG,EAAeO,GAAiBhB,EAASlD,OAAOd,OAEhFsF,EAAqBjB,KAAKC,IAAI,EAAGI,EAAuBO,GAAyBjB,EAASlD,OAAOb,eAGnGsF,EAAK,EAELvB,EAASlD,OAAOjC,cAAcuC,SAASvC,EAAcG,OACvDuG,EAAK,GAGHvB,EAASlD,OAAOjC,cAAcuC,SAASvC,EAAcI,OACvDsG,EAAK,GAGHvB,EAASlD,OAAOjC,cAAcuC,SAASvC,EAAcK,OACvDqG,EAAK,GAGP,IAAMC,EAAuBd,EAAuBa,EAQpD,MAAO,CACLrF,KAAM,SACNuF,QAJ0BJ,EAAoBC,EAAqBE,GAIvCE,QAAQ,GACpCC,KAAMN,EAAkBK,QAAQ,GAChCE,MAAON,EAAmBI,QAAQ,GAClCH,IAAKC,EAAqBE,QAAQ,IAhI3BG,CAAsB,CAAE7B,WAAUC,aAGpCC,GAAqB,CAAEF,WAAUC,aAkInC,SAAS6B,GAAsBhF,GACpC,IAAIf,EAAae,EAAOf,WAOxB,OAJIe,EAAO1B,UAAUgC,SAAShC,EAAUE,iBACtCS,GAAc,GAGTA,EA8IT,SAASgG,GAAT,GAWmC,IAAD,IAVhCC,EAUgC,EAVhCA,sBACAC,EASgC,EAThCA,aACAC,EAQgC,EARhCA,cACAC,EAOgC,EAPhCA,iBACAC,EAMgC,EANhCA,sBACAC,EAKgC,EALhCA,aACAC,EAIgC,EAJhCA,cACAC,EAGgC,EAHhCA,iBACAC,EAEgC,EAFhCA,eACAC,EACgC,EADhCA,cAgBMC,EAAe,CACnB1C,SAAU,CACR2C,MAAOT,EACPU,KAAMX,EACNjG,OAAQ,EACRuC,OAAQkE,EAAclE,OACtBsE,cAAeb,EACfc,WAAY,GAEd7C,SAAU,CACR0C,MAAOL,EACPM,KAAMP,EACNrG,OAAQ,EACRuC,OAAQiE,EAAejE,OACvBsE,cAAeT,EACfU,WAAY,IAIZC,GAAqB,EACrBC,EAAU,EAgCd,IA7BEhB,EAAsBnH,cAAcuC,SAASvC,EAAcM,SAC3D,UAACqH,EAAelD,iBAAhB,aAAC,EAA0BlC,SAASkC,EAAUC,wBAE9CmD,EAAM1C,SAAS8C,WAAa,GAI5BV,EAAsBvH,cAAcuC,SAASvC,EAAcM,SAC3D,UAACsH,EAAcnD,iBAAf,aAAC,EAAyBlC,SAASkC,EAAUC,wBAE7CmD,EAAMzC,SAAS6C,WAAa,IAoB3BJ,EAAM1C,SAAS4C,KAAO,GAAKF,EAAM1C,SAAS2C,MAAQ,GAAKD,EAAMzC,SAAS2C,KAAO,GAAKF,EAAMzC,SAAS0C,MAAQ,IAC1GD,EAAM1C,SAASzB,OAASmE,EAAM1C,SAAShE,QACvC0G,EAAMzC,SAAS1B,OAASmE,EAAMzC,SAASjE,QACvCgH,EAAU,KAEVC,IACAF,GAAsBA,EACtBC,IAGF,MAAO,CACLE,eAAgBR,EAAM1C,SAAShE,OAC/BmH,eAAgBT,EAAMzC,SAASjE,OAC/BoH,aAAcV,EAAM1C,SAAShE,QAAU0G,EAAM1C,SAASzB,OACtD8E,aAAcX,EAAMzC,SAASjE,QAAU0G,EAAMzC,SAAS1B,OACtD+E,WAAYZ,EACZM,WAIF,SAASC,IACP,IAAMM,EAAWR,EAAqBZ,EAAmBI,EAEnDiB,EAAkBT,EAAqB,WAAa,WAEpDU,EAAYf,EAHMK,EAAqB,WAAa,YAIpDW,EAAYhB,EAAMc,GAExB,GAAiB,WAAbD,EAAuB,CACzB,IAAII,EAAU,EAEd,GAAIF,EAAUd,MAAQ,EAAG,CAEvB,IAAMiB,EAAuBvD,KAAKO,IAAI6C,EAAUd,MAAOgB,GAMvD,GALAD,EAAU1H,QAAU4H,EAAuBH,EAAUZ,cAAc5G,eACnEwH,EAAUd,OAASiB,EACnBD,GAAWC,EAGPH,EAAUX,WAAa,EAAG,CAC5B,IAAMe,EAAWxD,KAAKO,IAAI6C,EAAUX,WAAYY,EAAUd,KAAMgB,GAChEF,EAAUd,MAAQiB,EAClBJ,EAAUX,YAAce,GAe5B,GAAIJ,EAAUb,KAAO,GAAKe,EAAU,EAAG,CACrC,IAAMG,EAAezD,KAAKO,IAAI6C,EAAUb,KAAMe,GAY9C,GAXAD,EAAU1H,QAAU8H,EAAeL,EAAUZ,cAAc7G,OAC3DyH,EAAUb,MAAQkB,EAUF,KAThBH,GAAWG,GASQ,QAGvB,GAAiB,UAAbP,EAAsB,CACxB,IAAII,EAAU,EAEd,GAAIF,EAAUd,MAAQ,EAAG,CAEvB,IAAMoB,EAAoB1D,KAAKO,IAAI6C,EAAUd,MAAOe,EAAUf,MAAOgB,GAC/DK,EAAoBP,EAAUZ,cAAczH,UAAUgC,SAAShC,EAAU9B,cAC3E+G,KAAKO,IAAI8C,EAAUf,MAA2B,EAApBoB,GAC1BA,EAgBJ,GAdAL,EAAUf,OAASqB,EACnBP,EAAUd,OAASoB,EAaH,KAZhBJ,GAAWI,GAYQ,OAGnB,IAAME,EAAY5D,KAAKO,IAAI6C,EAAUd,MAAOe,EAAUd,KAAMe,GACtDO,EAAYT,EAAUZ,cAAczH,UAAUgC,SAAShC,EAAU9B,cACnE+G,KAAKO,IAAI8C,EAAUd,KAAkB,EAAZqB,GACzBA,EAgBJ,GAdAP,EAAUd,MAAQsB,EAClBT,EAAUd,OAASsB,EAaH,KAZhBN,GAAWM,GAYQ,OAGnB,IAAML,EAAuBvD,KAAKO,IAAI6C,EAAUd,MAAOgB,GAMvD,GALAD,EAAU1H,QAAU4H,EAAuBH,EAAUZ,cAAc5G,eACnEwH,EAAUd,OAASiB,EACnBD,GAAWC,EAGPH,EAAUX,WAAa,EAAG,CAC5B,IAAMe,EAAWxD,KAAKO,IAAI6C,EAAUX,WAAYY,EAAUd,KAAMgB,GAChEF,EAAUd,MAAQiB,EAClBJ,EAAUX,YAAce,EAS1B,GAAgB,IAAZF,EAAe,OAGrB,GAAIF,EAAUb,KAAO,EAAG,CACtB,GAAIc,EAAUb,cAAcxJ,aAAa+D,SAAS/D,EAAaoB,aAExD,CAEL,IAAMwJ,EAAY5D,KAAKO,IAAI6C,EAAUb,KAAMc,EAAUd,KAAMe,GACrDO,EAAYT,EAAUZ,cAAczH,UAAUgC,SAAShC,EAAU9B,cACnE+G,KAAKO,IAAI8C,EAAUd,KAAkB,EAAZqB,GACzBA,EAEJP,EAAUd,MAAQsB,EAClBT,EAAUb,MAAQqB,EAClBN,GAAWM,EAIb,GAAgB,IAAZN,EAAe,OAGnB,IAAMG,EAAezD,KAAKO,IAAI6C,EAAUb,KAAMe,GAM9C,GALAD,EAAU1H,QAAU8H,EAAeL,EAAUZ,cAAc7G,OAC3DyH,EAAUb,MAAQkB,EAIF,KAHhBH,GAAWG,GAGQ,UAM3B,SAAS5D,GAAT,GAA0F,IAA1DF,EAAyD,EAAzDA,SAAUC,EAA+C,EAA/CA,SACxC,EAzYK,YAA6E,IAA7CD,EAA4C,EAA5CA,SAAUC,EAAkC,EAAlCA,SAI3CkE,EAA8B,EAG9BnE,EAASlD,OAAOzD,aAAa+D,SAAS/D,EAAaiB,WACrD6J,EAA8B9D,KAAKC,IAAI,EAAGN,EAASlE,QAAQ2C,cAIzDuB,EAASlD,OAAOzD,aAAa+D,SAAS/D,EAAagB,WACrD8J,EAA8B9D,KAAKC,IAAI,EAAGN,EAASlE,QAAQ2C,cAG7D,IAAM2F,EAA8B/D,KAAKC,IACvC,EACAN,EAASlD,OAAOX,+BACZ6D,EAASlE,QAAQ2C,YAAcuB,EAASlD,OAAOX,+BAC/C6D,EAASlE,QAAQ2C,aAGjB4F,EAAqB7E,EAAuB4E,EAA6BD,GACzEG,EAAsBzE,EAAoBsE,GAE1CI,EAAqBzC,GAAsB9B,EAASlD,QAEtDmF,EAAeoC,EAAqBE,EACpCrC,EAAgBoC,EAAsBC,EAG1C,GAAIvE,EAASlD,OAAOzD,aAAa+D,SAAS/D,EAAaM,YAAa,CAClE,IAAMyH,EAAiBtB,EAAoBsE,GAA+BG,EAE1EtC,GAAgBb,EAAiB5B,EAAuB4E,EAA6BD,GACrFjC,GAAiBd,EAAiBvB,EAAoBsE,GAIxD,GAAInE,EAASlD,OAAOzD,aAAa+D,SAAS/D,EAAauB,UAAW,CAChE,IAAM+F,EAAeN,KAAKO,IAAI,EAAGd,EAAoBsE,GAA+BG,GACpFtC,GAAgBzC,EAAuB4E,EAA6BD,GAA+BxD,EACnGuB,GAAiBrC,EAAoBsE,GAA+BxD,EAGtE,IAAM6D,EAAmCnE,KAAKO,IAAI,EAAGsB,GAKjDuC,EAA6B,EAG7BxE,EAASnD,OAAOzD,aAAa+D,SAAS/D,EAAaiB,WACrDmK,EAA6BpE,KAAKC,IAAI,EAAGL,EAASnE,QAAQ2C,cAIxDwB,EAASnD,OAAOzD,aAAa+D,SAAS/D,EAAagB,WACrDoK,EAA6BpE,KAAKC,IAAI,EAAGL,EAASnE,QAAQ2C,cAG5D,IAOMiG,EAAqBlF,EAPQa,KAAKC,IACtC,EACAL,EAASnD,OAAOX,+BACZ8D,EAASnE,QAAQ2C,YAAcwB,EAASnD,OAAOX,+BAC/C8D,EAASnE,QAAQ2C,aAGuDgG,GACxEE,EAAsB9E,EAAoB4E,GAE5CG,EAAqB3E,EAASnD,OAAOf,WAGrCiE,EAASlD,OAAO1B,UAAUgC,SAAShC,EAAUC,iBAC/CuJ,GAAsB,GAGxB,IAAIvC,EAAeqC,EAAqBE,EACpCtC,EAAgBqC,EAAsBC,EAQ1C,GALI5E,EAASlD,OAAOjC,cAAcuC,SAASvC,EAAcM,QACvDkH,GAAgBqC,EAAqBF,GAInCvE,EAASnD,OAAOzD,aAAa+D,SAAS/D,EAAaM,YAAa,CAClE,IAAMyH,EAAiBtB,EAAoBsE,GAA+BG,EAE1ElC,GAAgBjB,EAAiB5B,EAAuB4E,EAA6BD,GACrF7B,GAAiBlB,EAAiBvB,EAAoBsE,GAIxD,GAAIlE,EAASnD,OAAOzD,aAAa+D,SAAS/D,EAAauB,UAAW,CAChE,IAAM+F,EAAeN,KAAKO,IAAI,EAAGd,EAAoBsE,GAA+BG,GACpFlC,GAAgB7C,EAAuB4E,EAA6BD,GAA+BxD,EACnG2B,GAAiBzC,EAAoBsE,GAA+BxD,EAGtE,IAAMkE,EAAmCxE,KAAKO,IAAI,EAAG0B,GAOrD,OAJIrC,EAASnD,OAAOjC,cAAcuC,SAASvC,EAAcM,QACvD8G,GAAgBoC,EAAqBQ,GAGhC,CACL5C,eACAC,gBACAG,eACAC,gBACA8B,8BACAD,8BACAO,qBACAC,sBACAN,qBACAC,uBAiRmEQ,CAAqB,CAAE9E,WAAUC,aAA9FgC,EAAR,EAAQA,aAAcC,EAAtB,EAAsBA,cAAeG,EAArC,EAAqCA,aAAcC,EAAnD,EAAmDA,cAO7CyC,EAAkBhD,GAAyB,CAC/CC,sBAAuBhC,EAASlD,OAChCmF,eACAC,gBACAC,iBAAkB,SAClBC,sBAAuBnC,EAASnD,OAChCuF,eACAC,gBACAC,iBAAkB,SAClBC,eAAgBvC,EAASnE,QACzB2G,cAAezC,EAASlE,UAOpBkJ,EAAsBjD,GAAyB,CACnDC,sBAAuBhC,EAASlD,OAChCmF,eACAC,gBACAC,iBAAkB,SAClBC,sBAAuBnC,EAASnD,OAChCuF,eACAC,gBACAC,iBAAkB,QAClBC,eAAgBvC,EAASnE,QACzB2G,cAAezC,EAASlE,UAOpBmJ,EAAsBlD,GAAyB,CACnDC,sBAAuBhC,EAASlD,OAChCmF,eACAC,gBACAC,iBAAkB,QAClBC,sBAAuBnC,EAASnD,OAChCuF,eACAC,gBACAC,iBAAkB,SAClBC,eAAgBvC,EAASnE,QACzB2G,cAAezC,EAASlE,UAOpBoJ,EAAkBnD,GAAyB,CAC/CC,sBAAuBhC,EAASlD,OAChCmF,eACAC,gBACAC,iBAAkB,QAClBC,sBAAuBnC,EAASnD,OAChCuF,eACAC,gBACAC,iBAAkB,QAClBC,eAAgBvC,EAASnE,QACzB2G,cAAezC,EAASlE,UAG1B,MAAO,CACLI,KAAM,QACNuF,MAAO,CACL0D,UAAW,CACTjC,eAAgB6B,EAAgB7B,eAChCC,eAAgB4B,EAAgB5B,eAChCC,aAAc2B,EAAgB3B,aAC9BC,aAAc0B,EAAgB1B,cAEhC+B,cAAe,CACblC,eAAgB8B,EAAoB9B,eACpCC,eAAgB6B,EAAoB7B,eACpCC,aAAc4B,EAAoB5B,aAClCC,aAAc2B,EAAoB3B,cAEpCgC,cAAe,CACbnC,eAAgB+B,EAAoB/B,eACpCC,eAAgB8B,EAAoB9B,eACpCC,aAAc6B,EAAoB7B,aAClCC,aAAc4B,EAAoB5B,cAEpCiC,UAAW,CACTpC,eAAgBgC,EAAgBhC,eAChCC,eAAgB+B,EAAgB/B,eAChCC,aAAc8B,EAAgB9B,aAC9BC,aAAc6B,EAAgB7B,gBCjsB/B,IAsNMkC,GAAkB,CAC7B1J,KAAM,cACNsD,UAAW,CACT,CACEtD,KAAM,mBACNuD,WAAY,CA3N8B,CAC9CvD,KAAM,4BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBAAMC,EAAkB,mBAAxB,YAA8CA,EAAkB,cACvEoC,eAAgB,CAAC,iBAAkB,YACnCH,cAAe,IAG8B,CAC7C7C,KAAM,2BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,cADhB,YAEFA,EAAkB,mBAFhB,YAGFA,EAAkB,yBAHhB,YAIFA,EAAkB,cAEvBoC,eAAgB,CAAC,YACjBH,cAAe,CAAC,CAAC,CAAC,YAAa,iBAAkB,2BAGL,CAC5C7C,KAAM,wBACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,cADhB,YAEFA,EAAkB,mBAFhB,YAGFA,EAAkB,0BAHhB,YAIFA,EAAkB,kBAJhB,YAKFA,EAAkB,aALhB,YAMFA,EAAkB,aANhB,YAOFA,EAAkB,iBAPhB,YAQFA,EAAkB,gBAEvBiC,cAAe,CACb,CAAC,CAAC,YAAa,CAAC,mBAChB,CACE,CAAC,aAAc,wBAAyB,iBACxC,CAAC,WAAY,eAAgB,mBA+J/B,CACE7C,KAAM,qBACNuD,WAAY,CA5JgC,CAChDvD,KAAM,8BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBAAMC,EAAkB,mBAAxB,YAA8CA,EAAkB,cACvEoC,eAAgB,CAAC,WAAY,kBAC7BH,cAAe,IAGgC,CAC/C7C,KAAM,6BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,cADhB,YAEFA,EAAkB,mBAFhB,YAGFA,EAAkB,yBAHhB,YAIFA,EAAkB,cAEvBoC,eAAgB,CAAC,YACjBH,cAAe,CAAC,CAAC,CAAC,YAAa,iBAAkB,2BAGH,CAC9C7C,KAAM,0BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,eADhB,YAEFA,EAAkB,0BAFhB,YAGFA,EAAkB,mBAHhB,YAIFA,EAAkB,kBAJhB,YAKFA,EAAkB,aALhB,YAMFA,EAAkB,aANhB,YAOFA,EAAkB,iBAPhB,YAQFA,EAAkB,gBAEvBiC,cAAe,CACb,CAAC,CAAC,YAAa,CAAC,mBAChB,CACE,CAAC,aAAc,wBAAyB,iBACxC,CAAC,WAAY,eAAgB,mBAgG/B,CACE7C,KAAM,YACNuD,WAAY,CA7FmC,CACnDvD,KAAM,iCACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBAAMC,EAAkB,kCAAxB,YAA6DA,EAAkB,sBACtFiC,cAAe,CAAC,CAAC,CAAC,gCAAiC,uBAGC,CACpD7C,KAAM,gCACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBAAMC,EAAkB,kCAAxB,YAA6DA,EAAkB,sBACtFiC,cAAe,CAAC,CAAC,CAAC,gCAAiC,uBAGA,CACnD7C,KAAM,iCACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,sBADhB,YAEFA,EAAkB,gBAFhB,YAGFA,EAAkB,iBAHhB,YAIFA,EAAkB,gBAEvBiC,cAAe,CACb,CACE,CAAC,oBAAqB,eACtB,CAAC,eAAgB,iBAK+B,CACpD7C,KAAM,gCACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,sBADhB,YAEFA,EAAkB,gBAFhB,YAGFA,EAAkB,iBAHhB,YAIFA,EAAkB,gBAEvBiC,cAAe,CACb,CACE,CAAC,oBAAqB,eACtB,CAAC,eAAgB,qBCgEV8G,GAAkB,CAC7B3J,KAAM,cACNsD,UAAW,CACT,CACEtD,KAAM,mBACNuD,WAAY,CAtR8B,CAC9CvD,KAAM,4BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBAAMC,EAAkB,YAAxB,YAAuCA,EAAkB,YAAzD,YAAwEA,EAAkB,cACjGoC,eAAgB,CAAC,WAAY,UAAW,WACxCH,cAAe,IAG8B,CAC7C7C,KAAM,2BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,WADhB,YAEFA,EAAkB,qBAFhB,YAGFA,EAAkB,WAHhB,YAIFA,EAAkB,cAEvBoC,eAAgB,CAAC,YACjBH,cAAe,CAAC,CAAC,CAAC,SAAU,mBAAoB,aAGE,CAClD7C,KAAM,iCACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,kBADhB,YAEFA,EAAkB,iBAFhB,YAGFA,EAAkB,mBAHhB,YAIFA,EAAkB,cAEvBoC,eAAgB,CAAC,YACjBH,cAAe,CAAC,CAAC,CAAC,gBAAiB,eAAgB,qBAGF,CACjD7C,KAAM,gCACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBAAMC,EAAkB,YAAxB,YAAuCA,EAAkB,YAAzD,YAAwEA,EAAkB,cACjGoC,eAAgB,CAAC,WAAY,UAAW,WACxCH,cAAe,IAG8B,CAC7C7C,KAAM,2BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,YADhB,YAEFA,EAAkB,YAFhB,YAGFA,EAAkB,eAHhB,YAIFA,EAAkB,gBAJhB,YAKFA,EAAkB,eALhB,YAMFA,EAAkB,eANhB,YAOFA,EAAkB,WAAY,CAAEN,+BAAgC,KAP9D,YAQFM,EAAkB,eARhB,YASFA,EAAkB,gBAEvBiC,cAAe,CACb,CAAC,CAAC,UAAW,WAAY,CAAC,aAC1B,CACE,CAAC,aAAc,cAAe,cAC9B,CAAC,aAAc,aAAc,mBA0L/B,CACE7C,KAAM,kBACNuD,WAAY,CAvL6B,CAC7CvD,KAAM,4BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBAAMC,EAAkB,eAAxB,YAA0CA,EAAkB,yBACnEoC,eAAgB,CAAC,aAAc,uBAC/BH,cAAe,IAG6B,CAC5C7C,KAAM,2BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBAAMC,EAAkB,gBAAxB,YAA2CA,EAAkB,yBACpEoC,eAAgB,CAAC,cAAe,uBAChCH,cAAe,IAG8B,CAC7C7C,KAAM,4BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,eADhB,YAEFA,EAAkB,sBAFhB,YAGFA,EAAkB,qBAHhB,YAIFA,EAAkB,oBAEvBoC,eAAgB,CAAC,cACjBH,cAAe,CAAC,CAAC,CAAC,oBAAqB,mBAAoB,qBAGX,CAChD7C,KAAM,gCACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBAAMC,EAAkB,eAAxB,YAA0CA,EAAkB,yBACnEoC,eAAgB,CAAC,aAAc,uBAC/BH,cAAe,IAG6B,CAC5C7C,KAAM,2BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,eADhB,YAEFA,EAAkB,gBAFhB,YAGFA,EAAkB,cAHhB,YAIFA,EAAkB,4BAJhB,YAKFA,EAAkB,yBAEvBiC,cAAe,CACb,CACE,CAAC,aAAc,cAAe,aAC9B,CAAC,0BAA2B,4BAqG9B,CACE7C,KAAM,oBACNuD,WAAY,CAlG+B,CAC/CvD,KAAM,6BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBAAMC,EAAkB,eAAxB,YAA0CA,EAAkB,yBACnEoC,eAAgB,CAAC,aAAc,uBAC/BH,cAAe,IAG+B,CAC9C7C,KAAM,4BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBAAMC,EAAkB,gBAAxB,YAA2CA,EAAkB,yBACpEoC,eAAgB,CAAC,cAAe,uBAChCH,cAAe,IAGmC,CAClD7C,KAAM,iCACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBAAMC,EAAkB,eAAxB,YAA0CA,EAAkB,yBACnEoC,eAAgB,CAAC,aAAc,uBAC/BH,cAAe,IAG+B,CAC9C7C,KAAM,4BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,eADhB,YAEFA,EAAkB,gBAFhB,YAGFA,EAAkB,2CAHhB,YAIFA,EAAkB,yBAEvBiC,cAAe,CACb,CACE,CAAC,aAAc,eACf,CAAC,yCAA0C,8BC3QpC+G,GAAkC,CAC7C5J,KAAM,2BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,mBADhB,YAEFA,EAAkB,mBAFhB,YAGFA,EAAkB,kBAEvBiJ,qBAAsBjJ,EAAkB,kBAAkB,GAC1D6C,UAAW,CAACA,EAAUC,qBACtBb,cAAe,CAAC,CAAC,CAAC,mBAAoB,CAAC,CAAC,kBAAmB,CAAC,mBAGjDiH,GAAmC,CAC9C9J,KAAM,4BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,mBADhB,YAEFA,EAAkB,mBAFhB,YAGFA,EAAkB,kBAEvBiJ,qBAAsBjJ,EAAkB,kBAAkB,GAC1D6C,UAAW,CAACA,EAAUC,qBACtBb,cAAe,CAAC,CAAC,CAAC,mBAAoB,CAAC,CAAC,kBAAmB,CAAC,mBA2EjDkH,GAA0B,CACrC/J,KAAM,wBACNsD,UAAW,CACT,CACEtD,KAAM,mBACNuD,WAAY,CAACuG,GAAuBF,KAEtC,CACE5J,KAAM,qBACNuD,WAAY,CAjFkC,CAClDvD,KAAM,+BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBAAMC,EAAkB,YAAxB,YAAuCA,EAAkB,WAAY,CAAEG,qBAAsB,MACpG0C,UAAW,GACXT,eAAgB,CAAC,UAAW,YAC5BH,cAAe,IAGoC,CACnD7C,KAAM,gCACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBAAMC,EAAkB,WAAxB,YAAsCA,EAAkB,WAAY,CAAEG,qBAAsB,MACnG0C,UAAW,GACXT,eAAgB,CAAC,SAAU,YAC3BH,cAAe,IAGkC,CACjD7C,KAAM,8BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,YAAKC,EAAkB,2BAC/B6C,UAAW,GACXT,eAAgB,CAAC,0BACjBH,cAAe,IAGiC,CAChD7C,KAAM,6BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,YADhB,YAEFA,EAAkB,WAFhB,YAGFA,EAAkB,2BAHhB,YAIFA,EAAkB,WAAY,CAAEG,qBAAsB,MAE3D0C,UAAW,GACXZ,cAAe,CAAC,CAAC,CAAC,WAAY,CAAC,aAAc,CAAC,CAAC,UAAW,CAAC,aAAc,CAAC,CAAC,iC,oBCmLhEmH,GAAmB,CAC9BhK,KAAM,eACNsD,UAAW,CACT,CACEtD,KAAM,WACNuD,WAAY,CAvS+B,CAC/CvD,KAAM,2BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBAAMC,EAAkB,mBAAxB,YAA8CA,EAAkB,cACvEoC,eAAgB,CAAC,iBAAkB,YACnCH,cAAe,IAG8B,CAC7C7C,KAAM,yBACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBAAMC,EAAkB,mBAAxB,YAA8CA,EAAkB,cACvEoC,eAAgB,CAAC,iBAAkB,YACnCH,cAAe,IAGgC,CAC/C7C,KAAM,2BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBAAMC,EAAkB,mBAAxB,YAA8CA,EAAkB,cACvEoC,eAAgB,CAAC,iBAAkB,YACnCH,cAAe,IAG8B,CAC7C7C,KAAM,yBACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,cADhB,YAEFA,EAAkB,mBAFhB,YAGFA,EAAkB,yBAHhB,YAIFA,EAAkB,cAEvBoC,eAAgB,CAAC,YACjBH,cAAe,CAAC,CAAC,CAAC,YAAa,iBAAkB,2BAGL,CAC5C7C,KAAM,wBACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,cADhB,YAEFA,EAAkB,mBAFhB,YAGFA,EAAkB,0BAHhB,YAIFiB,EAAiCjB,EAAkB,gCAAiC,CAACrB,EAAUM,mBAJ7F,YAKFe,EAAkB,aALhB,YAMFA,EAAkB,aANhB,YAOFA,EAAkB,iBAPhB,YAQFA,EAAkB,gBAEvBiC,cAAe,CACb,CAAC,CAAC,YAAa,CAAC,mBAChB,CAAC,CAAC,gBAAiB,CAAC,iCACpB,CACE,CAAC,aAAc,yBACf,CAAC,WAAY,iBAKoC,CACrD7C,KAAM,iCACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFkB,EAAiCjB,EAAkB,kBAAmB,CAACrB,EAAUM,mBAD/E,YAEFe,EAAkB,cAEvBoC,eAAgB,CAAC,WAAY,kBAC7BH,cAAe,IAGgC,CAC/C7C,KAAM,2BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFkB,EAAiCjB,EAAkB,kBAAmB,CAACrB,EAAUM,mBAD/E,YAEFe,EAAkB,cAEvBoC,eAAgB,CAAC,WAAY,kBAC7BH,cAAe,IAGkC,CACjD7C,KAAM,6BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFkB,EAAiCjB,EAAkB,kBAAmB,CAACrB,EAAUM,mBAD/E,YAEFe,EAAkB,cAEvBoC,eAAgB,CAAC,WAAY,kBAC7BH,cAAe,IAGgC,CAC/C7C,KAAM,2BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,cADhB,YAEFA,EAAkB,mBAFhB,YAGFA,EAAkB,yBAHhB,YAIFA,EAAkB,cAEvBoC,eAAgB,CAAC,YACjBH,cAAe,CAAC,CAAC,CAAC,YAAa,iBAAkB,2BAGH,CAC9C7C,KAAM,0BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,eADhB,YAEFA,EAAkB,0BAFhB,YAGFiB,EAAiCjB,EAAkB,kBAAmB,CAACrB,EAAUM,mBAH/E,YAIFgC,EAAiCjB,EAAkB,gCAAiC,CAACrB,EAAUM,mBAJ7F,YAKFe,EAAkB,aALhB,YAMFA,EAAkB,aANhB,YAOFA,EAAkB,iBAPhB,YAQFA,EAAkB,gBAEvBiC,cAAe,CACb,CAAC,CAAC,YAAa,CAAC,mBAChB,CAAC,CAAC,gBAAiB,CAAC,iCACpB,CACE,CAAC,aAAc,yBACf,CAAC,WAAY,iBAKmC,CACpD7C,KAAM,gCACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBAAMC,EAAkB,kCAAxB,YAA6DA,EAAkB,sBACtFiC,cAAe,CAAC,CAAC,CAAC,gCAAiC,uBAGC,CACpD7C,KAAM,gCACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,YAAKC,EAAkB,mCAC/BoC,eAAgB,CAAC,kCACjBH,cAAe,IAGoC,CACnD7C,KAAM,+BACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,sBADhB,YAEFA,EAAkB,gBAFhB,YAGFA,EAAkB,iBAHhB,YAIFA,EAAkB,gBAEvBiC,cAAe,CACb,CACE,CAAC,oBAAqB,eACtB,CAAC,eAAgB,iBAK+B,CACpD7C,KAAM,gCACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRC,eAAgB,EAChBC,YAAa,EACbjC,QAAQ,GAAD,mBACFC,EAAkB,sBADhB,YAEFA,EAAkB,gBAFhB,YAGFA,EAAkB,iBAHhB,YAIFA,EAAkB,gBAEvBiC,cAAe,CACb,CACE,CAAC,oBAAqB,eACtB,CAAC,eAAgB,qB,wCChPjBoH,GAAqB,CACzB5G,EACAG,EACAkG,GACAM,GACAL,GACAI,IAGWG,GAAkBJ,GAElBK,GAAwB,CACnCnK,KAAM,MACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,GACRE,YAAa,EACbD,eAAgB,EAChBhC,QAAS,CACP,CACEX,KAAM,eACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,CAACA,EAAaiB,SAC5BO,cAAe,GACfO,UAAW,GACXc,KAAM,WAKN+J,GAAwB,CAC5BpK,KAAM,MACNoC,SAAU,EACVC,IAAK,EACLC,gBAAiB,EACjBC,QAAS,EACTC,KAAM,EACNC,aAAc,EACdC,OAAQ,EACRE,YAAa,EACbD,eAAgB,EAChBhC,QAAS,CACP,CACEX,KAAM,WACNC,QAAS,GACTC,WAAY,EACZC,OAAQ,EACRC,eAAgB,EAChB5C,aAAc,GACdwB,cAAe,GACfO,UAAW,GACXc,KAAM,WAKZ,SAASgK,GAAkBlK,GACzB,IAAMmK,EAAInK,EAAOyF,MACjB,OACE,qCACE,uBAAK2E,MAAO,CAAEC,QAAS,OAAQC,SAAU,QAAzC,UACE,uBAAKF,MAAO,CAAEC,QAAS,cAAeE,MAAO,QAA7C,UACE,uBAAMH,MAAO,CAAEI,KAAM,OAAQC,UAAW,SAAxC,0BACA,wBAAML,MAAO,CAAEI,KAAM,OAAQE,MAAO,QAASD,UAAW,OAAQE,WAAY,QAA5E,UACGR,EAAEhB,UAAUhC,eAAezB,QAAQ,GACnCyE,EAAEhB,UAAU9B,cAAgB,kBACvB,IACR,wBAAM+C,MAAO,CAAEI,KAAM,OAAQE,MAAO,MAAOD,UAAW,QAAtD,UACGN,EAAEhB,UAAUjC,eAAexB,QAAQ,GACnCyE,EAAEhB,UAAU/B,cAAgB,qBAGjC,uBAAKgD,MAAO,CAAEC,QAAS,cAAeE,MAAO,QAA7C,UACE,uBAAMH,MAAO,CAAEI,KAAM,OAAQC,UAAW,SAAxC,0BACA,wBAAML,MAAO,CAAEI,KAAM,OAAQE,MAAO,QAASD,UAAW,OAAQE,WAAY,QAA5E,UACGR,EAAEf,cAAcjC,eAAezB,QAAQ,GACvCyE,EAAEf,cAAc/B,cAAgB,kBAC3B,IACR,wBAAM+C,MAAO,CAAEI,KAAM,OAAQE,MAAO,MAAOD,UAAW,QAAtD,UACGN,EAAEf,cAAclC,eAAexB,QAAQ,GACvCyE,EAAEf,cAAchC,cAAgB,qBAGrC,uBAAKgD,MAAO,CAAEC,QAAS,cAAeE,MAAO,QAA7C,UACE,uBAAMH,MAAO,CAAEI,KAAM,OAAQC,UAAW,SAAxC,0BACA,wBAAML,MAAO,CAAEI,KAAM,OAAQE,MAAO,QAASD,UAAW,OAAQE,WAAY,QAA5E,UACGR,EAAEd,cAAclC,eAAezB,QAAQ,GACvCyE,EAAEd,cAAchC,cAAgB,kBAC3B,IACR,wBAAM+C,MAAO,CAAEI,KAAM,OAAQE,MAAO,MAAOD,UAAW,QAAtD,UACGN,EAAEd,cAAcnC,eAAexB,QAAQ,GACvCyE,EAAEd,cAAcjC,cAAgB,0BA0D7C,SAASwD,GAAiB/K,EAAkBgL,GAC1C,OAAOA,EAAOC,MAAK,SAACC,GAClB,OAAOA,EAAW3J,SAASvB,MA4B/B,SAASmL,GAAgBC,EAAwBnL,GAE/C,IAAKA,EAAQ4C,cACX,OAAO,EAGT,IA9ByB7C,EA8BrBqL,EAAa,YAAOpL,EAAQ4C,eAyBhC,OAtBIyI,MAAMC,QAAQtL,EAAQuL,kBAAoBvL,EAAQuL,gBAAgBC,OAAS,IAE7ExL,EAAQuL,gBAAgBE,SAAQ,SAACC,GAC/BN,EAAgBA,EAAcrK,QAAO,SAACgK,GAAD,OAAYD,GAAiBY,EAAgBX,SAKpFK,EAAgBA,EAAcrK,QAAO,SAACgK,GAEpC,GAAI/K,EAAQuL,gBAAiB,CAC3B,IAAMI,EAAyC3L,EAAQuL,gBAAgBP,MAAK,SAACU,GAAD,OA9BpF,SAAmCE,EAAqBC,EAAqBd,GAC3E,OAAIa,IAAYC,GAITd,EAAOC,MAAK,SAACc,GAClB,OAAOA,EAAaxK,SAASsK,IAAYE,EAAaxK,SAASuK,MAyBzDE,CAA0BL,EAAgBP,EAAYJ,MAGxD,OA1CR,SAA0BQ,EAA+BR,GACvD,OAAOA,EAAOiB,OAAM,SAACF,GACnB,OAAOP,EAAgBP,MAAK,SAACU,GAC3B,OAAOI,EAAaxK,SAASoK,SAuCnBO,CAAiBjM,EAAQuL,gBAAiBR,KAAYY,EAGhE,OAAO,MAnDc5L,EAuDAoL,EAAYC,EAtDtBJ,MAAK,SAACD,GACnB,OAAOD,GAAiB/K,EAAMgL,MAwDlC,SAASmB,GACPlL,EACA2F,EACAwF,EACAC,EAJF,GAUG,IAAD,IAJEC,EAIF,EAJEA,UACAC,EAGF,EAHEA,cAGF,IAFEC,uBAEF,MAFoB,cAEpB,EACMC,EAAYvI,EAAgB,CAChCC,SAAU,CAAElE,QAAS2G,EAAe3F,OAAQA,GAC5CmD,SAAU,CAAEnE,QAASmK,GAAYnJ,OAAQmJ,GAAWzJ,QAAQ,MAExD+L,EAAYxI,EAAgB,CAChCC,SAAU,CAAElE,QAAS2G,EAAe3F,OAAQA,GAC5CmD,SAAU,CAAEnE,QAASkK,GAAYlJ,OAAQkJ,GAAWxJ,QAAQ,MAExDgM,EAAiBzI,EAAgB,CACrCC,SAAU,CAAElE,QAAS2G,EAAe3F,OAAQA,GAC5CmD,SAAU,CACRnE,QAASiK,GACTjJ,OAAQiJ,GAAgBvJ,QAAQiM,MAC9B,SAAC3L,GAAD,MAA4B,mBAAhBA,EAAOjB,MAA6C,UAAhBiB,EAAOZ,WAKvDwM,EAAwB,CAC5BL,mBAGIM,EAAkC,CACtCN,kBACAO,UAAW,UAGTR,IACFM,EAAOG,kBAAoB,EAC3BF,EAAiBE,kBAAoB,GAGvC,IAAMC,EAA8B,UAAhBhM,EAAOZ,KAAmBuG,EAAchE,YAAcgE,EAAcjE,eAElFuK,EACJjM,EAAOV,2BAA6B0M,GAAehM,EAAOX,gCAAkC,GAExF6M,EAAiB3I,KAAKC,IAAI,EAAGyI,GAE7BE,EAAU,UAAGxG,EAAc4E,uBAAjB,aAAG,EAA+BP,MAAK,SAACoC,GAAD,OAAkBA,IAAiBpM,EAAOjB,QAC3FsN,EAAenC,GAAgBlK,EAAOjB,KAAM4G,GAC5C2G,EAAe,UAAG3G,EAAc5D,sBAAjB,aAAG,EAA8BzB,SAASN,EAAOjB,MAEhEwN,EAAqBnB,EAAY,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAK,CAAC,EAAG,EAAG,EAAG,EAAG,GAE/E,OACE,sCACIiB,GAAgBF,GAAcG,IAC9B,gBAACE,EAAA,EAAD,CAEEC,UAAWC,KAAW,CACpB,kBAAmBP,EACnB,mBAAoBE,EACpB,iBAAkBC,EAClB,aAAcjB,EACd,kBAAmBC,IAPvB,UAUE,gBAACqB,EAAA,EAAD,CAAWrD,MAAOuC,EAAlB,UACGQ,IAAiBF,IAAed,GAC/B,qCACE,eAACuB,EAAA,EAAD,CACEC,KAAK,QACLjD,MAAM,UACNkD,QAAQ,YACRC,QAAS,kBAnL3B,SAA4B/N,EAAoBD,EAAkBoM,GAChE,GAAId,MAAMC,QAAQtL,EAAQuL,iBACxB,OAAIvL,EAAQuL,gBAAgBjK,SAASvB,QACnCiO,QAAQC,KAAK,yBAIf9B,EAAa,2BACRnM,GADO,IAEVuL,gBAAgB,GAAD,mBAAMvL,EAAQuL,iBAAd,CAA+BxL,OAMlDoM,EAAa,2BACRnM,GADO,IAEVuL,gBAAiB,CAACxL,MAkKWmO,CAAmBvH,EAAe3F,EAAOjB,KAAMoM,IAJhE,iBAUHgB,IAAed,GACd,eAACuB,EAAA,EAAD,CACEC,KAAK,QACLjD,MAAM,YACNkD,QAAQ,YACRC,QAAS,kBAzKzB,SAA8B/N,EAAoBD,EAAkBoM,GAClE,GAAId,MAAMC,QAAQtL,EAAQuL,iBACxB,OAAKvL,EAAQuL,gBAAgBjK,SAASvB,QAKtCoM,EAAa,2BACRnM,GADO,IAEVuL,gBAAgB,YAAKvL,EAAQuL,gBAAgBxK,QAAO,SAACC,GAAD,OAAYA,IAAWjB,cAN3EiO,QAAQC,KAAK,2CAYjBD,QAAQC,KAAK,2CA0JgBE,CAAqBxH,EAAe3F,EAAOjB,KAAMoM,IAJlE,eASDmB,IAAoBjB,GACnB,2CAEE,wBAFF,iBAOJ,eAACsB,EAAA,EAAD,CAAWrD,MAAOsC,EAAlB,SAA2BP,EAAY,GAAKrL,EAAOjB,OACnD,eAAC4N,EAAA,EAAD,CAAWrD,MAAOsC,EAAlB,SAA2B5L,EAAOhB,UACjB,iBAAhBgB,EAAOjB,KACN,UAAIwN,GAAoBtM,KAAI,SAACmN,GAAD,OAAU,eAACT,EAAA,EAAD,CAAWrD,MAAOsC,GAAawB,MAErE,uCACE,eAACT,EAAA,EAAD,CAAWrD,MAAOsC,EAAlB,SAA2B5G,GAAsBhF,KACjD,gBAAC2M,EAAA,EAAD,CAAWrD,MAAOsC,EAAlB,UAA2BM,EAA3B,OACA,gBAACS,EAAA,EAAD,CAAWrD,MAAOsC,EAAlB,UACG5L,EAAOd,OADV,IACmBc,EAAOb,kBAE1B,eAACwN,EAAA,EAAD,CAAWrD,MAAOsC,EAAlB,SAA2B5L,EAAOzD,aAAa0D,KAAI,SAACoN,GAAD,OAAUA,EAAK5Q,SAAO6Q,KAAK,QAC9E,eAACX,EAAA,EAAD,CAAWrD,MAAOsC,EAAlB,SAA2B5L,EAAOjC,cAAckC,KAAI,SAACoN,GAAD,OAAUA,EAAK5Q,SAAO6Q,KAAK,QAC9ElC,GACC,uCACE,eAACuB,EAAA,EAAD,CAAWrD,MAAOsC,EAAlB,SACE,kCAA4B,UAAnBJ,EAAUpM,KAAmBgK,GAAkBoC,GAAaA,EAAU7G,UAGjF,eAACgI,EAAA,EAAD,CAAWrD,MAAOsC,EAAlB,SACE,kCAA4B,UAAnBH,EAAUrM,KAAmBgK,GAAkBqC,GAAaA,EAAU9G,UAGjF,eAACgI,EAAA,EAAD,CAAWrD,MAAOsC,EAAlB,SACE,kCAC2B,UAAxBF,EAAetM,KAAmBgK,GAAkBsC,GAAkBA,EAAe/G,kBAjE7F3E,EAAOjB,KAAOiB,EAAOhB,WA+EpC,SAASuO,GAAT,GAQI,IAPFC,EAOC,EAPDA,UACAC,EAMC,EANDA,cACArC,EAKC,EALDA,UAMA,EAA4CsC,mBAAoBF,GAAhE,mBAAOG,EAAP,KAAuBC,EAAvB,KACIC,EAAW,kBAEf,SAASC,IAELD,EADe,oBAAbA,EACS,cAEA,kBAIf,IAAME,EAAgBJ,EAAejO,QAAQK,QAAO,SAACC,GAAD,MAA4B,WAAhBA,EAAOZ,QACjEI,EAAemO,EAAejO,QAAQK,QAAO,SAACC,GAAD,MAA4B,UAAhBA,EAAOZ,QAEtE,OACE,gBAAC4O,EAAA,EAAD,CAAgBC,UAAWC,IAA3B,UACE,eAACC,EAAA,EAAD,CAAOtB,KAAK,QAAZ,SACE,gBAACuB,EAAA,EAAD,WACE,gBAAC5B,EAAA,EAAD,CAAUlD,MAAO,CAAEiC,gBAAiB,oBAApC,UACE,gBAACoB,EAAA,EAAD,CAAW0B,QAAS,EAAG/E,MAAO,CAAEG,MAAO,MAAO8B,gBAAiB,gBAAiB3B,MAAO,SAAvF,UACE,eAAC0E,EAAA,EAAD,CAAYxB,QAAQ,KAApB,SAA0Ba,EAAe5O,OACzC,eAACwP,EAAA,EAAD,CAAYxB,QAASU,EAArB,6BAEF,eAACd,EAAA,EAAD,CAAWrD,MAAO,CAAEwC,UAAW,SAAU0C,WAAY,KAArD,eACA,eAAC7B,EAAA,EAAD,CAAWrD,MAAO,CAAEwC,UAAW,SAAU0C,WAAY,KAArD,iBACA,eAAC7B,EAAA,EAAD,CAAWrD,MAAO,CAAEwC,UAAW,SAAU0C,WAAY,KAArD,mBAEF,gBAAChC,EAAA,EAAD,CAAUlD,MAAO,CAAEiC,gBAAiB,mBAApC,UACE,eAACoB,EAAA,EAAD,CAAWrD,MAAO,CAAEmF,aAAc,EAAG3C,UAAW,UAAhD,SAA6D6B,EAAexM,WAC5E,eAACwL,EAAA,EAAD,CAAWrD,MAAO,CAAEmF,aAAc,EAAG3C,UAAW,UAAhD,SAA6D6B,EAAevM,MAC5E,eAACuL,EAAA,EAAD,CAAWrD,MAAO,CAAEmF,aAAc,EAAG3C,UAAW,UAAhD,SAA6D6B,EAAetM,qBAE9E,gBAACmL,EAAA,EAAD,CAAUlD,MAAO,CAAEiC,gBAAiB,oBAApC,UACE,eAACoB,EAAA,EAAD,CAAWrD,MAAO,CAAEwC,UAAW,SAAU0C,WAAY,KAArD,gBACA,eAAC7B,EAAA,EAAD,CAAWrD,MAAO,CAAEwC,UAAW,SAAU0C,WAAY,KAArD,gBACA,eAAC7B,EAAA,EAAD,CAAWrD,MAAO,CAAEwC,UAAW,SAAU0C,WAAY,KAArD,kBAEF,gBAAChC,EAAA,EAAD,CAAUlD,MAAO,CAAEiC,gBAAiB,mBAApC,UACE,eAACoB,EAAA,EAAD,CAAWrD,MAAO,CAAEwC,UAAW,UAA/B,SAA4C6B,EAAerM,UAC3D,gBAACqL,EAAA,EAAD,CAAWrD,MAAO,CAAEwC,UAAW,UAA/B,UAA4C6B,EAAepM,KAA3D,OACA,eAACoL,EAAA,EAAD,CAAWrD,MAAO,CAAEwC,UAAW,UAA/B,SAA4C6B,EAAelM,iBAIjE,gBAAC0M,EAAA,EAAD,WACE,eAACC,EAAA,EAAD,UACGL,EAAcvD,OAAS,GACtB,gBAACgC,EAAA,EAAD,WACE,eAACG,EAAA,EAAD,IACA,eAACA,EAAA,EAAD,mBACA,eAACA,EAAA,EAAD,sBACA,eAACA,EAAA,EAAD,gBACA,eAACA,EAAA,EAAD,iBACA,eAACA,EAAA,EAAD,gBACA,eAACA,EAAA,EAAD,iBACA,eAACA,EAAA,EAAD,gBACCvB,GACC,uCACE,eAACuB,EAAA,EAAD,6BACA,eAACA,EAAA,EAAD,6BACA,eAACA,EAAA,EAAD,0CAMV,eAAC+B,EAAA,EAAD,UACGX,EAAc9N,KAAI,SAACD,EAAQO,GAAW,IAAD,IAC9BoO,EAA+B,IAAVpO,GAAsBP,EAAOjB,QAAP,UAAgBgP,EAAcxN,EAAQ,UAAtC,aAAgB,EAA0BxB,MACrF6P,EAAiB5O,EAAOjB,QAAP,UAAgBgP,EAAcxN,EAAQ,UAAtC,aAAgB,EAA0BxB,MAMjE,OAJK4P,GACHb,IAGK5C,GAAkBlL,EAAQ2N,EAAgBC,EAAmBxC,EAAW,CAC7EC,UAAWsD,EACXrD,cAAesD,EACfrD,gBAAiBsC,SAItBrO,EAAagL,OAAS,GACrB,eAAC4D,EAAA,EAAD,UACE,gBAAC5B,EAAA,EAAD,WACE,eAACG,EAAA,EAAD,IACA,eAACA,EAAA,EAAD,mBACA,eAACA,EAAA,EAAD,sBACA,eAACA,EAAA,EAAD,gBACA,eAACA,EAAA,EAAD,iBACA,eAACA,EAAA,EAAD,gBACA,eAACA,EAAA,EAAD,iBACA,eAACA,EAAA,EAAD,gBACCvB,GACC,uCACE,gBAACuB,EAAA,EAAD,wCAEE,wBACA,uBAAKrD,MAAO,CAAEC,QAAS,cAAeE,MAAO,QAA7C,UACE,uBAAMH,MAAO,CAAEI,KAAM,OAAQC,UAAW,SAAxC,sBACA,uBAAML,MAAO,CAAEI,KAAM,OAAQE,MAAO,QAASD,UAAW,OAAQE,WAAY,QAA5E,sBAEQ,IACR,uBAAMP,MAAO,CAAEI,KAAM,OAAQE,MAAO,MAAOD,UAAW,QAAtD,6BAGJ,gBAACgD,EAAA,EAAD,4CAEE,wBACA,uBAAKrD,MAAO,CAAEC,QAAS,cAAeE,MAAO,QAA7C,UACE,uBAAMH,MAAO,CAAEI,KAAM,OAAQC,UAAW,SAAxC,sBACA,uBAAML,MAAO,CAAEI,KAAM,OAAQE,MAAO,QAASD,UAAW,OAAQE,WAAY,QAA5E,sBAEQ,IACR,uBAAMP,MAAO,CAAEI,KAAM,OAAQE,MAAO,MAAOD,UAAW,QAAtD,6BAGJ,gBAACgD,EAAA,EAAD,8CAEE,wBACA,uBAAKrD,MAAO,CAAEC,QAAS,cAAeE,MAAO,QAA7C,UACE,uBAAMH,MAAO,CAAEI,KAAM,OAAQC,UAAW,SAAxC,sBACA,uBAAML,MAAO,CAAEI,KAAM,OAAQE,MAAO,QAASD,UAAW,OAAQE,WAAY,QAA5E,sBAEQ,IACR,uBAAMP,MAAO,CAAEI,KAAM,OAAQE,MAAO,MAAOD,UAAW,QAAtD,qCAQd,eAAC+E,EAAA,EAAD,UACGlP,EAAaS,KAAI,SAACD,EAAQO,GAAW,IAAD,IAC7BoO,EAA+B,IAAVpO,GAAsBP,EAAOjB,QAAP,UAAgBS,EAAae,EAAQ,UAArC,aAAgB,EAAyBxB,MACpF6P,EAAiB5O,EAAOjB,QAAP,UAAgBS,EAAae,EAAQ,UAArC,aAAgB,EAAyBxB,MAMhE,OAJK4P,GACHb,IAGK5C,GAAkBlL,EAAQ2N,EAAgBC,EAAmBxC,EAAW,CAC7EC,UAAWsD,EACXrD,cAAesD,EACfrD,gBAAiBsC,cAlIYF,EAAe5O,MAgJ1D,IAAM8P,GAA6C,SAACC,GAClD,IAAQC,EAAqCD,EAArCC,SAAUC,EAA2BF,EAA3BE,MAAOzO,EAAoBuO,EAApBvO,MAAU0O,EAAnC,YAA6CH,EAA7C,IAEA,OACE,8CACEI,KAAK,WACLC,OAAQH,IAAUzO,EAClB6O,GAAE,0BAAqB7O,GACvB,uCAA+BA,IAC3B0O,GALN,aAOGD,IAAUzO,GAAS,eAAC8O,EAAA,EAAD,CAAKC,EAAG,EAAR,SAAYP,QAKhCQ,GAAYC,aAAW,SAACC,GAAD,OAC3BC,YAAa,CACXC,YAAa,CACXC,OAAQH,EAAMI,QAAQ,GACtBC,SAAU,KAEZC,YAAa,CACXC,UAAWP,EAAMI,QAAQ,SAgFhBI,OA3Ef,WACE,MAAwCvC,oBAAS,GAAjD,mBAAOwC,EAAP,KAAqBC,EAArB,KACA,EAAkCzC,oBAAS,GAA3C,mBAAOtC,EAAP,KAAkBgF,EAAlB,KACA,EAAwC1C,mBAAS,GAAjD,mBAAO2C,EAAP,KAAqBC,EAArB,KACA,EAA0C5C,mBAAS,GAAnD,mBAAO6C,EAAP,KAAsBC,EAAtB,KAEMC,EAAUlB,KAUVmB,EAAc,WAClBN,GAAchF,IAYhB,OACE,iCACE,eAACuF,EAAA,EAAD,CACE7D,QAAQ,YACR8D,KAAMV,EACNW,OAAO,QACPC,QA3BoB,WACxBX,GAAgB,IA2BZ7G,MAAO,CAAEwG,SAAU,SALrB,SAOE,eAACxB,EAAA,EAAD,CAAYxB,QAAQ,KAApB,sBAEF,gBAACuC,EAAA,EAAD,CAAK0B,GAAI,EAAGC,GAAI,EAAhB,UACE,gBAACC,EAAA,EAAD,CAAaxE,UAAWgE,EAAQd,YAAhC,UACE,eAACuB,EAAA,EAAD,sBACA,eAACC,EAAA,EAAD,CAAQ1U,MAAM,UAAUuS,MAAOqB,EAAce,SAvBzB,SAACC,GAC3Bf,EAAgBe,EAAMC,OAAOtC,OAC7BwB,EAAiB,IAqBX,SACGxH,GAAS/I,KAAI,SAACsR,EAAShR,GAAV,OACZ,eAACiR,EAAA,EAAD,CAAUxC,MAAOzO,EAAjB,SAAyBgR,EAAQxS,eAIvC,gBAACkS,EAAA,EAAD,CAAaxE,UAAWgE,EAAQd,YAAhC,UACE,eAACuB,EAAA,EAAD,uBACA,eAACC,EAAA,EAAD,CAAQ1U,MAAM,WAAWuS,MAAOuB,EAAea,SA1B1B,SAACC,GAC5Bb,EAAiBa,EAAMC,OAAOtC,QAyBxB,SACGhG,GAASqH,GAAchO,UAAUpC,KAAI,SAACwR,EAAUlR,GAAX,OACpC,eAACiR,EAAA,EAAD,CAAUxC,MAAOzO,EAAjB,SAAyBkR,EAAS1S,kBAKzCiK,GAAS/I,KAAI,SAACsR,EAAShR,GAAV,OACZ,qCACE,eAAC,GAAD,CAAUA,MAAOA,EAAOyO,MAAOqB,EAA/B,SACGrH,GAASzI,GAAO8B,UAAUpC,KAAI,SAACwR,EAAUlR,GAAX,OAC7B,eAAC,GAAD,CAAUA,MAAOA,EAAOyO,MAAOuB,EAA/B,SACGkB,EAASnP,WAAWrC,KAAI,SAACuN,GAAD,OACvB,eAACD,GAAD,CAAWC,UAAWA,EAAWC,cAAeiD,EAAatF,UAAWA,uBC/oB3EsG,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,O,6CCIRlC,GAAQ0C,aAAY,CACxBC,QAAS,CACPC,QAAS,CACPC,KAAM,mBACNC,aAAc,oBAEhBC,UAAW,CACTF,KAAM,eACNC,aAAc,uBAKpBE,IAASC,OACP,eAAC,IAAMC,WAAP,UACE,eAACC,GAAA,EAAD,CAAenD,MAAOA,GAAtB,SACE,eAAC,GAAD,QAGJoD,SAASC,eAAe,SAM1BpB,O","file":"static/js/main.cff4f95f.chunk.js","sourcesContent":["export interface Rule {\r\n  label: string\r\n  amount?: number\r\n}\r\nexport interface Rules {\r\n  [x: string]: Rule\r\n}\r\n\r\nexport const specialRules = {\r\n  STORM_SHIELD: {\r\n    label: 'Storm Shield',\r\n  },\r\n  NO_COVER: {\r\n    label: 'No Cover',\r\n  },\r\n  AP1: {\r\n    label: 'AP1',\r\n  },\r\n  AP2: {\r\n    label: 'AP2',\r\n  },\r\n  RELENTLESS: {\r\n    label: 'Relentless',\r\n  },\r\n  CEASELESS: {\r\n    label: 'Ceaseless',\r\n  },\r\n  HEAVY: {\r\n    label: 'Heavy',\r\n  },\r\n  BLAST1: {\r\n    label: 'Blast 1\"',\r\n  },\r\n  BLAST2: {\r\n    label: 'Blast 2\"',\r\n  },\r\n  TORRENT: {\r\n    label: 'Torrent',\r\n  },\r\n  FUSILLADE: {\r\n    label: 'Fusillade',\r\n  },\r\n  RNG3: {\r\n    label: 'Rng 3\"',\r\n  },\r\n  RNG6: {\r\n    label: 'Rng 6\"',\r\n  },\r\n  GRAV: {\r\n    label: 'Grav',\r\n  },\r\n  LETHAL4: {\r\n    label: 'Lethal 4+',\r\n  },\r\n  LETHAL5: {\r\n    label: 'Lethal 5+',\r\n  },\r\n  COMBI: {\r\n    label: 'Combi',\r\n  },\r\n  LIMITED: {\r\n    label: 'Limited',\r\n  },\r\n  BRUTAL: {\r\n    label: 'Brutal',\r\n  },\r\n  HOT: {\r\n    label: 'Hot',\r\n  },\r\n  UNWIELDY: {\r\n    label: 'Unwieldy',\r\n  },\r\n  BALANCED: {\r\n    label: 'Balanced',\r\n  },\r\n}\r\n\r\nexport const criticalRules = {\r\n  RENDING: {\r\n    label: 'Rending',\r\n  },\r\n  P1: {\r\n    label: 'P1',\r\n  },\r\n  MW2: {\r\n    label: 'MW2',\r\n  },\r\n  MW3: {\r\n    label: 'MW3',\r\n  },\r\n  MW4: {\r\n    label: 'MW4',\r\n  },\r\n  STUN: {\r\n    label: 'Stun',\r\n  },\r\n}\r\n","import { Rule, specialRules } from '../rules'\r\n\r\nexport interface Equipment {\r\n  label: string\r\n  damageAdjustment?: number\r\n  criticalDamageAdjustment?: number\r\n  additionalSpecialRules?: Rule[]\r\n  additionalCriticalRules?: Rule[]\r\n}\r\n\r\nexport interface EquipmentCollection {\r\n  [x: string]: Equipment\r\n}\r\n\r\nexport const equipment: EquipmentCollection = {\r\n  STORM_SHIELD: {\r\n    label: 'Storm shield',\r\n  },\r\n  GRISLY_TROPHY: {\r\n    label: 'Grisly trophy',\r\n  },\r\n  DARK_BLESSING: {\r\n    label: 'Dark blessing',\r\n  },\r\n  BELT_FEED: {\r\n    label: 'Belt feed',\r\n    additionalSpecialRules: [specialRules.CEASELESS],\r\n  },\r\n  MALEFIC_ROUNDS: {\r\n    label: 'Malefic rounds',\r\n  },\r\n  ENRICHED_ROUNDS: {\r\n    label: 'Enriched rounds',\r\n    damageAdjustment: 1,\r\n  },\r\n}\r\n","import { specialRules, criticalRules } from '../../rules'\r\nimport { Weapon } from '../weapons'\r\n\r\nexport const nonHeavyRangedWeapons: Weapon[] = [\r\n  {\r\n    name: 'Autogun',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 2,\r\n    damageCritical: 3,\r\n    specialRules: [],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Shotgun',\r\n    profile: '',\r\n    attackDice: 4,\r\n    weaponBallisticSkillAdjustment: -1,\r\n    damage: 3,\r\n    damageCritical: 3,\r\n    specialRules: [specialRules.RNG6],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Deathwatch boltgun',\r\n    profile: 'Dragonfire',\r\n    attackDice: 4,\r\n    damage: 3,\r\n    damageCritical: 4,\r\n    specialRules: [specialRules.NO_COVER],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Deathwatch boltgun',\r\n    profile: 'Hellfire',\r\n    attackDice: 4,\r\n    damage: 3,\r\n    damageCritical: 4,\r\n    specialRules: [],\r\n    criticalRules: [criticalRules.RENDING],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Deathwatch boltgun',\r\n    profile: 'Kraken',\r\n    attackDice: 4,\r\n    damage: 3,\r\n    damageCritical: 4,\r\n    specialRules: [],\r\n    criticalRules: [criticalRules.P1],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Deathwatch boltgun',\r\n    profile: 'Vengeance',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 4,\r\n    specialRules: [],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Deathwatch shotgun',\r\n    profile: 'Cryptclearer',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 4,\r\n    specialRules: [],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Deathwatch shotgun',\r\n    profile: 'Wyrmsbreath',\r\n    attackDice: 5,\r\n    weaponBallisticSkillAdjustment: -1,\r\n    damage: 2,\r\n    damageCritical: 2,\r\n    specialRules: [specialRules.RNG3, specialRules.TORRENT],\r\n    criticalRules: [criticalRules.P1],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Deathwatch shotgun',\r\n    profile: 'Xenopurge',\r\n    attackDice: 4,\r\n    weaponBallisticSkillAdjustment: -1,\r\n    damage: 3,\r\n    damageCritical: 5,\r\n    specialRules: [specialRules.RNG6],\r\n    criticalRules: [criticalRules.P1],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Storm bolter',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 3,\r\n    damageCritical: 4,\r\n    specialRules: [specialRules.RELENTLESS],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Bolt carbine',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 3,\r\n    damageCritical: 4,\r\n    specialRules: [],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Frag cannon',\r\n    profile: 'Frag',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 6,\r\n    specialRules: [specialRules.BLAST2],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Frag cannon',\r\n    profile: 'Shell',\r\n    attackDice: 4,\r\n    damage: 5,\r\n    damageCritical: 6,\r\n    specialRules: [specialRules.AP1],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Auto bolt rifle',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 3,\r\n    damageCritical: 4,\r\n    specialRules: [specialRules.CEASELESS],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Bolt rifle',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 3,\r\n    damageCritical: 4,\r\n    specialRules: [],\r\n    criticalRules: [criticalRules.P1],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Stalker bolt rifle',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 3,\r\n    damageCritical: 4,\r\n    specialRules: [specialRules.HEAVY, specialRules.AP1],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Boltgun',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 3,\r\n    damageCritical: 4,\r\n    specialRules: [],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Grenade launcher',\r\n    profile: 'Frag',\r\n    attackDice: 4,\r\n    damage: 2,\r\n    damageCritical: 4,\r\n    specialRules: [specialRules.BLAST2],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Grenade launcher',\r\n    profile: 'Krak',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 5,\r\n    specialRules: [specialRules.AP1],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Webber',\r\n    profile: '',\r\n    attackDice: 4,\r\n    weaponBallisticSkillAdjustment: -1,\r\n    damage: 2,\r\n    damageCritical: 2,\r\n    specialRules: [specialRules.RNG6, specialRules.LETHAL5],\r\n    criticalRules: [criticalRules.STUN],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Flamer',\r\n    profile: '',\r\n    attackDice: 5,\r\n    fixedWeaponBallisticSkill: 2,\r\n    damage: 2,\r\n    damageCritical: 2,\r\n    specialRules: [specialRules.RNG6, specialRules.TORRENT],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Grav-gun',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 5,\r\n    specialRules: [specialRules.AP1, specialRules.GRAV],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Meltagun',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 6,\r\n    damageCritical: 3,\r\n    specialRules: [specialRules.RNG6, specialRules.AP2],\r\n    criticalRules: [criticalRules.MW4],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Plasma gun',\r\n    profile: 'Standard',\r\n    attackDice: 4,\r\n    damage: 5,\r\n    damageCritical: 6,\r\n    specialRules: [specialRules.AP1],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Plasma gun',\r\n    profile: 'Supercharge',\r\n    attackDice: 4,\r\n    damage: 5,\r\n    damageCritical: 6,\r\n    specialRules: [specialRules.AP2, specialRules.HOT],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Combi-flamer',\r\n    profile: '',\r\n    attackDice: 5,\r\n    fixedWeaponBallisticSkill: 2,\r\n    damage: 2,\r\n    damageCritical: 2,\r\n    specialRules: [specialRules.COMBI, specialRules.RNG6, specialRules.TORRENT, specialRules.LIMITED],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Combi-grav',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 5,\r\n    specialRules: [specialRules.COMBI, specialRules.AP1, specialRules.GRAV, specialRules.LIMITED],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Combi-melta',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 6,\r\n    damageCritical: 3,\r\n    specialRules: [specialRules.COMBI, specialRules.RNG6, specialRules.AP2, specialRules.LIMITED],\r\n    criticalRules: [criticalRules.MW4],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Combi-plasma',\r\n    profile: 'Standard',\r\n    attackDice: 4,\r\n    damage: 5,\r\n    damageCritical: 6,\r\n    specialRules: [specialRules.COMBI, specialRules.AP1, specialRules.LIMITED],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Combi-plasma',\r\n    profile: 'Supercharge',\r\n    attackDice: 4,\r\n    damage: 5,\r\n    damageCritical: 6,\r\n    specialRules: [specialRules.COMBI, specialRules.AP2, specialRules.LIMITED, specialRules.HOT],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Hand flamer',\r\n    profile: '',\r\n    attackDice: 4,\r\n    fixedWeaponBallisticSkill: 2,\r\n    damage: 2,\r\n    damageCritical: 2,\r\n    specialRules: [specialRules.RNG6, specialRules.TORRENT],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Plasma caliver',\r\n    profile: 'Standard',\r\n    attackDice: 4,\r\n    damage: 5,\r\n    damageCritical: 6,\r\n    specialRules: [specialRules.AP1],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Plasma caliver',\r\n    profile: 'Supercharge',\r\n    attackDice: 4,\r\n    damage: 5,\r\n    damageCritical: 6,\r\n    specialRules: [specialRules.AP2, specialRules.HOT],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Arc rifle',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 5,\r\n    specialRules: [specialRules.AP1],\r\n    criticalRules: [criticalRules.STUN],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Radium carbine',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 2,\r\n    damageCritical: 4,\r\n    specialRules: [],\r\n    criticalRules: [criticalRules.RENDING],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Flechette blaster',\r\n    profile: '',\r\n    attackDice: 5,\r\n    damage: 2,\r\n    damageCritical: 3,\r\n    specialRules: [specialRules.RELENTLESS, specialRules.FUSILLADE, specialRules.RNG6],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Stubcarbine',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 3,\r\n    damageCritical: 4,\r\n    specialRules: [specialRules.CEASELESS],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Lash whip',\r\n    profile: '',\r\n    attackDice: 4,\r\n    weaponBallisticSkillAdjustment: -1,\r\n    damage: 3,\r\n    damageCritical: 4,\r\n    specialRules: [specialRules.RNG3],\r\n    criticalRules: [criticalRules.STUN],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Guardian spear',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 3,\r\n    damageCritical: 5,\r\n    specialRules: [],\r\n    criticalRules: [criticalRules.P1],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Sentinel blade',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 3,\r\n    damageCritical: 4,\r\n    specialRules: [specialRules.RNG6],\r\n    criticalRules: [criticalRules.P1],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n]\r\n","import { specialRules, criticalRules } from '../../rules'\r\nimport { Weapon } from '../weapons'\r\n\r\nexport const heavyRangedWeapons: Weapon[] = [\r\n  {\r\n    name: 'Stalker pattern boltgun',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 3,\r\n    damageCritical: 4,\r\n    specialRules: [specialRules.HEAVY, specialRules.AP1],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Heavy bolter',\r\n    profile: '',\r\n    attackDice: 5,\r\n    damage: 4,\r\n    damageCritical: 5,\r\n    specialRules: [specialRules.HEAVY, specialRules.FUSILLADE],\r\n    criticalRules: [criticalRules.P1],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Infernus heavy bolter',\r\n    profile: 'Heavy Bolter',\r\n    attackDice: 5,\r\n    damage: 4,\r\n    damageCritical: 5,\r\n    specialRules: [specialRules.HEAVY, specialRules.FUSILLADE],\r\n    criticalRules: [criticalRules.P1],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Infernus heavy bolter',\r\n    profile: 'Heavy Flamer',\r\n    attackDice: 6,\r\n    fixedWeaponBallisticSkill: 2,\r\n    damage: 2,\r\n    damageCritical: 2,\r\n    specialRules: [specialRules.HEAVY, specialRules.RNG6, specialRules.TORRENT],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Missile launcher',\r\n    profile: 'Frag',\r\n    attackDice: 4,\r\n    damage: 3,\r\n    damageCritical: 5,\r\n    specialRules: [specialRules.HEAVY, specialRules.BLAST2],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Missile launcher',\r\n    profile: 'Krak',\r\n    attackDice: 4,\r\n    damage: 5,\r\n    damageCritical: 7,\r\n    specialRules: [specialRules.HEAVY, specialRules.AP1],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Heavy stubber',\r\n    profile: '',\r\n    attackDice: 5,\r\n    damage: 3,\r\n    damageCritical: 4,\r\n    specialRules: [specialRules.HEAVY, specialRules.CEASELESS, specialRules.FUSILLADE],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Mining laser',\r\n    profile: '',\r\n    attackDice: 5,\r\n    damage: 5,\r\n    damageCritical: 6,\r\n    specialRules: [specialRules.HEAVY, specialRules.AP1],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Seismic cannon',\r\n    profile: 'Long-wave',\r\n    attackDice: 6,\r\n    damage: 2,\r\n    damageCritical: 2,\r\n    specialRules: [specialRules.HEAVY, specialRules.BLAST2],\r\n    criticalRules: [criticalRules.STUN],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Seismic cannon',\r\n    profile: 'Short-wave',\r\n    attackDice: 4,\r\n    weaponBallisticSkillAdjustment: -1,\r\n    damage: 4,\r\n    damageCritical: 4,\r\n    specialRules: [specialRules.HEAVY, specialRules.RNG6],\r\n    criticalRules: [criticalRules.STUN, criticalRules.P1],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Galvanic rifle',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 3,\r\n    damageCritical: 4,\r\n    specialRules: [specialRules.HEAVY],\r\n    criticalRules: [criticalRules.P1],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Transuranic arquebus',\r\n    profile: '',\r\n    attackDice: 4,\r\n    weaponBallisticSkillAdjustment: -1,\r\n    damage: 5,\r\n    damageCritical: 3,\r\n    specialRules: [specialRules.AP1, specialRules.HEAVY, specialRules.UNWIELDY],\r\n    criticalRules: [criticalRules.MW3],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n]\r\n","import { specialRules, criticalRules } from '../../rules'\r\nimport { Weapon } from '../weapons'\r\nimport { equipment } from '../equipment'\r\n\r\nexport const meleeWeapons: Weapon[] = [\r\n  {\r\n    name: 'Storm shield',\r\n    profile: '',\r\n    attackDice: 0,\r\n    damage: 0,\r\n    damageCritical: 0,\r\n    specialRules: [],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Xenophase blade',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 6,\r\n    specialRules: [specialRules.BRUTAL, specialRules.LETHAL5],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Combat knife',\r\n    profile: '',\r\n    attackDice: 5,\r\n    damage: 3,\r\n    damageCritical: 4,\r\n    specialRules: [],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Fists',\r\n    profile: '',\r\n    attackDice: 3,\r\n    damage: 3,\r\n    damageCritical: 4,\r\n    specialRules: [],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Gun butt',\r\n    profile: '',\r\n    attackDice: 3,\r\n    damage: 2,\r\n    damageCritical: 3,\r\n    specialRules: [],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Arc maul',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 5,\r\n    specialRules: [],\r\n    criticalRules: [criticalRules.STUN],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Taser goad',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 3,\r\n    damageCritical: 4,\r\n    specialRules: [specialRules.LETHAL5],\r\n    criticalRules: [criticalRules.STUN],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Chainsword',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 5,\r\n    specialRules: [],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Heavy thunder hammer',\r\n    profile: '',\r\n    attackDice: 4,\r\n    weaponBallisticSkillAdjustment: 1,\r\n    damage: 6,\r\n    damageCritical: 8,\r\n    specialRules: [],\r\n    criticalRules: [criticalRules.STUN],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Lightning claw',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 5,\r\n    specialRules: [specialRules.LETHAL5],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Lightning claws',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 6,\r\n    damageCritical: 8,\r\n    specialRules: [specialRules.LETHAL5, specialRules.RELENTLESS],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Power fist',\r\n    profile: '',\r\n    attackDice: 4,\r\n    weaponBallisticSkillAdjustment: 1,\r\n    damage: 5,\r\n    damageCritical: 7,\r\n    specialRules: [specialRules.BRUTAL],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Power maul',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 5,\r\n    specialRules: [],\r\n    criticalRules: [criticalRules.STUN],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Power pick',\r\n    profile: '',\r\n    attackDice: 5,\r\n    damage: 4,\r\n    damageCritical: 6,\r\n    specialRules: [],\r\n    criticalRules: [criticalRules.RENDING],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Power weapon',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 6,\r\n    specialRules: [specialRules.LETHAL5],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Thunder hammer',\r\n    profile: '',\r\n    attackDice: 4,\r\n    weaponBallisticSkillAdjustment: 1,\r\n    damage: 5,\r\n    damageCritical: 6,\r\n    specialRules: [],\r\n    criticalRules: [criticalRules.STUN],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Chordclaw and transonic razor',\r\n    profile: '',\r\n    attackDice: 5,\r\n    damage: 4,\r\n    damageCritical: 5,\r\n    specialRules: [specialRules.BALANCED],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Chordclaw and transonic blades',\r\n    profile: '',\r\n    attackDice: 5,\r\n    damage: 4,\r\n    damageCritical: 6,\r\n    specialRules: [specialRules.BALANCED],\r\n    criticalRules: [criticalRules.RENDING],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Transonic blades',\r\n    profile: '',\r\n    attackDice: 5,\r\n    damage: 4,\r\n    damageCritical: 6,\r\n    specialRules: [],\r\n    criticalRules: [criticalRules.RENDING],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Cult knife and claw',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 5,\r\n    specialRules: [specialRules.BALANCED],\r\n    criticalRules: [criticalRules.RENDING],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Cult bonesword and claw',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 6,\r\n    specialRules: [specialRules.BALANCED, specialRules.LETHAL5],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Heavy rock cutter',\r\n    profile: '',\r\n    attackDice: 4,\r\n    weaponBallisticSkillAdjustment: 1,\r\n    damage: 5,\r\n    damageCritical: 7,\r\n    specialRules: [specialRules.LETHAL5],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Heavy rock cutter',\r\n    profile: 'Mining tool rig (eq.)',\r\n    attackDice: 4,\r\n    weaponBallisticSkillAdjustment: 1,\r\n    damage: 5,\r\n    damageCritical: 7,\r\n    specialRules: [specialRules.LETHAL5, specialRules.RELENTLESS],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Heavy rock drill',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 7,\r\n    specialRules: [specialRules.BRUTAL],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Heavy rock drill',\r\n    profile: 'Mining tool rig (eq.)',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 7,\r\n    specialRules: [specialRules.BRUTAL, specialRules.RELENTLESS],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Heavy rock saw',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 5,\r\n    damageCritical: 6,\r\n    specialRules: [],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Heavy rock saw',\r\n    profile: 'Mining tool rig (eq.)',\r\n    attackDice: 4,\r\n    damage: 5,\r\n    damageCritical: 6,\r\n    specialRules: [specialRules.RELENTLESS],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Cult bonesword and metamorph mutations',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 6,\r\n    specialRules: [specialRules.BALANCED, specialRules.LETHAL5],\r\n    criticalRules: [criticalRules.RENDING],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Metamorph mutations',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 6,\r\n    specialRules: [specialRules.BALANCED, specialRules.BRUTAL],\r\n    criticalRules: [criticalRules.RENDING],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Guardian spear',\r\n    profile: '',\r\n    attackDice: 5,\r\n    damage: 5,\r\n    damageCritical: 7,\r\n    specialRules: [specialRules.LETHAL5],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Sentinel blade',\r\n    profile: '+ Storm shield',\r\n    attackDice: 5,\r\n    damage: 4,\r\n    damageCritical: 6,\r\n    specialRules: [specialRules.LETHAL5],\r\n    criticalRules: [],\r\n    equipment: [equipment.STORM_SHIELD],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Executioner greatblade',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 6,\r\n    specialRules: [specialRules.LETHAL5],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n  {\r\n    name: 'Brutal assault weapon',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 2,\r\n    damageCritical: 3,\r\n    specialRules: [],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'MELEE',\r\n  },\r\n]\r\n","import { specialRules, criticalRules } from '../../rules'\r\nimport { Weapon } from '../weapons'\r\n\r\nexport const pistols: Weapon[] = [\r\n  {\r\n    name: 'Bolt pistol',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 3,\r\n    damageCritical: 4,\r\n    specialRules: [specialRules.RNG6],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Special issue bolt pistol',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 3,\r\n    damageCritical: 4,\r\n    specialRules: [specialRules.RNG6, specialRules.AP1],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Grav-pistol',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 5,\r\n    specialRules: [specialRules.RNG6, specialRules.AP1, specialRules.GRAV],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Inferno pistol',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 5,\r\n    damageCritical: 3,\r\n    specialRules: [specialRules.RNG3, specialRules.AP2],\r\n    criticalRules: [criticalRules.MW3],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Plasma pistol',\r\n    profile: 'Standard',\r\n    attackDice: 4,\r\n    damage: 5,\r\n    damageCritical: 6,\r\n    specialRules: [specialRules.RNG6, specialRules.AP1],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Plasma pistol',\r\n    profile: 'Supercharge',\r\n    attackDice: 4,\r\n    damage: 5,\r\n    damageCritical: 6,\r\n    specialRules: [specialRules.RNG6, specialRules.AP2, specialRules.HOT],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Arc pistol',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 5,\r\n    specialRules: [specialRules.RNG6, specialRules.AP1],\r\n    criticalRules: [criticalRules.STUN],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Phosphor blast pistol',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 4,\r\n    damageCritical: 5,\r\n    specialRules: [specialRules.RNG6, specialRules.BLAST1, specialRules.NO_COVER],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Radium pistol',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 2,\r\n    damageCritical: 3,\r\n    specialRules: [specialRules.RNG6],\r\n    criticalRules: [criticalRules.RENDING],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Master-crafted radium pistol',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 2,\r\n    damageCritical: 4,\r\n    specialRules: [specialRules.RNG6, specialRules.BALANCED],\r\n    criticalRules: [criticalRules.RENDING],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Autopistol',\r\n    profile: '',\r\n    attackDice: 4,\r\n    damage: 2,\r\n    damageCritical: 3,\r\n    specialRules: [specialRules.RNG6],\r\n    criticalRules: [],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n  {\r\n    name: 'Web pistol',\r\n    profile: '',\r\n    attackDice: 4,\r\n    weaponBallisticSkillAdjustment: -1,\r\n    damage: 2,\r\n    damageCritical: 2,\r\n    specialRules: [specialRules.RNG6],\r\n    criticalRules: [criticalRules.STUN],\r\n    equipment: [],\r\n    type: 'RANGED',\r\n  },\r\n]\r\n","import { Rule } from '../rules'\r\nimport { nonHeavyRangedWeapons } from './weapons/nonHeavyRangedWeapons'\r\nimport { heavyRangedWeapons } from './weapons/heavyRangedWeapons'\r\nimport { meleeWeapons } from './weapons/meleeWeapons'\r\nimport { pistols } from './weapons/pistols'\r\n\r\nexport type WeaponName =\r\n  | 'Storm shield'\r\n  | 'Xenophase blade'\r\n  | 'Combat knife'\r\n  | 'Fists'\r\n  | 'Gun butt'\r\n  | 'Arc maul'\r\n  | 'Taser goad'\r\n  | 'Chainsword'\r\n  | 'Heavy thunder hammer'\r\n  | 'Lightning claw'\r\n  | 'Lightning claws'\r\n  | 'Power fist'\r\n  | 'Power maul'\r\n  | 'Power pick'\r\n  | 'Power weapon'\r\n  | 'Thunder hammer'\r\n  | 'Chordclaw and transonic razor'\r\n  | 'Chordclaw and transonic blades'\r\n  | 'Transonic blades'\r\n  | 'Cult knife and claw'\r\n  | 'Cult bonesword and claw'\r\n  | 'Heavy rock cutter'\r\n  | 'Heavy rock drill'\r\n  | 'Heavy rock saw'\r\n  | 'Cult bonesword and metamorph mutations'\r\n  | 'Metamorph mutations'\r\n  | 'Executioner greatblade'\r\n  | 'Brutal assault weapon'\r\n  | 'Autogun'\r\n  | 'Shotgun'\r\n  | 'Deathwatch boltgun'\r\n  | 'Deathwatch shotgun'\r\n  | 'Storm bolter'\r\n  | 'Bolt carbine'\r\n  | 'Frag cannon'\r\n  | 'Auto bolt rifle'\r\n  | 'Bolt rifle'\r\n  | 'Stalker bolt rifle'\r\n  | 'Boltgun'\r\n  | 'Grenade launcher'\r\n  | 'Webber'\r\n  | 'Flamer'\r\n  | 'Grav-gun'\r\n  | 'Meltagun'\r\n  | 'Plasma gun'\r\n  | 'Combi-flamer'\r\n  | 'Combi-grav'\r\n  | 'Combi-melta'\r\n  | 'Combi-plasma'\r\n  | 'Hand flamer'\r\n  | 'Plasma caliver'\r\n  | 'Arc rifle'\r\n  | 'Radium carbine'\r\n  | 'Flechette blaster'\r\n  | 'Stubcarbine'\r\n  | 'Lash whip'\r\n  | 'Guardian spear'\r\n  | 'Sentinel blade'\r\n  | 'Stalker pattern boltgun'\r\n  | 'Heavy bolter'\r\n  | 'Infernus heavy bolter'\r\n  | 'Missile launcher'\r\n  | 'Heavy stubber'\r\n  | 'Mining laser'\r\n  | 'Seismic cannon'\r\n  | 'Galvanic rifle'\r\n  | 'Transuranic arquebus'\r\n  | 'Bolt pistol'\r\n  | 'Special issue bolt pistol'\r\n  | 'Grav-pistol'\r\n  | 'Inferno pistol'\r\n  | 'Plasma pistol'\r\n  | 'Arc pistol'\r\n  | 'Phosphor blast pistol'\r\n  | 'Radium pistol'\r\n  | 'Master-crafted radium pistol'\r\n  | 'Autopistol'\r\n  | 'Web pistol'\r\n\r\nexport interface Weapon {\r\n  name: WeaponName\r\n  profile: string\r\n  attackDice: number\r\n  weaponBallisticSkillAdjustment?: number\r\n  fixedWeaponBallisticSkill?: number\r\n  damage: number\r\n  damageCritical: number\r\n  specialRules: Rule[]\r\n  criticalRules: Rule[]\r\n  equipment: Rule[]\r\n  type: 'RANGED' | 'MELEE'\r\n}\r\n\r\nexport const weapons: Weapon[] = [...meleeWeapons, ...nonHeavyRangedWeapons, ...heavyRangedWeapons, ...pistols]\r\n","import { criticalRules, Rule, specialRules } from './rules'\r\nimport { equipment, Equipment } from './stats/equipment'\r\nimport { Weapon, WeaponName, weapons } from './stats/weapons'\r\n\r\ninterface Options {\r\n  weaponBallisticSkillAdjustment?: number\r\n  attackDiceAdjustment?: number\r\n  equipmentProfiles?: string[]\r\n}\r\n\r\nexport type WeaponOptions = WeaponOption[]\r\nexport type WeaponOption = WeaponName[][]\r\n\r\nexport interface DataSheet {\r\n  name: string\r\n  movement: number\r\n  apl: number\r\n  groupActivation: number\r\n  defense: number\r\n  save: number\r\n  saveCritical: number\r\n  wounds: number\r\n  weaponSkill: number\r\n  ballisticSkill: number\r\n  weapons: Weapon[]\r\n  defensiveMeleeWeapon?: Weapon\r\n  abilities?: Rule[]\r\n  weaponOptions?: WeaponOptions\r\n  selectedWeapons?: WeaponName[]\r\n  defaultWeapons?: WeaponName[]\r\n}\r\n\r\nexport interface DataSheetDefender extends DataSheet {\r\n  defensiveMeleeWeapon: Weapon\r\n}\r\n\r\nexport function getWeaponProfiles(name: WeaponName, options?: Options): Weapon[] {\r\n  const modifiedSkill = options?.weaponBallisticSkillAdjustment\r\n  const attackDiceAdjustment = options?.attackDiceAdjustment\r\n\r\n  return weapons\r\n    .filter((weapon) => weapon.name === name)\r\n    .map((profile) => ({\r\n      ...profile,\r\n      weaponBallisticSkillAdjustment: modifiedSkill ? modifiedSkill : profile.weaponBallisticSkillAdjustment,\r\n      attackDice: attackDiceAdjustment ? profile.attackDice + attackDiceAdjustment : profile.attackDice,\r\n    }))\r\n}\r\n\r\nexport function generateEquipmentVariantProfile(weapon: Weapon, newEquipment: Equipment): Weapon {\r\n  const additionalSpecialRules = newEquipment.additionalSpecialRules || []\r\n  const additionalCriticalRules = newEquipment.additionalCriticalRules || []\r\n  const newCriticalRules = [...weapon.criticalRules]\r\n\r\n  // MALEFIC ROUNDS\r\n  if (newEquipment === equipment.MALEFIC_ROUNDS) {\r\n    if (weapon.criticalRules.includes(criticalRules.P1)) {\r\n      const index = newCriticalRules.indexOf(criticalRules.P1)\r\n      newCriticalRules.splice(index, 1)\r\n      additionalSpecialRules.push(specialRules.AP1)\r\n    } else {\r\n      additionalCriticalRules.push(criticalRules.P1)\r\n    }\r\n  }\r\n\r\n  const newWeapon = { ...weapon }\r\n\r\n  // ENRICHED ROUNDS\r\n  if (newEquipment === equipment.ENRICHED_ROUNDS) {\r\n    newWeapon.damage += 1\r\n  }\r\n\r\n  return {\r\n    ...newWeapon,\r\n    profile: `+ ${newEquipment.label}`,\r\n    equipment: [...weapon.equipment, newEquipment],\r\n    specialRules: [...weapon.specialRules, ...additionalSpecialRules],\r\n    criticalRules: [...newCriticalRules, ...additionalCriticalRules],\r\n  }\r\n}\r\n\r\nexport function generateEquipmentVariantProfiles(profiles: Weapon[], equipment: Equipment[]) {\r\n  return profiles.reduce<Weapon[]>((acc, profile) => {\r\n    const equippedProfiles = equipment.reduce<Weapon[]>((acc, eq) => {\r\n      const newAcc = [...acc, generateEquipmentVariantProfile(profile, eq)]\r\n      return newAcc\r\n    }, [])\r\n    const newAcc = [...acc, profile, ...equippedProfiles]\r\n    return newAcc\r\n  }, [])\r\n}\r\n","import { generateEquipmentVariantProfiles, getWeaponProfiles, DataSheet } from '../../helpers'\r\nimport { equipment } from '../equipment'\r\n\r\nexport const deathwatchVeteranWarrior: DataSheet = {\r\n  name: 'DEATHWATCH VETERAN (WARRIOR)',\r\n  movement: 6,\r\n  apl: 3,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 3,\r\n  saveCritical: 6,\r\n  wounds: 11,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 3,\r\n  weapons: [\r\n    ...getWeaponProfiles('Deathwatch boltgun'),\r\n    ...getWeaponProfiles('Deathwatch shotgun'),\r\n    ...getWeaponProfiles('Stalker pattern boltgun'),\r\n    ...getWeaponProfiles('Storm bolter'),\r\n    ...getWeaponProfiles('Fists', { attackDiceAdjustment: 1 }),\r\n    ...getWeaponProfiles('Power weapon'),\r\n  ],\r\n  weaponOptions: [\r\n    [['Deathwatch boltgun'], ['Power weapon']],\r\n    [['Deathwatch shotgun', 'Stalker pattern boltgun', 'Storm bolter'], ['Fists']],\r\n  ],\r\n}\r\nexport const deathwatchVeteranFighter: DataSheet = {\r\n  name: 'DEATHWATCH VETERAN (FIGHTER)',\r\n  movement: 6,\r\n  apl: 3,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 3,\r\n  saveCritical: 6,\r\n  wounds: 11,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 3,\r\n  weapons: [\r\n    ...getWeaponProfiles('Bolt pistol'),\r\n    ...getWeaponProfiles('Grav-pistol'),\r\n    ...getWeaponProfiles('Hand flamer'),\r\n    ...getWeaponProfiles('Inferno pistol'),\r\n    ...getWeaponProfiles('Plasma pistol'),\r\n    ...getWeaponProfiles('Heavy thunder hammer', { attackDiceAdjustment: 1 }),\r\n    ...getWeaponProfiles('Lightning claws', { attackDiceAdjustment: 1 }),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Chainsword', { attackDiceAdjustment: 1 }), [\r\n      equipment.STORM_SHIELD,\r\n    ]),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Lightning claw', { attackDiceAdjustment: 1 }), [\r\n      equipment.STORM_SHIELD,\r\n    ]),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Power fist', { attackDiceAdjustment: 1 }), [\r\n      equipment.STORM_SHIELD,\r\n    ]),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Power maul', { attackDiceAdjustment: 1 }), [\r\n      equipment.STORM_SHIELD,\r\n    ]),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Power weapon', { attackDiceAdjustment: 1 }), [\r\n      equipment.STORM_SHIELD,\r\n    ]),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Thunder hammer', { attackDiceAdjustment: 1 }), [\r\n      equipment.STORM_SHIELD,\r\n    ]),\r\n    ...getWeaponProfiles('Storm shield'),\r\n  ],\r\n  weaponOptions: [\r\n    [['Heavy thunder hammer']],\r\n    [['Lightning claws']],\r\n    [\r\n      ['Bolt pistol', 'Grav-pistol', 'Hand flamer', 'Inferno pistol', 'Plasma pistol', 'Storm shield'],\r\n      ['Chainsword', 'Lightning claw', 'Power fist', 'Power maul', 'Power weapon', 'Thunder hammer'],\r\n    ],\r\n  ],\r\n}\r\nexport const deathwatchVeteranGunner: DataSheet = {\r\n  name: 'DEATHWATCH VETERAN (GUNNER)',\r\n  movement: 6,\r\n  apl: 3,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 3,\r\n  saveCritical: 6,\r\n  wounds: 11,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 3,\r\n  weapons: [\r\n    ...getWeaponProfiles('Combi-flamer'),\r\n    ...getWeaponProfiles('Combi-grav'),\r\n    ...getWeaponProfiles('Combi-melta'),\r\n    ...getWeaponProfiles('Combi-plasma'),\r\n    ...getWeaponProfiles('Deathwatch boltgun'),\r\n    ...getWeaponProfiles('Flamer'),\r\n    ...getWeaponProfiles('Grav-gun'),\r\n    ...getWeaponProfiles('Meltagun'),\r\n    ...getWeaponProfiles('Plasma gun'),\r\n    ...getWeaponProfiles('Fists'),\r\n  ],\r\n  defaultWeapons: ['Fists'],\r\n  weaponOptions: [\r\n    [['Deathwatch boltgun'], ['Combi-flamer']],\r\n    [['Deathwatch boltgun'], ['Combi-melta']],\r\n    [['Deathwatch boltgun'], ['Combi-plasma']],\r\n    [['Deathwatch boltgun'], ['Combi-grav']],\r\n    [['Flamer', 'Meltagun', 'Grav-gun', 'Plasma gun']],\r\n  ],\r\n}\r\nexport const deathwatchVeteranHeavyGunner: DataSheet = {\r\n  name: 'DEATHWATCH VETERAN (HEAVY GUNNER)',\r\n  movement: 6,\r\n  apl: 3,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 3,\r\n  saveCritical: 6,\r\n  wounds: 11,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 3,\r\n  weapons: [\r\n    ...getWeaponProfiles('Frag cannon'),\r\n    ...getWeaponProfiles('Infernus heavy bolter'),\r\n    ...getWeaponProfiles('Missile launcher'),\r\n    ...getWeaponProfiles('Fists'),\r\n  ],\r\n  weaponOptions: [[['Fists'], ['Frag cannon', 'Infernus heavy bolter', 'Missile launcher']]],\r\n}\r\nexport const deathwatchVeteranWatchSergeant: DataSheet = {\r\n  name: 'DEATHWATCH VETERAN WATCH SERGEANT',\r\n  movement: 6,\r\n  apl: 3,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 3,\r\n  saveCritical: 6,\r\n  wounds: 12,\r\n  ballisticSkill: 2,\r\n  weaponSkill: 2,\r\n  weapons: [\r\n    ...getWeaponProfiles('Deathwatch boltgun'),\r\n    ...getWeaponProfiles('Deathwatch shotgun'),\r\n    ...getWeaponProfiles('Combi-flamer'),\r\n    ...getWeaponProfiles('Combi-grav'),\r\n    ...getWeaponProfiles('Combi-melta'),\r\n    ...getWeaponProfiles('Combi-plasma'),\r\n    ...getWeaponProfiles('Flamer'),\r\n    ...getWeaponProfiles('Grav-gun'),\r\n    ...getWeaponProfiles('Meltagun'),\r\n    ...getWeaponProfiles('Plasma gun'),\r\n    ...getWeaponProfiles('Stalker pattern boltgun'),\r\n    ...getWeaponProfiles('Storm bolter'),\r\n    ...getWeaponProfiles('Bolt pistol'),\r\n    ...getWeaponProfiles('Grav-pistol'),\r\n    ...getWeaponProfiles('Hand flamer'),\r\n    ...getWeaponProfiles('Inferno pistol'),\r\n    ...getWeaponProfiles('Plasma pistol'),\r\n    ...getWeaponProfiles('Fists', { attackDiceAdjustment: 1 }),\r\n    ...getWeaponProfiles('Heavy thunder hammer', { attackDiceAdjustment: 1 }),\r\n    ...getWeaponProfiles('Lightning claws', { attackDiceAdjustment: 1 }),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Chainsword', { attackDiceAdjustment: 1 }), [\r\n      equipment.STORM_SHIELD,\r\n    ]),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Lightning claw', { attackDiceAdjustment: 1 }), [\r\n      equipment.STORM_SHIELD,\r\n    ]),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Power fist', { attackDiceAdjustment: 1 }), [\r\n      equipment.STORM_SHIELD,\r\n    ]),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Power maul', { attackDiceAdjustment: 1 }), [\r\n      equipment.STORM_SHIELD,\r\n    ]),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Power weapon', { attackDiceAdjustment: 1 }), [\r\n      equipment.STORM_SHIELD,\r\n    ]),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Thunder hammer', { attackDiceAdjustment: 1 }), [\r\n      equipment.STORM_SHIELD,\r\n    ]),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Xenophase blade', { attackDiceAdjustment: 1 }), [\r\n      equipment.STORM_SHIELD,\r\n    ]),\r\n    ...getWeaponProfiles('Storm shield'),\r\n  ],\r\n  weaponOptions: [\r\n    [['Heavy thunder hammer']],\r\n    [['Lightning claws']],\r\n    [\r\n      ['Fists'],\r\n      [\r\n        'Deathwatch boltgun',\r\n        'Deathwatch shotgun',\r\n        'Stalker pattern boltgun',\r\n        'Storm bolter',\r\n        'Combi-flamer',\r\n        'Combi-melta',\r\n        'Combi-grav',\r\n        'Combi-plasma',\r\n        'Flamer',\r\n        'Meltagun',\r\n        'Grav-gun',\r\n        'Plasma gun',\r\n      ],\r\n    ],\r\n    [\r\n      ['Bolt pistol', 'Grav-pistol', 'Hand flamer', 'Inferno pistol', 'Plasma pistol', 'Storm shield'],\r\n      ['Chainsword', 'Lightning claw', 'Power fist', 'Power maul', 'Power weapon', 'Thunder hammer', 'Xenophase blade'],\r\n    ],\r\n  ],\r\n}\r\n\r\n/**\r\n * REIVERS\r\n */\r\n\r\nexport const reiverWarrior: DataSheet = {\r\n  name: 'REIVER (WARRIOR)',\r\n  movement: 6,\r\n  apl: 3,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 3,\r\n  saveCritical: 6,\r\n  wounds: 12,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 3,\r\n  weapons: [\r\n    ...getWeaponProfiles('Bolt carbine'),\r\n    ...getWeaponProfiles('Special issue bolt pistol'),\r\n    ...getWeaponProfiles('Combat knife'),\r\n    ...getWeaponProfiles('Fists', { attackDiceAdjustment: 1 }),\r\n  ],\r\n  defaultWeapons: ['Special issue bolt pistol'],\r\n  weaponOptions: [[['Bolt carbine'], ['Fists']], [['Combat knife']]],\r\n}\r\n\r\nexport const reiverSergeant: DataSheet = {\r\n  name: 'REIVER SERGEANT',\r\n  movement: 6,\r\n  apl: 3,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 3,\r\n  saveCritical: 6,\r\n  wounds: 13,\r\n  ballisticSkill: 2,\r\n  weaponSkill: 2,\r\n  weapons: [\r\n    ...getWeaponProfiles('Bolt carbine'),\r\n    ...getWeaponProfiles('Special issue bolt pistol'),\r\n    ...getWeaponProfiles('Combat knife'),\r\n    ...getWeaponProfiles('Fists', { attackDiceAdjustment: 1 }),\r\n  ],\r\n  defaultWeapons: ['Special issue bolt pistol'],\r\n  weaponOptions: [\r\n    [['Bolt carbine'], ['Combat knife']],\r\n    [['Bolt carbine'], ['Fists']],\r\n  ],\r\n}\r\n\r\n/**\r\n * INTERCESSORS\r\n */\r\nexport const intercessorWarrior: DataSheet = {\r\n  name: 'INTERCESSOR (WARRIOR)',\r\n  movement: 6,\r\n  apl: 3,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 3,\r\n  saveCritical: 6,\r\n  wounds: 13,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 3,\r\n  weapons: [\r\n    ...getWeaponProfiles('Auto bolt rifle'),\r\n    ...getWeaponProfiles('Bolt rifle'),\r\n    ...getWeaponProfiles('Stalker bolt rifle'),\r\n    ...getWeaponProfiles('Fists', { attackDiceAdjustment: 1 }),\r\n  ],\r\n  defaultWeapons: ['Fists'],\r\n  weaponOptions: [[['Auto bolt rifle', 'Stalker bolt rifle', 'Bolt rifle']]],\r\n}\r\n\r\nexport const intercessorSergeant: DataSheet = {\r\n  name: 'INTERCESSOR SERGEANT',\r\n  movement: 6,\r\n  apl: 3,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 3,\r\n  saveCritical: 6,\r\n  wounds: 14,\r\n  ballisticSkill: 2,\r\n  weaponSkill: 3,\r\n  weapons: [\r\n    ...getWeaponProfiles('Auto bolt rifle'),\r\n    ...getWeaponProfiles('Bolt pistol'),\r\n    ...getWeaponProfiles('Bolt rifle'),\r\n    ...getWeaponProfiles('Hand flamer'),\r\n    ...getWeaponProfiles('Plasma pistol'),\r\n    ...getWeaponProfiles('Stalker bolt rifle'),\r\n    ...getWeaponProfiles('Chainsword'),\r\n    ...getWeaponProfiles('Fists', { attackDiceAdjustment: 1 }),\r\n    ...getWeaponProfiles('Power fist'),\r\n    ...getWeaponProfiles('Power weapon'),\r\n    ...getWeaponProfiles('Thunder hammer'),\r\n  ],\r\n  weaponOptions: [\r\n    [\r\n      ['Auto bolt rifle', 'Stalker bolt rifle', 'Bolt rifle', 'Bolt pistol', 'Hand flamer', 'Plasma pistol'],\r\n      ['Chainsword', 'Fists', 'Power fist', 'Power weapon', 'Thunder hammer'],\r\n    ],\r\n  ],\r\n}\r\n\r\nexport const adeptusAstartesStats = {\r\n  name: 'Adeptus Astartes',\r\n  fireTeams: [\r\n    {\r\n      name: 'Intercessors',\r\n      dataSheets: [intercessorWarrior, intercessorSergeant],\r\n    },\r\n    {\r\n      name: 'Reivers',\r\n      dataSheets: [reiverWarrior, reiverSergeant],\r\n    },\r\n    {\r\n      name: 'Deathwatch Veterans',\r\n      dataSheets: [\r\n        deathwatchVeteranWarrior,\r\n        deathwatchVeteranFighter,\r\n        deathwatchVeteranGunner,\r\n        deathwatchVeteranHeavyGunner,\r\n        deathwatchVeteranWatchSergeant,\r\n      ],\r\n    },\r\n  ],\r\n}\r\n","import { generateEquipmentVariantProfiles, getWeaponProfiles, DataSheet } from '../../helpers'\r\nimport { equipment } from '../equipment'\r\n\r\nexport const chaosSmWarrior: DataSheet = {\r\n  name: 'CHAOS SPACE MARINE (WARRIOR)',\r\n  movement: 6,\r\n  apl: 3,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 3,\r\n  saveCritical: 6,\r\n  wounds: 12,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 3,\r\n  weapons: [\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Boltgun'), [equipment.BELT_FEED, equipment.MALEFIC_ROUNDS]),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Bolt pistol'), [\r\n      equipment.BELT_FEED,\r\n      equipment.MALEFIC_ROUNDS,\r\n    ]),\r\n    ...getWeaponProfiles('Fists', { attackDiceAdjustment: 1 }),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Chainsword'), [\r\n      equipment.GRISLY_TROPHY,\r\n      equipment.DARK_BLESSING,\r\n    ]),\r\n  ],\r\n  weaponOptions: [\r\n    [['Boltgun'], ['Fists']],\r\n    [['Bolt pistol'], ['Chainsword']],\r\n  ],\r\n}\r\nexport const chaosSmGunner: DataSheet = {\r\n  name: 'CHAOS SPACE MARINE (GUNNER)',\r\n  movement: 6,\r\n  apl: 3,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 3,\r\n  saveCritical: 6,\r\n  wounds: 12,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 3,\r\n  weapons: [\r\n    ...getWeaponProfiles('Flamer'),\r\n    ...getWeaponProfiles('Meltagun'),\r\n    ...getWeaponProfiles('Plasma gun'),\r\n    ...getWeaponProfiles('Fists'),\r\n  ],\r\n  defaultWeapons: ['Fists'],\r\n  weaponOptions: [[['Flamer', 'Meltagun', 'Plasma gun']]],\r\n}\r\nexport const chaosSmHeavyGunner: DataSheet = {\r\n  name: 'CHAOS SPACE MARINE (HEAVY GUNNER)',\r\n  movement: 6,\r\n  apl: 3,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 3,\r\n  saveCritical: 6,\r\n  wounds: 12,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 3,\r\n  weapons: [\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Heavy bolter'), [\r\n      equipment.BELT_FEED,\r\n      equipment.MALEFIC_ROUNDS,\r\n    ]),\r\n    ...getWeaponProfiles('Missile launcher'),\r\n    ...getWeaponProfiles('Fists'),\r\n  ],\r\n  defaultWeapons: ['Fists'],\r\n  weaponOptions: [[['Missile launcher', 'Heavy bolter']]],\r\n}\r\nexport const chaosSmIconBearer: DataSheet = {\r\n  name: 'CHAOS SPACE MARINE (ICON BEARER)',\r\n  movement: 6,\r\n  apl: 3,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 3,\r\n  saveCritical: 6,\r\n  wounds: 12,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 3,\r\n  weapons: [\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Boltgun'), [equipment.BELT_FEED, equipment.MALEFIC_ROUNDS]),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Bolt pistol'), [\r\n      equipment.BELT_FEED,\r\n      equipment.MALEFIC_ROUNDS,\r\n    ]),\r\n    ...getWeaponProfiles('Fists'),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Chainsword'), [\r\n      equipment.GRISLY_TROPHY,\r\n      equipment.DARK_BLESSING,\r\n    ]),\r\n  ],\r\n  weaponOptions: [\r\n    [['Boltgun'], ['Fists']],\r\n    [['Bolt pistol'], ['Chainsword']],\r\n  ],\r\n}\r\nexport const chaosSmAspiringChampion: DataSheet = {\r\n  name: 'CHAOS SPACE MARINE ASPIRING CHAMPION',\r\n  movement: 6,\r\n  apl: 3,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 3,\r\n  saveCritical: 6,\r\n  wounds: 13,\r\n  ballisticSkill: 2,\r\n  weaponSkill: 2,\r\n  weapons: [\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Boltgun'), [equipment.BELT_FEED, equipment.MALEFIC_ROUNDS]),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Bolt pistol'), [\r\n      equipment.BELT_FEED,\r\n      equipment.MALEFIC_ROUNDS,\r\n    ]),\r\n    ...getWeaponProfiles('Plasma pistol'),\r\n    ...getWeaponProfiles('Fists', { attackDiceAdjustment: 1 }),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Chainsword'), [\r\n      equipment.GRISLY_TROPHY,\r\n      equipment.DARK_BLESSING,\r\n    ]),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Power fist', { attackDiceAdjustment: 1 }), [\r\n      equipment.GRISLY_TROPHY,\r\n      equipment.DARK_BLESSING,\r\n    ]),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Power weapon', { attackDiceAdjustment: 1 }), [\r\n      equipment.GRISLY_TROPHY,\r\n      equipment.DARK_BLESSING,\r\n    ]),\r\n  ],\r\n  weaponOptions: [\r\n    [\r\n      ['Bolt pistol', 'Plasma pistol'],\r\n      ['Chainsword', 'Power fist', 'Power weapon'],\r\n    ],\r\n  ],\r\n}\r\n\r\nexport const chaosCultistFighter: DataSheet = {\r\n  name: 'CHAOS CULTIST (FIGHTER)',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 2,\r\n  defense: 3,\r\n  save: 5,\r\n  saveCritical: 6,\r\n  wounds: 7,\r\n  ballisticSkill: 4,\r\n  weaponSkill: 4,\r\n  weapons: [\r\n    ...getWeaponProfiles('Boltgun'),\r\n    ...getWeaponProfiles('Autogun'),\r\n    ...getWeaponProfiles('Brutal assault weapon'),\r\n    ...getWeaponProfiles('Gun butt'),\r\n  ],\r\n  weaponOptions: [\r\n    [['Autogun'], ['Gun butt']],\r\n    [['Autopistol'], ['Brutal assault weapon']],\r\n  ],\r\n}\r\n\r\nexport const chaosCultistGunner: DataSheet = {\r\n  name: 'CHAOS CULTIST (GUNNER)',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 5,\r\n  saveCritical: 6,\r\n  wounds: 7,\r\n  ballisticSkill: 4,\r\n  weaponSkill: 4,\r\n  weapons: [...getWeaponProfiles('Flamer'), ...getWeaponProfiles('Heavy stubber'), ...getWeaponProfiles('Gun butt')],\r\n  defaultWeapons: ['Gun butt'],\r\n  weaponOptions: [[['Flamer', 'Heavy stubber']]],\r\n}\r\n\r\nexport const chaosCultistChampion: DataSheet = {\r\n  name: 'CHAOS CULTIST CHAMPION',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 5,\r\n  saveCritical: 6,\r\n  wounds: 8,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 3,\r\n  weapons: [\r\n    ...getWeaponProfiles('Autogun'),\r\n    ...getWeaponProfiles('Autopistol'),\r\n    ...getWeaponProfiles('Shotgun'),\r\n    ...getWeaponProfiles('Brutal assault weapon'),\r\n    ...getWeaponProfiles('Gun butt'),\r\n  ],\r\n  weaponOptions: [\r\n    [['Autogun'], ['Gun butt']],\r\n    [['Autopistol'], ['Brutal assault weapon']],\r\n    [['Shotgun'], ['Brutal assault weapon']],\r\n  ],\r\n}\r\n\r\nexport const traitorSpaceMarineStats = {\r\n  name: 'Traitor Space Marines',\r\n  fireTeams: [\r\n    {\r\n      name: 'Chaos Space Marines',\r\n      dataSheets: [chaosSmWarrior, chaosSmGunner, chaosSmHeavyGunner, chaosSmIconBearer, chaosSmAspiringChampion],\r\n    },\r\n    {\r\n      name: 'Chaos Cultists',\r\n      dataSheets: [chaosCultistFighter, chaosCultistGunner, chaosCultistChampion],\r\n    },\r\n  ],\r\n}\r\n","export const abilities = {\r\n  THE_EMPERORS_CHOSEN: {\r\n    label: \"The Emperor's Chosen\",\r\n  },\r\n}\r\n","import { Weapon } from './stats/weapons'\r\nimport { specialRules, criticalRules } from './rules'\r\nimport { DataSheet } from './helpers'\r\nimport { equipment } from './stats/equipment'\r\nimport { abilities } from './stats/abilities'\r\n\r\nexport interface DamageMelee {\r\n  type: 'melee'\r\n  total: {\r\n    maxDamage: {\r\n      attackerDamage: number\r\n      attackerDead: boolean\r\n      defenderDamage: number\r\n      defenderDead: boolean\r\n    }\r\n    parryDefender: {\r\n      attackerDamage: number\r\n      attackerDead: boolean\r\n      defenderDamage: number\r\n      defenderDead: boolean\r\n    }\r\n    parryAttacker: {\r\n      attackerDamage: number\r\n      attackerDead: boolean\r\n      defenderDamage: number\r\n      defenderDead: boolean\r\n    }\r\n    parryBoth: {\r\n      attackerDamage: number\r\n      attackerDead: boolean\r\n      defenderDamage: number\r\n      defenderDead: boolean\r\n    }\r\n  }\r\n}\r\n\r\nexport interface DamageRanged {\r\n  type: 'ranged'\r\n  total: number\r\n  hit: number\r\n  crit: number\r\n  mw?: number\r\n}\r\n\r\ninterface ProfileWeaponPair {\r\n  profile: DataSheet\r\n  weapon: Weapon\r\n}\r\n\r\nexport interface AttackerDefenderPair {\r\n  attacker: ProfileWeaponPair\r\n  defender: ProfileWeaponPair\r\n}\r\n\r\nfunction oneDiceChanceOfSuccess(successFrom: number, critFrom: number = 6) {\r\n  const chanceOfSuccess = (7 - successFrom) * (1 / 6)\r\n  const chanceOfCrit = oneDiceChanceOfCrit(critFrom)\r\n  return chanceOfSuccess - chanceOfCrit\r\n}\r\n\r\nfunction oneDiceChanceOfMiss(successFrom: number) {\r\n  return (successFrom - 1) * (1 / 6)\r\n}\r\n\r\nfunction oneDiceChanceOfCrit(critFrom: number = 6) {\r\n  return (7 - critFrom) * (1 / 6)\r\n}\r\n\r\nexport function calculateDamage({ attacker, defender }: AttackerDefenderPair) {\r\n  if (attacker.weapon.type === 'MELEE') {\r\n    return calculateDamageMelee({ attacker, defender })\r\n  }\r\n\r\n  if (attacker.weapon.type === 'RANGED') {\r\n    return calculateDamageRanged({ attacker, defender })\r\n  }\r\n\r\n  return calculateDamageMelee({ attacker, defender })\r\n}\r\n\r\nfunction calculateDamageRanged({ attacker, defender }: AttackerDefenderPair): DamageRanged {\r\n  let rolledDefenseDice = defender.profile.defense\r\n\r\n  let ballisticSkillCritical = 6\r\n\r\n  // LETHAL 5+\r\n  if (attacker.weapon.specialRules.includes(specialRules.LETHAL5)) {\r\n    ballisticSkillCritical = Math.max(5, attacker.profile.ballisticSkill)\r\n  }\r\n\r\n  // LETHAL 4+\r\n  if (attacker.weapon.specialRules.includes(specialRules.LETHAL4)) {\r\n    ballisticSkillCritical = Math.max(4, attacker.profile.ballisticSkill)\r\n  }\r\n\r\n  // GRAV\r\n  if (attacker.weapon.specialRules.includes(specialRules.GRAV) && defender.profile.save <= 3) {\r\n    ballisticSkillCritical = Math.max(4, attacker.profile.ballisticSkill)\r\n  }\r\n\r\n  // AP1\r\n  if (attacker.weapon.specialRules.includes(specialRules.AP1)) {\r\n    rolledDefenseDice -= 1\r\n  }\r\n\r\n  // AP2\r\n  if (attacker.weapon.specialRules.includes(specialRules.AP2)) {\r\n    rolledDefenseDice -= 2\r\n  }\r\n  const weaponBallisticSkill =\r\n    attacker.weapon.fixedWeaponBallisticSkill ||\r\n    attacker.profile.ballisticSkill + (attacker.weapon.weaponBallisticSkillAdjustment || 0)\r\n\r\n  const adjustedballisticSkill = Math.max(2, weaponBallisticSkill)\r\n\r\n  let expectedHits = oneDiceChanceOfSuccess(adjustedballisticSkill, ballisticSkillCritical) * attacker.weapon.attackDice\r\n  let expectedCriticalHits = oneDiceChanceOfCrit(ballisticSkillCritical) * attacker.weapon.attackDice\r\n\r\n  // BALANCED\r\n  if (attacker.weapon.specialRules.includes(specialRules.BALANCED)) {\r\n    const chanceOfMiss = Math.min(1, oneDiceChanceOfMiss(adjustedballisticSkill) * attacker.weapon.attackDice)\r\n    expectedHits += oneDiceChanceOfSuccess(adjustedballisticSkill, ballisticSkillCritical) * chanceOfMiss\r\n    expectedCriticalHits += oneDiceChanceOfCrit(ballisticSkillCritical) * chanceOfMiss\r\n  }\r\n\r\n  const chanceOfAtLeastOneCrit = Math.min(expectedCriticalHits, 1)\r\n\r\n  // Normal\r\n  const chanceOfSave = oneDiceChanceOfSuccess(defender.profile.save, defender.profile.saveCritical)\r\n  const chanceOfSaveCritical = oneDiceChanceOfCrit(defender.profile.saveCritical)\r\n\r\n  let expectedSaves = chanceOfSave * rolledDefenseDice\r\n  let expectedCriticalSaves = chanceOfSaveCritical * rolledDefenseDice\r\n\r\n  // Critical P1\r\n  if (attacker.weapon.criticalRules.includes(criticalRules.P1)) {\r\n    const chanceOfNoCrit = 1 - chanceOfAtLeastOneCrit\r\n\r\n    const p1Saves = chanceOfAtLeastOneCrit * (rolledDefenseDice - 1) * chanceOfSave\r\n    const p1SaveCrits = chanceOfAtLeastOneCrit * (rolledDefenseDice - 1) * chanceOfSaveCritical\r\n    const nonP1Saves = chanceOfNoCrit * rolledDefenseDice * chanceOfSave\r\n    const nonP1SaveCrits = chanceOfNoCrit * rolledDefenseDice * chanceOfSaveCritical\r\n\r\n    expectedSaves = p1Saves + nonP1Saves\r\n    expectedCriticalSaves = p1SaveCrits + nonP1SaveCrits\r\n  }\r\n\r\n  // RENDING\r\n  if (attacker.weapon.criticalRules.includes(criticalRules.RENDING)) {\r\n    expectedHits -= chanceOfAtLeastOneCrit / attacker.weapon.attackDice\r\n    expectedCriticalHits += chanceOfAtLeastOneCrit / attacker.weapon.attackDice\r\n  }\r\n\r\n  // CEASELESS\r\n  if (attacker.weapon.specialRules.includes(specialRules.CEASELESS)) {\r\n    const expectedNaturalOnes = (1 / 6) * attacker.weapon.attackDice\r\n\r\n    expectedHits +=\r\n      expectedNaturalOnes * oneDiceChanceOfSuccess(attacker.profile.ballisticSkill, ballisticSkillCritical)\r\n    expectedCriticalHits += expectedNaturalOnes * oneDiceChanceOfCrit(ballisticSkillCritical)\r\n  }\r\n\r\n  // RELENTLESS\r\n  if (attacker.weapon.specialRules.includes(specialRules.RELENTLESS)) {\r\n    const expectedMisses = oneDiceChanceOfMiss(attacker.profile.ballisticSkill) * attacker.weapon.attackDice\r\n\r\n    expectedHits += expectedMisses * oneDiceChanceOfSuccess(attacker.profile.ballisticSkill, ballisticSkillCritical)\r\n    expectedCriticalHits += expectedMisses * oneDiceChanceOfCrit(ballisticSkillCritical)\r\n  }\r\n\r\n  const expectedHitDamage = Math.max(0, expectedHits - expectedSaves) * attacker.weapon.damage\r\n\r\n  const expectedCritDamage = Math.max(0, expectedCriticalHits - expectedCriticalSaves) * attacker.weapon.damageCritical\r\n\r\n  // MWx\r\n  let mw = 0\r\n\r\n  if (attacker.weapon.criticalRules.includes(criticalRules.MW2)) {\r\n    mw = 2\r\n  }\r\n\r\n  if (attacker.weapon.criticalRules.includes(criticalRules.MW3)) {\r\n    mw = 3\r\n  }\r\n\r\n  if (attacker.weapon.criticalRules.includes(criticalRules.MW4)) {\r\n    mw = 4\r\n  }\r\n\r\n  const expectedMortalWounds = expectedCriticalHits * mw\r\n\r\n  // const rendingDamage = weapon.criticalRules.includes(criticalRules.RENDING)\r\n  //   ? calculateRendingDamage(weapon, ballisticSkill) -\r\n  //     chanceOfCrit(defenseProfile.saveCritical) * defenseProfile.defenseDice *\r\n  //   : 0;\r\n  const expectedTotalDamage = expectedHitDamage + expectedCritDamage + expectedMortalWounds\r\n\r\n  return {\r\n    type: 'ranged',\r\n    total: +expectedTotalDamage.toFixed(2),\r\n    hit: +expectedHitDamage.toFixed(2),\r\n    crit: +expectedCritDamage.toFixed(2),\r\n    mw: +expectedMortalWounds.toFixed(2),\r\n    // RENDING: rendingDamage.toFixed(2),\r\n  }\r\n}\r\n\r\nexport function getAttackerAttackDice(weapon: Weapon) {\r\n  let attackDice = weapon.attackDice\r\n\r\n  // DARK BLESSING on attacker weapon\r\n  if (weapon.equipment.includes(equipment.DARK_BLESSING)) {\r\n    attackDice += 1\r\n  }\r\n\r\n  return attackDice\r\n}\r\n\r\nexport function calculateMeleeBasics({ attacker, defender }: AttackerDefenderPair) {\r\n  /**\r\n   * ATTACKER basic stats\r\n   * */\r\n  let attackerWeaponSkillCritical = 6\r\n\r\n  // LETHAL 5+ on attacker weapon\r\n  if (attacker.weapon.specialRules.includes(specialRules.LETHAL5)) {\r\n    attackerWeaponSkillCritical = Math.max(5, attacker.profile.weaponSkill)\r\n  }\r\n\r\n  // LETHAL 4+ on attacker weapon\r\n  if (attacker.weapon.specialRules.includes(specialRules.LETHAL4)) {\r\n    attackerWeaponSkillCritical = Math.max(4, attacker.profile.weaponSkill)\r\n  }\r\n\r\n  const attackerAdjustedWeaponSkill = Math.max(\r\n    2,\r\n    attacker.weapon.weaponBallisticSkillAdjustment\r\n      ? attacker.profile.weaponSkill + attacker.weapon.weaponBallisticSkillAdjustment\r\n      : attacker.profile.weaponSkill\r\n  )\r\n\r\n  const attackerHitsPerDie = oneDiceChanceOfSuccess(attackerAdjustedWeaponSkill, attackerWeaponSkillCritical)\r\n  const attackerCritsPerDie = oneDiceChanceOfCrit(attackerWeaponSkillCritical)\r\n\r\n  const attackerAttackDice = getAttackerAttackDice(attacker.weapon)\r\n\r\n  let attackerHits = attackerHitsPerDie * attackerAttackDice\r\n  let attackerCrits = attackerCritsPerDie * attackerAttackDice\r\n\r\n  // RELENTLESS on attacker weapon\r\n  if (attacker.weapon.specialRules.includes(specialRules.RELENTLESS)) {\r\n    const expectedMisses = oneDiceChanceOfMiss(attackerAdjustedWeaponSkill) * attackerAttackDice\r\n\r\n    attackerHits += expectedMisses * oneDiceChanceOfSuccess(attackerAdjustedWeaponSkill, attackerWeaponSkillCritical)\r\n    attackerCrits += expectedMisses * oneDiceChanceOfCrit(attackerWeaponSkillCritical)\r\n  }\r\n\r\n  // BALANCED on attacker weapon\r\n  if (attacker.weapon.specialRules.includes(specialRules.BALANCED)) {\r\n    const chanceOfMiss = Math.min(1, oneDiceChanceOfMiss(attackerAdjustedWeaponSkill) * attackerAttackDice)\r\n    attackerHits += oneDiceChanceOfSuccess(attackerAdjustedWeaponSkill, attackerWeaponSkillCritical) * chanceOfMiss\r\n    attackerCrits += oneDiceChanceOfCrit(attackerWeaponSkillCritical) * chanceOfMiss\r\n  }\r\n\r\n  const attackerExpectedCriticalHitsMax1 = Math.min(1, attackerCrits)\r\n\r\n  /**\r\n   * DEFENDER basic stats\r\n   * */\r\n  let defenseWeaponSkillCritical = 6\r\n\r\n  // LETHAL 5+ on defender weapon\r\n  if (defender.weapon.specialRules.includes(specialRules.LETHAL5)) {\r\n    defenseWeaponSkillCritical = Math.max(5, defender.profile.weaponSkill)\r\n  }\r\n\r\n  // LETHAL 4+ on defender weapon\r\n  if (defender.weapon.specialRules.includes(specialRules.LETHAL4)) {\r\n    defenseWeaponSkillCritical = Math.max(4, defender.profile.weaponSkill)\r\n  }\r\n\r\n  const defenseAdjustedWeaponSkill = Math.max(\r\n    2,\r\n    defender.weapon.weaponBallisticSkillAdjustment\r\n      ? defender.profile.weaponSkill + defender.weapon.weaponBallisticSkillAdjustment\r\n      : defender.profile.weaponSkill\r\n  )\r\n\r\n  const defenderHitsPerDie = oneDiceChanceOfSuccess(defenseAdjustedWeaponSkill, defenseWeaponSkillCritical)\r\n  const defenderCritsPerDie = oneDiceChanceOfCrit(defenseWeaponSkillCritical)\r\n\r\n  let defenderAttackDice = defender.weapon.attackDice\r\n\r\n  // GRISLY TROPHY on attacker weapon\r\n  if (attacker.weapon.equipment.includes(equipment.GRISLY_TROPHY)) {\r\n    defenderAttackDice -= 1\r\n  }\r\n\r\n  let defenderHits = defenderHitsPerDie * defenderAttackDice\r\n  let defenderCrits = defenderCritsPerDie * defenderAttackDice\r\n\r\n  // STUN on attacker weapon\r\n  if (attacker.weapon.criticalRules.includes(criticalRules.STUN)) {\r\n    defenderHits -= defenderHitsPerDie * attackerExpectedCriticalHitsMax1\r\n  }\r\n\r\n  // RELENTLESS on defender weapon\r\n  if (defender.weapon.specialRules.includes(specialRules.RELENTLESS)) {\r\n    const expectedMisses = oneDiceChanceOfMiss(attackerAdjustedWeaponSkill) * attackerAttackDice\r\n\r\n    defenderHits += expectedMisses * oneDiceChanceOfSuccess(attackerAdjustedWeaponSkill, attackerWeaponSkillCritical)\r\n    defenderCrits += expectedMisses * oneDiceChanceOfCrit(attackerWeaponSkillCritical)\r\n  }\r\n\r\n  // BALANCED on defender weapon\r\n  if (defender.weapon.specialRules.includes(specialRules.BALANCED)) {\r\n    const chanceOfMiss = Math.min(1, oneDiceChanceOfMiss(attackerAdjustedWeaponSkill) * attackerAttackDice)\r\n    defenderHits += oneDiceChanceOfSuccess(attackerAdjustedWeaponSkill, attackerWeaponSkillCritical) * chanceOfMiss\r\n    defenderCrits += oneDiceChanceOfCrit(attackerWeaponSkillCritical) * chanceOfMiss\r\n  }\r\n\r\n  const defenderExpectedCriticalHitsMax1 = Math.min(1, defenderCrits)\r\n\r\n  // STUN on defender weapon\r\n  if (defender.weapon.criticalRules.includes(criticalRules.STUN)) {\r\n    attackerHits -= attackerHitsPerDie * defenderExpectedCriticalHitsMax1\r\n  }\r\n\r\n  return {\r\n    attackerHits,\r\n    attackerCrits,\r\n    defenderHits,\r\n    defenderCrits,\r\n    attackerAdjustedWeaponSkill,\r\n    attackerWeaponSkillCritical,\r\n    defenderHitsPerDie,\r\n    defenderCritsPerDie,\r\n    attackerHitsPerDie,\r\n    attackerCritsPerDie,\r\n  }\r\n}\r\n\r\ntype FightStrategy = 'STRIKE' | 'PARRY'\r\n\r\ninterface CalculateMeleeBlowByBlowProps {\r\n  attackerWeaponProfile: Weapon\r\n  attackerHits: number\r\n  attackerCrits: number\r\n  attackerStrategy: FightStrategy\r\n  defenderWeaponProfile: Weapon\r\n  defenderHits: number\r\n  defenderCrits: number\r\n  defenderStrategy: FightStrategy\r\n  defenseProfile: DataSheet\r\n  attackProfile: DataSheet\r\n}\r\n\r\nfunction calculateMeleeBlowByBlow({\r\n  attackerWeaponProfile,\r\n  attackerHits,\r\n  attackerCrits,\r\n  attackerStrategy,\r\n  defenderWeaponProfile,\r\n  defenderHits,\r\n  defenderCrits,\r\n  defenderStrategy,\r\n  defenseProfile,\r\n  attackProfile,\r\n}: CalculateMeleeBlowByBlowProps) {\r\n  interface StatBlock {\r\n    crits: number\r\n    hits: number\r\n    damage: number\r\n    wounds: number\r\n    weaponProfile: Weapon\r\n    stunAmount: number\r\n  }\r\n\r\n  interface Stats {\r\n    attacker: StatBlock\r\n    defender: StatBlock\r\n  }\r\n\r\n  const stats: Stats = {\r\n    attacker: {\r\n      crits: attackerCrits,\r\n      hits: attackerHits,\r\n      damage: 0,\r\n      wounds: attackProfile.wounds,\r\n      weaponProfile: attackerWeaponProfile,\r\n      stunAmount: 0,\r\n    },\r\n    defender: {\r\n      crits: defenderCrits,\r\n      hits: defenderHits,\r\n      damage: 0,\r\n      wounds: defenseProfile.wounds,\r\n      weaponProfile: defenderWeaponProfile,\r\n      stunAmount: 0,\r\n    },\r\n  }\r\n\r\n  let attackerInitiative = true\r\n  let counter = 0\r\n\r\n  if (\r\n    attackerWeaponProfile.criticalRules.includes(criticalRules.STUN) &&\r\n    !defenseProfile.abilities?.includes(abilities.THE_EMPERORS_CHOSEN)\r\n  ) {\r\n    stats.attacker.stunAmount = 1\r\n  }\r\n\r\n  if (\r\n    defenderWeaponProfile.criticalRules.includes(criticalRules.STUN) &&\r\n    !attackProfile.abilities?.includes(abilities.THE_EMPERORS_CHOSEN)\r\n  ) {\r\n    stats.defender.stunAmount = 1\r\n  }\r\n\r\n  // if (\r\n  //   stats.attacker.weaponProfile.specialRules.includes(specialRules.BRUTAL) ||\r\n  //   stats.defender.weaponProfile.specialRules.includes(specialRules.BRUTAL)\r\n  // ) {\r\n  // console.log(\r\n  //   'Start a new calculation',\r\n  //   stats.attacker.weaponProfile.name,\r\n  //   attackerStrategy,\r\n  //   stats.attacker.crits,\r\n  //   stats.attacker.hits,\r\n  //   stats.defender.weaponProfile.name,\r\n  //   defenderStrategy\r\n  // )\r\n  // }\r\n\r\n  // Main loop, attribute dice until someone dies or the dice run out\r\n  while (\r\n    (stats.attacker.hits > 0 || stats.attacker.crits > 0 || stats.defender.hits > 0 || stats.defender.crits > 0) &&\r\n    stats.attacker.wounds > stats.attacker.damage &&\r\n    stats.defender.wounds > stats.defender.damage &&\r\n    counter < 100 // Safeguard against runaway loops\r\n  ) {\r\n    resolveDie()\r\n    attackerInitiative = !attackerInitiative\r\n    counter++\r\n  }\r\n\r\n  return {\r\n    attackerDamage: stats.attacker.damage,\r\n    defenderDamage: stats.defender.damage,\r\n    attackerDead: stats.attacker.damage >= stats.attacker.wounds,\r\n    defenderDead: stats.defender.damage >= stats.defender.wounds,\r\n    finalStats: stats,\r\n    counter,\r\n  }\r\n\r\n  // Main logic for dice rolling, attributes a single dice based on initiative and strategy\r\n  function resolveDie() {\r\n    const strategy = attackerInitiative ? attackerStrategy : defenderStrategy\r\n    const initiativeActor = attackerInitiative ? 'attacker' : 'defender'\r\n    const respondingActor = attackerInitiative ? 'defender' : 'attacker'\r\n\r\n    const initiator = stats[initiativeActor]\r\n    const responder = stats[respondingActor]\r\n\r\n    if (strategy === 'STRIKE') {\r\n      let dieLeft = 1\r\n\r\n      if (initiator.crits > 0) {\r\n        // Do critical damage\r\n        const criticalDamageAmount = Math.min(initiator.crits, dieLeft)\r\n        responder.damage += criticalDamageAmount * initiator.weaponProfile.damageCritical\r\n        initiator.crits -= criticalDamageAmount\r\n        dieLeft -= criticalDamageAmount\r\n\r\n        // STUN on initiator weapon\r\n        if (initiator.stunAmount > 0) {\r\n          const stunDone = Math.min(initiator.stunAmount, responder.hits, criticalDamageAmount)\r\n          responder.hits -= stunDone\r\n          initiator.stunAmount -= stunDone\r\n        }\r\n\r\n        // if (\r\n        //   initiator.weaponProfile.specialRules.includes(specialRules.BRUTAL) ||\r\n        //   responder.weaponProfile.specialRules.includes(specialRules.BRUTAL)\r\n        // ) {\r\n        //   console.log(\r\n        //     'After critical hits as critical hits',\r\n        //     initiativeActor,\r\n        //     JSON.stringify({ initiator, responder, dieLeft })\r\n        //   )\r\n        // }\r\n      }\r\n\r\n      if (initiator.hits > 0 && dieLeft > 0) {\r\n        const damageAmount = Math.min(initiator.hits, dieLeft)\r\n        responder.damage += damageAmount * initiator.weaponProfile.damage\r\n        initiator.hits -= damageAmount\r\n        dieLeft -= damageAmount\r\n\r\n        // if (\r\n        //   initiator.weaponProfile.specialRules.includes(specialRules.BRUTAL) ||\r\n        //   responder.weaponProfile.specialRules.includes(specialRules.BRUTAL)\r\n        // ) {\r\n        //   console.log('After hits as hits', initiativeActor, JSON.stringify({ ...stats, dieLeft }))\r\n        // }\r\n\r\n        if (dieLeft === 0) return\r\n      }\r\n    }\r\n    if (strategy === 'PARRY') {\r\n      let dieLeft = 1\r\n\r\n      if (initiator.crits > 0) {\r\n        // Critical parry used as critical parry\r\n        const criticalParryUsed = Math.min(initiator.crits, responder.crits, dieLeft)\r\n        const criticalParryDone = initiator.weaponProfile.equipment.includes(equipment.STORM_SHIELD)\r\n          ? Math.min(responder.crits, criticalParryUsed * 2)\r\n          : criticalParryUsed\r\n\r\n        responder.crits -= criticalParryDone\r\n        initiator.crits -= criticalParryUsed\r\n        dieLeft -= criticalParryUsed\r\n\r\n        // if (\r\n        //   initiator.weaponProfile.specialRules.includes(specialRules.BRUTAL) ||\r\n        //   responder.weaponProfile.specialRules.includes(specialRules.BRUTAL)\r\n        // ) {\r\n        //   console.log(\r\n        //     'After critical parries as critical parries',\r\n        //     initiativeActor,\r\n        //     JSON.stringify({ ...stats, dieLeft })\r\n        //   )\r\n        // }\r\n        if (dieLeft === 0) return\r\n\r\n        // Critical parry used as normal parry\r\n        const parryUsed = Math.min(initiator.crits, responder.hits, dieLeft)\r\n        const parryDone = initiator.weaponProfile.equipment.includes(equipment.STORM_SHIELD)\r\n          ? Math.min(responder.hits, parryUsed * 2)\r\n          : parryUsed\r\n\r\n        responder.hits -= parryDone\r\n        initiator.crits -= parryUsed\r\n        dieLeft -= parryUsed\r\n\r\n        // if (\r\n        //   initiator.weaponProfile.specialRules.includes(specialRules.BRUTAL) ||\r\n        //   responder.weaponProfile.specialRules.includes(specialRules.BRUTAL)\r\n        // ) {\r\n        //   console.log(\r\n        //     'After critical parries as normal parries',\r\n        //     initiativeActor,\r\n        //     JSON.stringify({ ...stats, dieLeft })\r\n        //   )\r\n        // }\r\n        if (dieLeft === 0) return\r\n\r\n        // Critical parry used as damage\r\n        const criticalDamageAmount = Math.min(initiator.crits, dieLeft)\r\n        responder.damage += criticalDamageAmount * initiator.weaponProfile.damageCritical\r\n        initiator.crits -= criticalDamageAmount\r\n        dieLeft -= criticalDamageAmount\r\n\r\n        // STUN on initiator weapon\r\n        if (initiator.stunAmount > 0) {\r\n          const stunDone = Math.min(initiator.stunAmount, responder.hits, criticalDamageAmount)\r\n          responder.hits -= stunDone\r\n          initiator.stunAmount -= stunDone\r\n        }\r\n\r\n        // if (\r\n        //   initiator.weaponProfile.specialRules.includes(specialRules.BRUTAL) ||\r\n        //   responder.weaponProfile.specialRules.includes(specialRules.BRUTAL)\r\n        // ) {\r\n        //   console.log('After critical parries as damage', initiativeActor, JSON.stringify({ ...stats, dieLeft }))\r\n        // }\r\n        if (dieLeft === 0) return\r\n      }\r\n\r\n      if (initiator.hits > 0) {\r\n        if (responder.weaponProfile.specialRules.includes(specialRules.BRUTAL)) {\r\n          // console.log(initiativeActor, 'Skipping normal parries, opponent has BRUTAL', dieLeft)\r\n        } else {\r\n          // Parry used as normal parry\r\n          const parryUsed = Math.min(initiator.hits, responder.hits, dieLeft)\r\n          const parryDone = initiator.weaponProfile.equipment.includes(equipment.STORM_SHIELD)\r\n            ? Math.min(responder.hits, parryUsed * 2)\r\n            : parryUsed\r\n\r\n          responder.hits -= parryDone\r\n          initiator.hits -= parryUsed\r\n          dieLeft -= parryUsed\r\n        }\r\n\r\n        // console.log('After parries as parries', initiativeActor, JSON.stringify({ ...stats, dieLeft }))\r\n        if (dieLeft === 0) return\r\n\r\n        // Parry used as damage\r\n        const damageAmount = Math.min(initiator.hits, dieLeft)\r\n        responder.damage += damageAmount * initiator.weaponProfile.damage\r\n        initiator.hits -= damageAmount\r\n        dieLeft -= damageAmount\r\n\r\n        // console.log('After parries as damage', initiativeActor, JSON.stringify({ ...stats, dieLeft }))\r\n        if (dieLeft === 0) return\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction calculateDamageMelee({ attacker, defender }: AttackerDefenderPair): DamageMelee {\r\n  const { attackerHits, attackerCrits, defenderHits, defenderCrits } = calculateMeleeBasics({ attacker, defender })\r\n\r\n  /** STRATEGY 1\r\n   * Goal: attacker & defender => max damage done\r\n   * Strategy: no parries on either side, just straight damage\r\n   * */\r\n  // eslint-disable-next-line\r\n  const maxDamageOutput = calculateMeleeBlowByBlow({\r\n    attackerWeaponProfile: attacker.weapon,\r\n    attackerHits,\r\n    attackerCrits,\r\n    attackerStrategy: 'STRIKE',\r\n    defenderWeaponProfile: defender.weapon,\r\n    defenderHits,\r\n    defenderCrits,\r\n    defenderStrategy: 'STRIKE',\r\n    defenseProfile: defender.profile,\r\n    attackProfile: attacker.profile,\r\n  })\r\n\r\n  /** STRATEGY 2\r\n   * Goal: attacker => max damage done, defender => min damage taken\r\n   * Strategy: attacker does maximum damage, defender parries whenever possible\r\n   * */\r\n  const parryDefenderOutput = calculateMeleeBlowByBlow({\r\n    attackerWeaponProfile: attacker.weapon,\r\n    attackerHits,\r\n    attackerCrits,\r\n    attackerStrategy: 'STRIKE',\r\n    defenderWeaponProfile: defender.weapon,\r\n    defenderHits,\r\n    defenderCrits,\r\n    defenderStrategy: 'PARRY',\r\n    defenseProfile: defender.profile,\r\n    attackProfile: attacker.profile,\r\n  })\r\n\r\n  /** STRATEGY 3\r\n   * Goal: attacker => min damage taken, defender => max damage done\r\n   * Strategy: attacker parries when possible, defender does maximum damage\r\n   * */\r\n  const parryAttackerOutput = calculateMeleeBlowByBlow({\r\n    attackerWeaponProfile: attacker.weapon,\r\n    attackerHits,\r\n    attackerCrits,\r\n    attackerStrategy: 'PARRY',\r\n    defenderWeaponProfile: defender.weapon,\r\n    defenderHits,\r\n    defenderCrits,\r\n    defenderStrategy: 'STRIKE',\r\n    defenseProfile: defender.profile,\r\n    attackProfile: attacker.profile,\r\n  })\r\n\r\n  /** STRATEGY 4\r\n   * Goal: attacker => min damage taken, defender => min damage taken\r\n   * Strategy: attacker and defender parry when possible\r\n   * */\r\n  const parryBothOutput = calculateMeleeBlowByBlow({\r\n    attackerWeaponProfile: attacker.weapon,\r\n    attackerHits,\r\n    attackerCrits,\r\n    attackerStrategy: 'PARRY',\r\n    defenderWeaponProfile: defender.weapon,\r\n    defenderHits,\r\n    defenderCrits,\r\n    defenderStrategy: 'PARRY',\r\n    defenseProfile: defender.profile,\r\n    attackProfile: attacker.profile,\r\n  })\r\n\r\n  return {\r\n    type: 'melee',\r\n    total: {\r\n      maxDamage: {\r\n        attackerDamage: maxDamageOutput.attackerDamage,\r\n        defenderDamage: maxDamageOutput.defenderDamage,\r\n        attackerDead: maxDamageOutput.attackerDead,\r\n        defenderDead: maxDamageOutput.defenderDead,\r\n      },\r\n      parryDefender: {\r\n        attackerDamage: parryDefenderOutput.attackerDamage,\r\n        defenderDamage: parryDefenderOutput.defenderDamage,\r\n        attackerDead: parryDefenderOutput.attackerDead,\r\n        defenderDead: parryDefenderOutput.defenderDead,\r\n      },\r\n      parryAttacker: {\r\n        attackerDamage: parryAttackerOutput.attackerDamage,\r\n        defenderDamage: parryAttackerOutput.defenderDamage,\r\n        attackerDead: parryAttackerOutput.attackerDead,\r\n        defenderDead: parryAttackerOutput.defenderDead,\r\n      },\r\n      parryBoth: {\r\n        attackerDamage: parryBothOutput.attackerDamage,\r\n        defenderDamage: parryBothOutput.defenderDamage,\r\n        attackerDead: parryBothOutput.attackerDead,\r\n        defenderDead: parryBothOutput.defenderDead,\r\n      },\r\n    },\r\n  }\r\n}\r\n","import { DataSheet, getWeaponProfiles } from '../../helpers'\r\n\r\nexport const skitariiRangerTrooper: DataSheet = {\r\n  name: 'SKITARII RANGER (TROOPER)',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 7,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 4,\r\n  weapons: [...getWeaponProfiles('Galvanic rifle'), ...getWeaponProfiles('Gun butt')],\r\n  defaultWeapons: ['Galvanic rifle', 'Gun butt'],\r\n  weaponOptions: [],\r\n}\r\n\r\nexport const skitariiRangerGunner: DataSheet = {\r\n  name: 'SKITARII RANGER (GUNNER)',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 7,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 4,\r\n  weapons: [\r\n    ...getWeaponProfiles('Arc rifle'),\r\n    ...getWeaponProfiles('Plasma caliver'),\r\n    ...getWeaponProfiles('Transuranic arquebus'),\r\n    ...getWeaponProfiles('Gun butt'),\r\n  ],\r\n  defaultWeapons: ['Gun butt'],\r\n  weaponOptions: [[['Arc rifle', 'Plasma caliver', 'Transuranic arquebus']]],\r\n}\r\n\r\nexport const skitariiRangerAlpha: DataSheet = {\r\n  name: 'SKITARII RANGER ALPHA',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 8,\r\n  ballisticSkill: 2,\r\n  weaponSkill: 4,\r\n  weapons: [\r\n    ...getWeaponProfiles('Arc rifle'),\r\n    ...getWeaponProfiles('Galvanic rifle'),\r\n    ...getWeaponProfiles('Phosphor blast pistol'),\r\n    ...getWeaponProfiles('Radium pistol'),\r\n    ...getWeaponProfiles('Arc maul'),\r\n    ...getWeaponProfiles('Gun butt'),\r\n    ...getWeaponProfiles('Power weapon'),\r\n    ...getWeaponProfiles('Taser goad'),\r\n  ],\r\n  weaponOptions: [\r\n    [['Gun butt'], ['Galvanic rifle']],\r\n    [\r\n      ['Arc pistol', 'Phosphor blast pistol', 'Radium pistol'],\r\n      ['Arc maul', 'Power weapon', 'Taser goad'],\r\n    ],\r\n  ],\r\n}\r\n\r\nexport const skitariiVanguardTrooper: DataSheet = {\r\n  name: 'SKITARII VANGUARD (TROOPER)',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 7,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 4,\r\n  weapons: [...getWeaponProfiles('Radium carbine'), ...getWeaponProfiles('Gun butt')],\r\n  defaultWeapons: ['Gun butt', 'Radium carbine'],\r\n  weaponOptions: [],\r\n}\r\n\r\nexport const skitariiVanguardGunner: DataSheet = {\r\n  name: 'SKITARII VANGUARD (GUNNER)',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 7,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 4,\r\n  weapons: [\r\n    ...getWeaponProfiles('Arc rifle'),\r\n    ...getWeaponProfiles('Plasma caliver'),\r\n    ...getWeaponProfiles('Transuranic arquebus'),\r\n    ...getWeaponProfiles('Gun butt'),\r\n  ],\r\n  defaultWeapons: ['Gun butt'],\r\n  weaponOptions: [[['Arc rifle', 'Plasma caliver', 'Transuranic arquebus']]],\r\n}\r\n\r\nexport const skitariiVanguardAlpha: DataSheet = {\r\n  name: 'SKITARII VANGUARD ALPHA',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 8,\r\n  ballisticSkill: 2,\r\n  weaponSkill: 4,\r\n  weapons: [\r\n    ...getWeaponProfiles('Arc pistol'),\r\n    ...getWeaponProfiles('Phosphor blast pistol'),\r\n    ...getWeaponProfiles('Radium carbine'),\r\n    ...getWeaponProfiles('Radium pistol'),\r\n    ...getWeaponProfiles('Arc maul'),\r\n    ...getWeaponProfiles('Gun butt'),\r\n    ...getWeaponProfiles('Power weapon'),\r\n    ...getWeaponProfiles('Taser goad'),\r\n  ],\r\n  weaponOptions: [\r\n    [['Gun butt'], ['Radium carbine']],\r\n    [\r\n      ['Arc pistol', 'Phosphor blast pistol', 'Radium pistol'],\r\n      ['Arc maul', 'Power weapon', 'Taser goad'],\r\n    ],\r\n  ],\r\n}\r\n\r\nexport const sicarianRuststalkerTrooper: DataSheet = {\r\n  name: 'SICARIAN RUSTSTALKER (TROOPER)',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 10,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 3,\r\n  weapons: [...getWeaponProfiles('Chordclaw and transonic razor'), ...getWeaponProfiles('Transonic blades')],\r\n  weaponOptions: [[['Chordclaw and transonic razor', 'Transonic blades']]],\r\n}\r\n\r\nexport const sicarianRuststalkerPrinceps: DataSheet = {\r\n  name: 'SICARIAN RUSTSTALKER PRINCEPS',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 11,\r\n  ballisticSkill: 2,\r\n  weaponSkill: 2,\r\n  weapons: [...getWeaponProfiles('Chordclaw and transonic razor'), ...getWeaponProfiles('Transonic blades')],\r\n  weaponOptions: [[['Chordclaw and transonic razor', 'Transonic blades']]],\r\n}\r\n\r\nexport const sicarianInfiltratorTrooper: DataSheet = {\r\n  name: 'SICARIAN INFILTRATOR (TROOPER)',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 10,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 3,\r\n  weapons: [\r\n    ...getWeaponProfiles('Flechette blaster'),\r\n    ...getWeaponProfiles('Stubcarbine'),\r\n    ...getWeaponProfiles('Power weapon'),\r\n    ...getWeaponProfiles('Taser goad'),\r\n  ],\r\n  weaponOptions: [\r\n    [\r\n      ['Flechette blaster', 'Stubcarbine'],\r\n      ['Power weapon', 'Taser goad'],\r\n    ],\r\n  ],\r\n}\r\n\r\nexport const sicarianInfiltratorPrinceps: DataSheet = {\r\n  name: 'SICARIAN INFILTRATOR PRINCEPS',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 11,\r\n  ballisticSkill: 2,\r\n  weaponSkill: 3,\r\n  weapons: [\r\n    ...getWeaponProfiles('Flechette blaster'),\r\n    ...getWeaponProfiles('Stubcarbine'),\r\n    ...getWeaponProfiles('Power weapon'),\r\n    ...getWeaponProfiles('Taser goad'),\r\n  ],\r\n  weaponOptions: [\r\n    [\r\n      ['Flechette blaster', 'Stubcarbine'],\r\n      ['Power weapon', 'Taser goad'],\r\n    ],\r\n  ],\r\n}\r\n\r\nexport const forgeWorldStats = {\r\n  name: 'Forge World',\r\n  fireTeams: [\r\n    {\r\n      name: 'Skitarii Rangers',\r\n      dataSheets: [skitariiRangerTrooper, skitariiRangerGunner, skitariiRangerAlpha],\r\n    },\r\n    {\r\n      name: 'Skitarii Vanguards',\r\n      dataSheets: [skitariiVanguardTrooper, skitariiVanguardGunner, skitariiVanguardAlpha],\r\n    },\r\n    {\r\n      name: 'Sicarians',\r\n      dataSheets: [\r\n        sicarianRuststalkerTrooper,\r\n        sicarianRuststalkerPrinceps,\r\n        sicarianInfiltratorTrooper,\r\n        sicarianInfiltratorPrinceps,\r\n      ],\r\n    },\r\n  ],\r\n}\r\n","import { getWeaponProfiles, DataSheet } from '../../helpers'\r\n\r\nexport const neophyteHybridTrooper: DataSheet = {\r\n  name: 'NEOPHYTE HYBRID (TROOPER)',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 2,\r\n  defense: 3,\r\n  save: 5,\r\n  saveCritical: 6,\r\n  wounds: 7,\r\n  ballisticSkill: 4,\r\n  weaponSkill: 4,\r\n  weapons: [...getWeaponProfiles('Autogun'), ...getWeaponProfiles('Shotgun'), ...getWeaponProfiles('Gun butt')],\r\n  defaultWeapons: ['Gun butt', 'Autogun', 'Shotgun'],\r\n  weaponOptions: [],\r\n}\r\n\r\nexport const neophyteHybridGunner: DataSheet = {\r\n  name: 'NEOPHYTE HYBRID (GUNNER)',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 5,\r\n  saveCritical: 6,\r\n  wounds: 7,\r\n  ballisticSkill: 4,\r\n  weaponSkill: 4,\r\n  weapons: [\r\n    ...getWeaponProfiles('Flamer'),\r\n    ...getWeaponProfiles('Grenade launcher'),\r\n    ...getWeaponProfiles('Webber'),\r\n    ...getWeaponProfiles('Gun butt'),\r\n  ],\r\n  defaultWeapons: ['Gun butt'],\r\n  weaponOptions: [[['Flamer', 'Grenade launcher', 'Webber']]],\r\n}\r\n\r\nexport const neophyteHybridHeavyGunner: DataSheet = {\r\n  name: 'NEOPHYTE HYBRID (HEAVY GUNNER)',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 5,\r\n  saveCritical: 6,\r\n  wounds: 8,\r\n  ballisticSkill: 4,\r\n  weaponSkill: 4,\r\n  weapons: [\r\n    ...getWeaponProfiles('Heavy stubber'),\r\n    ...getWeaponProfiles('Mining laser'),\r\n    ...getWeaponProfiles('Seismic cannon'),\r\n    ...getWeaponProfiles('Gun butt'),\r\n  ],\r\n  defaultWeapons: ['Gun butt'],\r\n  weaponOptions: [[['Heavy stubber', 'Mining laser', 'Seismic cannon']]],\r\n}\r\n\r\nexport const neophyteHybridIconBearer: DataSheet = {\r\n  name: 'NEOPHYTE HYBRID (ICON BEARER)',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 5,\r\n  saveCritical: 6,\r\n  wounds: 7,\r\n  ballisticSkill: 4,\r\n  weaponSkill: 4,\r\n  weapons: [...getWeaponProfiles('Autogun'), ...getWeaponProfiles('Shotgun'), ...getWeaponProfiles('Gun butt')],\r\n  defaultWeapons: ['Gun butt', 'Autogun', 'Shotgun'],\r\n  weaponOptions: [],\r\n}\r\n\r\nexport const neophyteHybridLeader: DataSheet = {\r\n  name: 'NEOPHYTE HYBRID (LEADER)',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 5,\r\n  saveCritical: 6,\r\n  wounds: 7,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 3,\r\n  weapons: [\r\n    ...getWeaponProfiles('Autogun'),\r\n    ...getWeaponProfiles('Shotgun'),\r\n    ...getWeaponProfiles('Autopistol'),\r\n    ...getWeaponProfiles('Bolt pistol'),\r\n    ...getWeaponProfiles('Web pistol'),\r\n    ...getWeaponProfiles('Chainsword'),\r\n    ...getWeaponProfiles('Gun butt', { weaponBallisticSkillAdjustment: 1 }),\r\n    ...getWeaponProfiles('Power maul'),\r\n    ...getWeaponProfiles('Power pick'),\r\n  ],\r\n  weaponOptions: [\r\n    [['Autogun', 'Shotgun'], ['Gun butt']],\r\n    [\r\n      ['Autopistol', 'Bolt pistol', 'Web pistol'],\r\n      ['Chainsword', 'Power maul', 'Power pick'],\r\n    ],\r\n  ],\r\n}\r\n\r\nexport const acolyteHybridTrooper: DataSheet = {\r\n  name: 'NEOPHYTE HYBRID (TROOPER)',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 5,\r\n  saveCritical: 6,\r\n  wounds: 8,\r\n  ballisticSkill: 4,\r\n  weaponSkill: 3,\r\n  weapons: [...getWeaponProfiles('Autopistol'), ...getWeaponProfiles('Cult knife and claw')],\r\n  defaultWeapons: ['Autopistol', 'Cult knife and claw'],\r\n  weaponOptions: [],\r\n}\r\n\r\nexport const acolyteHybridGunner: DataSheet = {\r\n  name: 'NEOPHYTE HYBRID (GUNNER)',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 5,\r\n  saveCritical: 6,\r\n  wounds: 8,\r\n  ballisticSkill: 4,\r\n  weaponSkill: 3,\r\n  weapons: [...getWeaponProfiles('Hand flamer'), ...getWeaponProfiles('Cult knife and claw')],\r\n  defaultWeapons: ['Hand flamer', 'Cult knife and claw'],\r\n  weaponOptions: [],\r\n}\r\n\r\nexport const acolyteHybridFighter: DataSheet = {\r\n  name: 'NEOPHYTE HYBRID (FIGHTER)',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 5,\r\n  saveCritical: 6,\r\n  wounds: 8,\r\n  ballisticSkill: 4,\r\n  weaponSkill: 3,\r\n  weapons: [\r\n    ...getWeaponProfiles('Autopistol'),\r\n    ...getWeaponProfiles('Heavy rock cutter'),\r\n    ...getWeaponProfiles('Heavy rock drill'),\r\n    ...getWeaponProfiles('Heavy rock saw'),\r\n  ],\r\n  defaultWeapons: ['Autopistol'],\r\n  weaponOptions: [[['Heavy rock cutter', 'Heavy rock drill', 'Heavy rock saw']]],\r\n}\r\n\r\nexport const acolyteHybridIconBearer: DataSheet = {\r\n  name: 'NEOPHYTE HYBRID (ICON BEARER)',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 5,\r\n  saveCritical: 6,\r\n  wounds: 8,\r\n  ballisticSkill: 4,\r\n  weaponSkill: 3,\r\n  weapons: [...getWeaponProfiles('Autopistol'), ...getWeaponProfiles('Cult knife and claw')],\r\n  defaultWeapons: ['Autopistol', 'Cult knife and claw'],\r\n  weaponOptions: [],\r\n}\r\n\r\nexport const acolyteHybridLeader: DataSheet = {\r\n  name: 'NEOPHYTE HYBRID (LEADER)',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 5,\r\n  saveCritical: 6,\r\n  wounds: 9,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 2,\r\n  weapons: [\r\n    ...getWeaponProfiles('Autopistol'),\r\n    ...getWeaponProfiles('Hand flamer'),\r\n    ...getWeaponProfiles('Lash whip'),\r\n    ...getWeaponProfiles('Cult bonesword and claw'),\r\n    ...getWeaponProfiles('Cult knife and claw'),\r\n  ],\r\n  weaponOptions: [\r\n    [\r\n      ['Autopistol', 'Hand flamer', 'Lash whip'],\r\n      ['Cult bonesword and claw', 'Cult knife and claw'],\r\n    ],\r\n  ],\r\n}\r\n\r\nexport const hybridMetamorphFighter: DataSheet = {\r\n  name: 'HYBRID METAMORPH (FIGHTER)',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 5,\r\n  saveCritical: 6,\r\n  wounds: 8,\r\n  ballisticSkill: 4,\r\n  weaponSkill: 3,\r\n  weapons: [...getWeaponProfiles('Autopistol'), ...getWeaponProfiles('Metamorph mutations')],\r\n  defaultWeapons: ['Autopistol', 'Metamorph mutations'],\r\n  weaponOptions: [],\r\n}\r\n\r\nexport const hybridMetamorphGunner: DataSheet = {\r\n  name: 'HYBRID METAMORPH (GUNNER)',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 5,\r\n  saveCritical: 6,\r\n  wounds: 8,\r\n  ballisticSkill: 4,\r\n  weaponSkill: 3,\r\n  weapons: [...getWeaponProfiles('Hand flamer'), ...getWeaponProfiles('Metamorph mutations')],\r\n  defaultWeapons: ['Hand flamer', 'Metamorph mutations'],\r\n  weaponOptions: [],\r\n}\r\n\r\nexport const hybridMetamorphIconBearer: DataSheet = {\r\n  name: 'HYBRID METAMORPH (ICON BEARER)',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 5,\r\n  saveCritical: 6,\r\n  wounds: 8,\r\n  ballisticSkill: 4,\r\n  weaponSkill: 3,\r\n  weapons: [...getWeaponProfiles('Autopistol'), ...getWeaponProfiles('Metamorph mutations')],\r\n  defaultWeapons: ['Autopistol', 'Metamorph mutations'],\r\n  weaponOptions: [],\r\n}\r\n\r\nexport const hybridMetamorphLeader: DataSheet = {\r\n  name: 'HYBRID METAMORPH (LEADER)',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 5,\r\n  saveCritical: 6,\r\n  wounds: 9,\r\n  ballisticSkill: 2,\r\n  weaponSkill: 2,\r\n  weapons: [\r\n    ...getWeaponProfiles('Autopistol'),\r\n    ...getWeaponProfiles('Hand flamer'),\r\n    ...getWeaponProfiles('Cult bonesword and metamorph mutations'),\r\n    ...getWeaponProfiles('Metamorph mutations'),\r\n  ],\r\n  weaponOptions: [\r\n    [\r\n      ['Autopistol', 'Hand flamer'],\r\n      ['Cult bonesword and metamorph mutations', 'Metamorph mutations'],\r\n    ],\r\n  ],\r\n}\r\n\r\nexport const broodCovenStats = {\r\n  name: 'Brood Coven',\r\n  fireTeams: [\r\n    {\r\n      name: 'Neophyte Hybrids',\r\n      dataSheets: [\r\n        neophyteHybridTrooper,\r\n        neophyteHybridGunner,\r\n        neophyteHybridHeavyGunner,\r\n        neophyteHybridIconBearer,\r\n        neophyteHybridLeader,\r\n      ],\r\n    },\r\n    {\r\n      name: 'Acolyte Hybrids',\r\n      dataSheets: [\r\n        acolyteHybridTrooper,\r\n        acolyteHybridGunner,\r\n        acolyteHybridFighter,\r\n        acolyteHybridIconBearer,\r\n        acolyteHybridLeader,\r\n      ],\r\n    },\r\n    {\r\n      name: 'Hybrid Metamorphs',\r\n      dataSheets: [hybridMetamorphFighter, hybridMetamorphGunner, hybridMetamorphIconBearer, hybridMetamorphLeader],\r\n    },\r\n  ],\r\n}\r\n","import { getWeaponProfiles, DataSheet } from '../../helpers'\r\nimport { abilities } from '../abilities'\r\n\r\nexport const custodianGuardLeader: DataSheet = {\r\n  name: 'CUSTODIAN GUARD (LEADER)',\r\n  movement: 6,\r\n  apl: 4,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 2,\r\n  saveCritical: 6,\r\n  wounds: 19,\r\n  ballisticSkill: 2,\r\n  weaponSkill: 2,\r\n  weapons: [\r\n    ...getWeaponProfiles('Guardian spear'),\r\n    ...getWeaponProfiles('Sentinel blade'),\r\n    ...getWeaponProfiles('Storm shield'),\r\n  ],\r\n  defensiveMeleeWeapon: getWeaponProfiles('Guardian spear')[0],\r\n  abilities: [abilities.THE_EMPERORS_CHOSEN],\r\n  weaponOptions: [[['Guardian spear']], [['Sentinel blade'], ['Storm shield']]],\r\n}\r\n\r\nexport const custodianGuardWarrior: DataSheet = {\r\n  name: 'CUSTODIAN GUARD (WARRIOR)',\r\n  movement: 6,\r\n  apl: 4,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 2,\r\n  saveCritical: 6,\r\n  wounds: 18,\r\n  ballisticSkill: 2,\r\n  weaponSkill: 2,\r\n  weapons: [\r\n    ...getWeaponProfiles('Guardian spear'),\r\n    ...getWeaponProfiles('Sentinel blade'),\r\n    ...getWeaponProfiles('Storm shield'),\r\n  ],\r\n  defensiveMeleeWeapon: getWeaponProfiles('Guardian spear')[0],\r\n  abilities: [abilities.THE_EMPERORS_CHOSEN],\r\n  weaponOptions: [[['Guardian spear']], [['Sentinel blade'], ['Storm shield']]],\r\n}\r\n\r\nexport const sisterOfSilenceProsecutor: DataSheet = {\r\n  name: 'SISTER OF SILENCE PROSECUTOR',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 3,\r\n  saveCritical: 6,\r\n  wounds: 8,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 3,\r\n  weapons: [...getWeaponProfiles('Boltgun'), ...getWeaponProfiles('Gun butt', { attackDiceAdjustment: 1 })],\r\n  abilities: [],\r\n  defaultWeapons: ['Boltgun', 'Gun butt'],\r\n  weaponOptions: [],\r\n}\r\n\r\nexport const sisterOfSilenceWitchSeeker: DataSheet = {\r\n  name: 'SISTER OF SILENCE WITCHSEEKER',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 3,\r\n  saveCritical: 6,\r\n  wounds: 8,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 3,\r\n  weapons: [...getWeaponProfiles('Flamer'), ...getWeaponProfiles('Gun butt', { attackDiceAdjustment: 1 })],\r\n  abilities: [],\r\n  defaultWeapons: ['Flamer', 'Gun butt'],\r\n  weaponOptions: [],\r\n}\r\n\r\nexport const sisterOfSilenceVigilator: DataSheet = {\r\n  name: 'SISTER OF SILENCE VIGILATOR',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 3,\r\n  saveCritical: 6,\r\n  wounds: 8,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 3,\r\n  weapons: [...getWeaponProfiles('Executioner greatblade')],\r\n  abilities: [],\r\n  defaultWeapons: ['Executioner greatblade'],\r\n  weaponOptions: [],\r\n}\r\n\r\nexport const sisterOfSilenceSuperior: DataSheet = {\r\n  name: 'SISTER OF SILENCE SUPERIOR',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 3,\r\n  saveCritical: 6,\r\n  wounds: 9,\r\n  ballisticSkill: 2,\r\n  weaponSkill: 2,\r\n  weapons: [\r\n    ...getWeaponProfiles('Boltgun'),\r\n    ...getWeaponProfiles('Flamer'),\r\n    ...getWeaponProfiles('Executioner greatblade'),\r\n    ...getWeaponProfiles('Gun butt', { attackDiceAdjustment: 1 }),\r\n  ],\r\n  abilities: [],\r\n  weaponOptions: [[['Boltgun'], ['Gun butt']], [['Flamer'], ['Gun butt']], [['Executioner greatblade']]],\r\n}\r\n\r\nexport const talonsOfTheEmperorStats = {\r\n  name: 'Talons of the emperor',\r\n  fireTeams: [\r\n    {\r\n      name: 'Custodian Guards',\r\n      dataSheets: [custodianGuardWarrior, custodianGuardLeader],\r\n    },\r\n    {\r\n      name: 'Sisters of silence',\r\n      dataSheets: [\r\n        sisterOfSilenceProsecutor,\r\n        sisterOfSilenceWitchSeeker,\r\n        sisterOfSilenceVigilator,\r\n        sisterOfSilenceSuperior,\r\n      ],\r\n    },\r\n  ],\r\n}\r\n","import { DataSheet, generateEquipmentVariantProfiles, getWeaponProfiles } from '../../helpers'\r\nimport { equipment } from '../equipment'\r\n\r\nexport const skitariiRangerMarksman: DataSheet = {\r\n  name: 'SKITARII RANGER MARKSMAN',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 7,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 4,\r\n  weapons: [...getWeaponProfiles('Galvanic rifle'), ...getWeaponProfiles('Gun butt')],\r\n  defaultWeapons: ['Galvanic rifle', 'Gun butt'],\r\n  weaponOptions: [],\r\n}\r\n\r\nexport const skitariiRangerDiktat: DataSheet = {\r\n  name: 'SKITARII RANGER DIKTAT',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 7,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 4,\r\n  weapons: [...getWeaponProfiles('Galvanic rifle'), ...getWeaponProfiles('Gun butt')],\r\n  defaultWeapons: ['Galvanic rifle', 'Gun butt'],\r\n  weaponOptions: [],\r\n}\r\n\r\nexport const skitariiRangerSurveyor: DataSheet = {\r\n  name: 'SKITARII RANGER SURVEYOR',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 7,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 4,\r\n  weapons: [...getWeaponProfiles('Galvanic rifle'), ...getWeaponProfiles('Gun butt')],\r\n  defaultWeapons: ['Galvanic rifle', 'Gun butt'],\r\n  weaponOptions: [],\r\n}\r\n\r\nexport const skitariiRangerGunner: DataSheet = {\r\n  name: 'SKITARII RANGER GUNNER',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 7,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 4,\r\n  weapons: [\r\n    ...getWeaponProfiles('Arc rifle'),\r\n    ...getWeaponProfiles('Plasma caliver'),\r\n    ...getWeaponProfiles('Transuranic arquebus'),\r\n    ...getWeaponProfiles('Gun butt'),\r\n  ],\r\n  defaultWeapons: ['Gun butt'],\r\n  weaponOptions: [[['Arc rifle', 'Plasma caliver', 'Transuranic arquebus']]],\r\n}\r\n\r\nexport const skitariiRangerAlpha: DataSheet = {\r\n  name: 'SKITARII RANGER ALPHA',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 8,\r\n  ballisticSkill: 2,\r\n  weaponSkill: 4,\r\n  weapons: [\r\n    ...getWeaponProfiles('Arc rifle'),\r\n    ...getWeaponProfiles('Galvanic rifle'),\r\n    ...getWeaponProfiles('Phosphor blast pistol'),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Master-crafted radium pistol'), [equipment.ENRICHED_ROUNDS]),\r\n    ...getWeaponProfiles('Arc maul'),\r\n    ...getWeaponProfiles('Gun butt'),\r\n    ...getWeaponProfiles('Power weapon'),\r\n    ...getWeaponProfiles('Taser goad'),\r\n  ],\r\n  weaponOptions: [\r\n    [['Gun butt'], ['Galvanic rifle']],\r\n    [['Power weapon'], ['Master-crafted radium pistol']],\r\n    [\r\n      ['Arc pistol', 'Phosphor blast pistol'],\r\n      ['Arc maul', 'Taser goad'],\r\n    ],\r\n  ],\r\n}\r\n\r\nexport const skitariiVanguardShocktrooper: DataSheet = {\r\n  name: 'SKITARII VANGUARD SHOCKTROOPER',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 7,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 4,\r\n  weapons: [\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Radium carbine'), [equipment.ENRICHED_ROUNDS]),\r\n    ...getWeaponProfiles('Gun butt'),\r\n  ],\r\n  defaultWeapons: ['Gun butt', 'Radium carbine'],\r\n  weaponOptions: [],\r\n}\r\n\r\nexport const skitariiVanguardDiktat: DataSheet = {\r\n  name: 'SKITARII VANGUARD DIKTAT',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 7,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 4,\r\n  weapons: [\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Radium carbine'), [equipment.ENRICHED_ROUNDS]),\r\n    ...getWeaponProfiles('Gun butt'),\r\n  ],\r\n  defaultWeapons: ['Gun butt', 'Radium carbine'],\r\n  weaponOptions: [],\r\n}\r\n\r\nexport const skitariiVanguardSurveyor: DataSheet = {\r\n  name: 'SKITARII VANGUARD SURVEYOR',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 7,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 4,\r\n  weapons: [\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Radium carbine'), [equipment.ENRICHED_ROUNDS]),\r\n    ...getWeaponProfiles('Gun butt'),\r\n  ],\r\n  defaultWeapons: ['Gun butt', 'Radium carbine'],\r\n  weaponOptions: [],\r\n}\r\n\r\nexport const skitariiVanguardGunner: DataSheet = {\r\n  name: 'SKITARII VANGUARD GUNNER',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 7,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 4,\r\n  weapons: [\r\n    ...getWeaponProfiles('Arc rifle'),\r\n    ...getWeaponProfiles('Plasma caliver'),\r\n    ...getWeaponProfiles('Transuranic arquebus'),\r\n    ...getWeaponProfiles('Gun butt'),\r\n  ],\r\n  defaultWeapons: ['Gun butt'],\r\n  weaponOptions: [[['Arc rifle', 'Plasma caliver', 'Transuranic arquebus']]],\r\n}\r\n\r\nexport const skitariiVanguardAlpha: DataSheet = {\r\n  name: 'SKITARII VANGUARD ALPHA',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 8,\r\n  ballisticSkill: 2,\r\n  weaponSkill: 4,\r\n  weapons: [\r\n    ...getWeaponProfiles('Arc pistol'),\r\n    ...getWeaponProfiles('Phosphor blast pistol'),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Radium carbine'), [equipment.ENRICHED_ROUNDS]),\r\n    ...generateEquipmentVariantProfiles(getWeaponProfiles('Master-crafted radium pistol'), [equipment.ENRICHED_ROUNDS]),\r\n    ...getWeaponProfiles('Arc maul'),\r\n    ...getWeaponProfiles('Gun butt'),\r\n    ...getWeaponProfiles('Power weapon'),\r\n    ...getWeaponProfiles('Taser goad'),\r\n  ],\r\n  weaponOptions: [\r\n    [['Gun butt'], ['Radium carbine']],\r\n    [['Power weapon'], ['Master-crafted radium pistol']],\r\n    [\r\n      ['Arc pistol', 'Phosphor blast pistol'],\r\n      ['Arc maul', 'Taser goad'],\r\n    ],\r\n  ],\r\n}\r\n\r\nexport const sicarianRuststalkerAssassin: DataSheet = {\r\n  name: 'SICARIAN RUSTSTALKER ASSASSIN',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 10,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 3,\r\n  weapons: [...getWeaponProfiles('Chordclaw and transonic razor'), ...getWeaponProfiles('Transonic blades')],\r\n  weaponOptions: [[['Chordclaw and transonic razor', 'Transonic blades']]],\r\n}\r\n\r\nexport const sicarianRuststalkerPrinceps: DataSheet = {\r\n  name: 'SICARIAN RUSTSTALKER PRINCEPS',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 11,\r\n  ballisticSkill: 2,\r\n  weaponSkill: 2,\r\n  weapons: [...getWeaponProfiles('Chordclaw and transonic blades')],\r\n  defaultWeapons: ['Chordclaw and transonic blades'],\r\n  weaponOptions: [],\r\n}\r\n\r\nexport const sicarianInfiltratorTracker: DataSheet = {\r\n  name: 'SICARIAN INFILTRATOR TRACKER',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 10,\r\n  ballisticSkill: 3,\r\n  weaponSkill: 3,\r\n  weapons: [\r\n    ...getWeaponProfiles('Flechette blaster'),\r\n    ...getWeaponProfiles('Stubcarbine'),\r\n    ...getWeaponProfiles('Power weapon'),\r\n    ...getWeaponProfiles('Taser goad'),\r\n  ],\r\n  weaponOptions: [\r\n    [\r\n      ['Flechette blaster', 'Stubcarbine'],\r\n      ['Power weapon', 'Taser goad'],\r\n    ],\r\n  ],\r\n}\r\n\r\nexport const sicarianInfiltratorPrinceps: DataSheet = {\r\n  name: 'SICARIAN INFILTRATOR PRINCEPS',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 11,\r\n  ballisticSkill: 2,\r\n  weaponSkill: 3,\r\n  weapons: [\r\n    ...getWeaponProfiles('Flechette blaster'),\r\n    ...getWeaponProfiles('Stubcarbine'),\r\n    ...getWeaponProfiles('Power weapon'),\r\n    ...getWeaponProfiles('Taser goad'),\r\n  ],\r\n  weaponOptions: [\r\n    [\r\n      ['Flechette blaster', 'Stubcarbine'],\r\n      ['Power weapon', 'Taser goad'],\r\n    ],\r\n  ],\r\n}\r\n\r\nexport const hunterCladeStats = {\r\n  name: 'Hunter Clade',\r\n  fireTeams: [\r\n    {\r\n      name: 'Fireteam',\r\n      dataSheets: [\r\n        skitariiRangerMarksman,\r\n        skitariiRangerDiktat,\r\n        skitariiRangerSurveyor,\r\n        skitariiRangerGunner,\r\n        skitariiRangerAlpha,\r\n        skitariiVanguardShocktrooper,\r\n        skitariiVanguardDiktat,\r\n        skitariiVanguardSurveyor,\r\n        skitariiVanguardGunner,\r\n        skitariiVanguardAlpha,\r\n        sicarianRuststalkerAssassin,\r\n        sicarianRuststalkerPrinceps,\r\n        sicarianInfiltratorTracker,\r\n        sicarianInfiltratorPrinceps,\r\n      ],\r\n    },\r\n  ],\r\n}\r\n","import './App.css'\r\nimport {\r\n  Paper,\r\n  TableContainer,\r\n  Table,\r\n  TableRow,\r\n  TableCell,\r\n  TableBody,\r\n  TableHead,\r\n  Typography,\r\n  Box,\r\n  Drawer,\r\n  Button,\r\n  ButtonBase,\r\n  Select,\r\n  MenuItem,\r\n  FormControl,\r\n  InputLabel,\r\n  makeStyles,\r\n  Theme,\r\n} from '@material-ui/core'\r\nimport { createStyles } from '@material-ui/styles'\r\nimport { Weapon, WeaponName } from './stats/weapons'\r\nimport { adeptusAstartesStats } from './stats/factions/adeptusAstartes'\r\nimport { traitorSpaceMarineStats } from './stats/factions/traitorSpaceMarine'\r\nimport { calculateDamage, DamageMelee, getAttackerAttackDice } from './calculation'\r\nimport { specialRules } from './rules'\r\nimport React, { ChangeEvent, Dispatch, FunctionComponent, SetStateAction, useState } from 'react'\r\nimport { forgeWorldStats } from './stats/factions/forgeWorld'\r\nimport { broodCovenStats } from './stats/factions/broodCoven'\r\nimport { DataSheet, WeaponOption, WeaponOptions } from './helpers'\r\nimport { custodianGuardWarrior, talonsOfTheEmperorStats } from './stats/factions/talonsOfTheEmperor'\r\nimport classNames from 'classnames'\r\nimport { CSSProperties } from 'react'\r\nimport { hunterCladeStats } from './stats/factions/hunterClade'\r\n\r\ninterface FireTeam {\r\n  name: string\r\n  dataSheets: any[]\r\n}\r\n\r\ninterface Faction {\r\n  name: string\r\n  fireTeams: FireTeam[]\r\n}\r\n\r\ntype Factions = Faction[]\r\n\r\nconst factions: Factions = [\r\n  adeptusAstartesStats,\r\n  traitorSpaceMarineStats,\r\n  forgeWorldStats,\r\n  hunterCladeStats,\r\n  broodCovenStats,\r\n  talonsOfTheEmperorStats,\r\n]\r\n\r\nexport const custodesProfile = custodianGuardWarrior\r\n\r\nexport const meqProfile: DataSheet = {\r\n  name: 'MEQ',\r\n  movement: 6,\r\n  apl: 3,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 3,\r\n  saveCritical: 6,\r\n  wounds: 12,\r\n  weaponSkill: 3,\r\n  ballisticSkill: 3,\r\n  weapons: [\r\n    {\r\n      name: 'Power weapon',\r\n      profile: '',\r\n      attackDice: 4,\r\n      damage: 4,\r\n      damageCritical: 6,\r\n      specialRules: [specialRules.LETHAL5],\r\n      criticalRules: [],\r\n      equipment: [],\r\n      type: 'MELEE',\r\n    },\r\n  ],\r\n}\r\n\r\nconst geqProfile: DataSheet = {\r\n  name: 'GEQ',\r\n  movement: 6,\r\n  apl: 2,\r\n  groupActivation: 1,\r\n  defense: 3,\r\n  save: 4,\r\n  saveCritical: 6,\r\n  wounds: 8,\r\n  weaponSkill: 4,\r\n  ballisticSkill: 4,\r\n  weapons: [\r\n    {\r\n      name: 'Gun butt',\r\n      profile: '',\r\n      attackDice: 3,\r\n      damage: 2,\r\n      damageCritical: 3,\r\n      specialRules: [],\r\n      criticalRules: [],\r\n      equipment: [],\r\n      type: 'MELEE',\r\n    },\r\n  ],\r\n}\r\n\r\nfunction formatMeleeDamage(damage: DamageMelee) {\r\n  const d = damage.total\r\n  return (\r\n    <>\r\n      <div style={{ display: 'flex', flexWrap: 'wrap' }}>\r\n        <div style={{ display: 'inline-flex', width: '100%' }}>\r\n          <span style={{ flex: 'none', flexBasis: '100px' }}>Max damage: </span>\r\n          <span style={{ flex: 'none', color: 'green', flexBasis: '80px', marginLeft: '10px' }}>\r\n            {d.maxDamage.defenderDamage.toFixed(2)}\r\n            {d.maxDamage.defenderDead && ''}\r\n          </span>{' '}\r\n          <span style={{ flex: 'none', color: 'red', flexBasis: '80px' }}>\r\n            {d.maxDamage.attackerDamage.toFixed(2)}\r\n            {d.maxDamage.attackerDead && ''}\r\n          </span>\r\n        </div>\r\n        <div style={{ display: 'inline-flex', width: '100%' }}>\r\n          <span style={{ flex: 'none', flexBasis: '100px' }}>Def. parry: </span>\r\n          <span style={{ flex: 'none', color: 'green', flexBasis: '80px', marginLeft: '10px' }}>\r\n            {d.parryDefender.defenderDamage.toFixed(2)}\r\n            {d.parryDefender.defenderDead && ''}\r\n          </span>{' '}\r\n          <span style={{ flex: 'none', color: 'red', flexBasis: '80px' }}>\r\n            {d.parryDefender.attackerDamage.toFixed(2)}\r\n            {d.parryDefender.attackerDead && ''}\r\n          </span>\r\n        </div>\r\n        <div style={{ display: 'inline-flex', width: '100%' }}>\r\n          <span style={{ flex: 'none', flexBasis: '100px' }}>Att. parry: </span>\r\n          <span style={{ flex: 'none', color: 'green', flexBasis: '80px', marginLeft: '10px' }}>\r\n            {d.parryAttacker.defenderDamage.toFixed(2)}\r\n            {d.parryAttacker.defenderDead && ''}\r\n          </span>{' '}\r\n          <span style={{ flex: 'none', color: 'red', flexBasis: '80px' }}>\r\n            {d.parryAttacker.attackerDamage.toFixed(2)}\r\n            {d.parryAttacker.attackerDead && ''}\r\n          </span>\r\n        </div>\r\n        {/* <div style={{ display: 'inline-flex', width: '100%' }}>\r\n          <span style={{ flex: 'none', flexBasis: '100px' }}>Both parry: </span>\r\n          <span style={{ flex: 'none', color: 'green', flexBasis: '80px', marginLeft: '10px' }}>\r\n            {d.parryBoth.defenderDamage.toFixed(2)}\r\n            {d.parryBoth.defenderDead && ''}\r\n          </span>{' '}\r\n          <span style={{ flex: 'none', color: 'red', flexBasis: '80px' }}>\r\n            {d.parryBoth.attackerDamage.toFixed(2)}\r\n            {d.parryBoth.attackerDead && ''}\r\n          </span>\r\n        </div> */}\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nfunction handleSelectWeapon(profile: DataSheet, name: WeaponName, setDatasheet: Dispatch<SetStateAction<DataSheet>>) {\r\n  if (Array.isArray(profile.selectedWeapons)) {\r\n    if (profile.selectedWeapons.includes(name)) {\r\n      console.warn('Duplicate weapon')\r\n      return\r\n    }\r\n\r\n    setDatasheet({\r\n      ...profile,\r\n      selectedWeapons: [...profile.selectedWeapons, name],\r\n    })\r\n\r\n    return\r\n  }\r\n\r\n  setDatasheet({\r\n    ...profile,\r\n    selectedWeapons: [name],\r\n  })\r\n}\r\n\r\nfunction handleDeselectWeapon(profile: DataSheet, name: WeaponName, setDatasheet: Dispatch<SetStateAction<DataSheet>>) {\r\n  if (Array.isArray(profile.selectedWeapons)) {\r\n    if (!profile.selectedWeapons.includes(name)) {\r\n      console.warn('Unable to deselect, weapon not selected')\r\n      return\r\n    }\r\n\r\n    setDatasheet({\r\n      ...profile,\r\n      selectedWeapons: [...profile.selectedWeapons.filter((weapon) => weapon !== name)],\r\n    })\r\n\r\n    return\r\n  }\r\n\r\n  console.warn('Unable to deselect, no selected weapons')\r\n}\r\n\r\nfunction isWeaponInOption(name: WeaponName, option: WeaponOption): boolean {\r\n  return option.some((optionItem) => {\r\n    return optionItem.includes(name)\r\n  })\r\n}\r\n\r\nfunction isWeaponInOptions(name: WeaponName, options: WeaponOptions): boolean {\r\n  return options.some((option) => {\r\n    return isWeaponInOption(name, option)\r\n  })\r\n}\r\n\r\nfunction isOptionComplete(selectedWeapons: WeaponName[], option: WeaponOption): boolean {\r\n  return option.every((weaponsArray) => {\r\n    return selectedWeapons.some((selectedWeapon) => {\r\n      return weaponsArray.includes(selectedWeapon)\r\n    })\r\n  })\r\n}\r\n\r\nfunction areWeaponsInSameSuboption(weapon1: WeaponName, weapon2: WeaponName, option: WeaponOption): boolean {\r\n  if (weapon1 === weapon2) {\r\n    return false\r\n  }\r\n\r\n  return option.some((weaponsArray) => {\r\n    return weaponsArray.includes(weapon1) && weaponsArray.includes(weapon2)\r\n  })\r\n}\r\n\r\nfunction isWeaponAddable(weaponName: WeaponName, profile: DataSheet) {\r\n  // For profiles without options set\r\n  if (!profile.weaponOptions) {\r\n    return true\r\n  }\r\n\r\n  let viableOptions = [...profile.weaponOptions]\r\n\r\n  // If there are selected weapons:\r\n  if (Array.isArray(profile.selectedWeapons) && profile.selectedWeapons.length > 0) {\r\n    // Use only options that have at least 1 selected weapon in them\r\n    profile.selectedWeapons.forEach((selectedWeapon) => {\r\n      viableOptions = viableOptions.filter((option) => isWeaponInOption(selectedWeapon, option))\r\n    })\r\n\r\n    // Use only options that are not complete AND\r\n    // ...which do not already have the suboption this weapon is in, filled\r\n    viableOptions = viableOptions.filter((option) => {\r\n      // Needed for typescript for some reason\r\n      if (profile.selectedWeapons) {\r\n        const isWeaponInSuboptionWithSelectedWeapons = profile.selectedWeapons.some((selectedWeapon) =>\r\n          areWeaponsInSameSuboption(selectedWeapon, weaponName, option)\r\n        )\r\n\r\n        return !isOptionComplete(profile.selectedWeapons, option) && !isWeaponInSuboptionWithSelectedWeapons\r\n      }\r\n\r\n      return true\r\n    })\r\n  }\r\n\r\n  return isWeaponInOptions(weaponName, viableOptions)\r\n}\r\n\r\nfunction generateWeaponRow(\r\n  weapon: Weapon,\r\n  attackProfile: DataSheet,\r\n  setDatasheet: Dispatch<SetStateAction<DataSheet>>,\r\n  showStats: boolean,\r\n  {\r\n    isProfile,\r\n    nextIsProfile,\r\n    backgroundColor = 'transparent',\r\n  }: { isProfile: boolean; nextIsProfile: boolean; backgroundColor: string }\r\n) {\r\n  const geqDamage = calculateDamage({\r\n    attacker: { profile: attackProfile, weapon: weapon },\r\n    defender: { profile: geqProfile, weapon: geqProfile.weapons[0] },\r\n  })\r\n  const meqDamage = calculateDamage({\r\n    attacker: { profile: attackProfile, weapon: weapon },\r\n    defender: { profile: meqProfile, weapon: meqProfile.weapons[0] },\r\n  })\r\n  const custodesDamage = calculateDamage({\r\n    attacker: { profile: attackProfile, weapon: weapon },\r\n    defender: {\r\n      profile: custodesProfile,\r\n      weapon: custodesProfile.weapons.find(\r\n        (weapon) => weapon.name === 'Guardian spear' && weapon.type === 'MELEE'\r\n      ) as Weapon,\r\n    },\r\n  })\r\n\r\n  const styles: CSSProperties = {\r\n    backgroundColor,\r\n  }\r\n\r\n  const buttonCellStyles: CSSProperties = {\r\n    backgroundColor,\r\n    textAlign: 'center',\r\n  }\r\n\r\n  if (nextIsProfile) {\r\n    styles.borderBottomWidth = 0\r\n    buttonCellStyles.borderBottomWidth = 0\r\n  }\r\n\r\n  const neededSkill = weapon.type === 'MELEE' ? attackProfile.weaponSkill : attackProfile.ballisticSkill\r\n\r\n  const weaponOrBallisticSkill =\r\n    weapon.fixedWeaponBallisticSkill || neededSkill + (weapon.weaponBallisticSkillAdjustment || 0)\r\n\r\n  const adjustedWsOrBs = Math.max(2, weaponOrBallisticSkill)\r\n\r\n  const isSelected = attackProfile.selectedWeapons?.some((selectedName) => selectedName === weapon.name)\r\n  const isSelectable = isWeaponAddable(weapon.name, attackProfile)\r\n  const isDefaultWeapon = attackProfile.defaultWeapons?.includes(weapon.name)\r\n\r\n  const stormShieldDummies = showStats ? [1, 2, 3, 4, 5, 6, 7, 8] : [1, 2, 3, 4, 5]\r\n\r\n  return (\r\n    <>\r\n      {(isSelectable || isSelected || isDefaultWeapon) && (\r\n        <TableRow\r\n          key={weapon.name + weapon.profile}\r\n          className={classNames({\r\n            'weapon-selected': isSelected,\r\n            'weapon-disabled': !isSelectable,\r\n            'default-weapon': isDefaultWeapon,\r\n            'is-profile': isProfile,\r\n            'next-is-profile': nextIsProfile,\r\n          })}\r\n        >\r\n          <TableCell style={buttonCellStyles}>\r\n            {isSelectable && !isSelected && !isProfile && (\r\n              <>\r\n                <Button\r\n                  size=\"small\"\r\n                  color=\"primary\"\r\n                  variant=\"contained\"\r\n                  onClick={() => handleSelectWeapon(attackProfile, weapon.name, setDatasheet)}\r\n                >\r\n                  +\r\n                </Button>\r\n              </>\r\n            )}\r\n            {isSelected && !isProfile && (\r\n              <Button\r\n                size=\"small\"\r\n                color=\"secondary\"\r\n                variant=\"contained\"\r\n                onClick={() => handleDeselectWeapon(attackProfile, weapon.name, setDatasheet)}\r\n              >\r\n                -\r\n              </Button>\r\n            )}\r\n            {isDefaultWeapon && !isProfile && (\r\n              <span>\r\n                Always\r\n                <br />\r\n                Equipped\r\n              </span>\r\n            )}\r\n          </TableCell>\r\n          <TableCell style={styles}>{isProfile ? '' : weapon.name}</TableCell>\r\n          <TableCell style={styles}>{weapon.profile}</TableCell>\r\n          {weapon.name === 'Storm shield' ? (\r\n            [...stormShieldDummies].map((item) => <TableCell style={styles} key={item}></TableCell>)\r\n          ) : (\r\n            <>\r\n              <TableCell style={styles}>{getAttackerAttackDice(weapon)}</TableCell>\r\n              <TableCell style={styles}>{adjustedWsOrBs}+</TableCell>\r\n              <TableCell style={styles}>\r\n                {weapon.damage}/{weapon.damageCritical}\r\n              </TableCell>\r\n              <TableCell style={styles}>{weapon.specialRules.map((rule) => rule.label).join(', ')}</TableCell>\r\n              <TableCell style={styles}>{weapon.criticalRules.map((rule) => rule.label).join(', ')}</TableCell>\r\n              {showStats && (\r\n                <>\r\n                  <TableCell style={styles}>\r\n                    <strong>{geqDamage.type === 'melee' ? formatMeleeDamage(geqDamage) : geqDamage.total}</strong>\r\n                    {/* (hit: {geqDamage.hit}, crit: {geqDamage.crit}, mw: {geqDamage.mw}, data: {JSON.stringify(geqDamage.data)}) */}\r\n                  </TableCell>\r\n                  <TableCell style={styles}>\r\n                    <strong>{meqDamage.type === 'melee' ? formatMeleeDamage(meqDamage) : meqDamage.total}</strong>\r\n                    {/* (hit: {meqDamage.hit}, crit: {meqDamage.crit}, mw: {meqDamage.mw}) */}\r\n                  </TableCell>\r\n                  <TableCell style={styles}>\r\n                    <strong>\r\n                      {custodesDamage.type === 'melee' ? formatMeleeDamage(custodesDamage) : custodesDamage.total}\r\n                    </strong>\r\n                    {/* (hit: {custodesDamage.hit}, crit: {custodesDamage.crit}, mw: {custodesDamage.mw}) */}\r\n                  </TableCell>\r\n                </>\r\n              )}\r\n            </>\r\n          )}\r\n        </TableRow>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nfunction StatBlock({\r\n  dataSheet,\r\n  onToggleStats,\r\n  showStats,\r\n}: {\r\n  dataSheet: DataSheet\r\n  onToggleStats: () => void\r\n  showStats: boolean\r\n}) {\r\n  const [dataSheetLocal, setDataSheetLocal] = useState<DataSheet>(dataSheet)\r\n  let rowColor = 'rgba(1,1,1,0.1)'\r\n\r\n  function switchRowColor() {\r\n    if (rowColor === 'rgba(1,1,1,0.1)') {\r\n      rowColor = 'transparent'\r\n    } else {\r\n      rowColor = 'rgba(1,1,1,0.1)'\r\n    }\r\n  }\r\n\r\n  const rangedWeapons = dataSheetLocal.weapons.filter((weapon) => weapon.type === 'RANGED')\r\n  const meleeWeapons = dataSheetLocal.weapons.filter((weapon) => weapon.type === 'MELEE')\r\n\r\n  return (\r\n    <TableContainer component={Paper} key={dataSheetLocal.name}>\r\n      <Table size=\"small\">\r\n        <TableHead>\r\n          <TableRow style={{ backgroundColor: 'rgb(255, 102, 0)' }}>\r\n            <TableCell rowSpan={4} style={{ width: '50%', backgroundColor: 'rgb(40,40,40)', color: 'white' }}>\r\n              <Typography variant=\"h5\">{dataSheetLocal.name}</Typography>\r\n              <ButtonBase onClick={onToggleStats}>Toggle stats</ButtonBase>\r\n            </TableCell>\r\n            <TableCell style={{ textAlign: 'center', fontWeight: 700 }}>M</TableCell>\r\n            <TableCell style={{ textAlign: 'center', fontWeight: 700 }}>APL</TableCell>\r\n            <TableCell style={{ textAlign: 'center', fontWeight: 700 }}>GA</TableCell>\r\n          </TableRow>\r\n          <TableRow style={{ backgroundColor: 'rgba(1,1,1,0.1)' }}>\r\n            <TableCell style={{ borderBottom: 0, textAlign: 'center' }}>{dataSheetLocal.movement}</TableCell>\r\n            <TableCell style={{ borderBottom: 0, textAlign: 'center' }}>{dataSheetLocal.apl}</TableCell>\r\n            <TableCell style={{ borderBottom: 0, textAlign: 'center' }}>{dataSheetLocal.groupActivation}</TableCell>\r\n          </TableRow>\r\n          <TableRow style={{ backgroundColor: 'rgb(255, 102, 0)' }}>\r\n            <TableCell style={{ textAlign: 'center', fontWeight: 700 }}>DF</TableCell>\r\n            <TableCell style={{ textAlign: 'center', fontWeight: 700 }}>SV</TableCell>\r\n            <TableCell style={{ textAlign: 'center', fontWeight: 700 }}>W</TableCell>\r\n          </TableRow>\r\n          <TableRow style={{ backgroundColor: 'rgba(1,1,1,0.1)' }}>\r\n            <TableCell style={{ textAlign: 'center' }}>{dataSheetLocal.defense}</TableCell>\r\n            <TableCell style={{ textAlign: 'center' }}>{dataSheetLocal.save}+</TableCell>\r\n            <TableCell style={{ textAlign: 'center' }}>{dataSheetLocal.wounds}</TableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n      </Table>\r\n      <Table>\r\n        <TableHead>\r\n          {rangedWeapons.length > 0 && (\r\n            <TableRow>\r\n              <TableCell></TableCell>\r\n              <TableCell>Name</TableCell>\r\n              <TableCell>Profile</TableCell>\r\n              <TableCell>A</TableCell>\r\n              <TableCell>BS</TableCell>\r\n              <TableCell>D</TableCell>\r\n              <TableCell>SR</TableCell>\r\n              <TableCell>!</TableCell>\r\n              {showStats && (\r\n                <>\r\n                  <TableCell>Avg Dmg vs GEQ</TableCell>\r\n                  <TableCell>Avg Dmg vs MEQ</TableCell>\r\n                  <TableCell>Avg Dmg vs Custodes</TableCell>\r\n                </>\r\n              )}\r\n            </TableRow>\r\n          )}\r\n        </TableHead>\r\n        <TableBody>\r\n          {rangedWeapons.map((weapon, index) => {\r\n            const sameNameAsPrevious = index === 0 ? false : weapon.name === rangedWeapons[index - 1]?.name\r\n            const sameNameAsNext = weapon.name === rangedWeapons[index + 1]?.name\r\n\r\n            if (!sameNameAsPrevious) {\r\n              switchRowColor()\r\n            }\r\n\r\n            return generateWeaponRow(weapon, dataSheetLocal, setDataSheetLocal, showStats, {\r\n              isProfile: sameNameAsPrevious,\r\n              nextIsProfile: sameNameAsNext,\r\n              backgroundColor: rowColor,\r\n            })\r\n          })}\r\n        </TableBody>\r\n        {meleeWeapons.length > 0 && (\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell></TableCell>\r\n              <TableCell>Name</TableCell>\r\n              <TableCell>Profile</TableCell>\r\n              <TableCell>A</TableCell>\r\n              <TableCell>WS</TableCell>\r\n              <TableCell>D</TableCell>\r\n              <TableCell>SR</TableCell>\r\n              <TableCell>!</TableCell>\r\n              {showStats && (\r\n                <>\r\n                  <TableCell>\r\n                    Avg Dmg vs GEQ w/ Gun butt\r\n                    <br />\r\n                    <div style={{ display: 'inline-flex', width: '100%' }}>\r\n                      <span style={{ flex: 'none', flexBasis: '100px' }}>strategy</span>\r\n                      <span style={{ flex: 'none', color: 'green', flexBasis: '80px', marginLeft: '10px' }}>\r\n                        dmg done\r\n                      </span>{' '}\r\n                      <span style={{ flex: 'none', color: 'red', flexBasis: '80px' }}>dmg taken</span>\r\n                    </div>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    Avg Dmg vs MEQ w/ Power Weapon\r\n                    <br />\r\n                    <div style={{ display: 'inline-flex', width: '100%' }}>\r\n                      <span style={{ flex: 'none', flexBasis: '100px' }}>strategy</span>\r\n                      <span style={{ flex: 'none', color: 'green', flexBasis: '80px', marginLeft: '10px' }}>\r\n                        dmg done\r\n                      </span>{' '}\r\n                      <span style={{ flex: 'none', color: 'red', flexBasis: '80px' }}>dmg taken</span>\r\n                    </div>\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    Avg Dmg vs CEQ w/ Guardian Spear\r\n                    <br />\r\n                    <div style={{ display: 'inline-flex', width: '100%' }}>\r\n                      <span style={{ flex: 'none', flexBasis: '100px' }}>strategy</span>\r\n                      <span style={{ flex: 'none', color: 'green', flexBasis: '80px', marginLeft: '10px' }}>\r\n                        dmg done\r\n                      </span>{' '}\r\n                      <span style={{ flex: 'none', color: 'red', flexBasis: '80px' }}>dmg taken</span>\r\n                    </div>\r\n                  </TableCell>\r\n                </>\r\n              )}\r\n            </TableRow>\r\n          </TableHead>\r\n        )}\r\n        <TableBody>\r\n          {meleeWeapons.map((weapon, index) => {\r\n            const sameNameAsPrevious = index === 0 ? false : weapon.name === meleeWeapons[index - 1]?.name\r\n            const sameNameAsNext = weapon.name === meleeWeapons[index + 1]?.name\r\n\r\n            if (!sameNameAsPrevious) {\r\n              switchRowColor()\r\n            }\r\n\r\n            return generateWeaponRow(weapon, dataSheetLocal, setDataSheetLocal, showStats, {\r\n              isProfile: sameNameAsPrevious,\r\n              nextIsProfile: sameNameAsNext,\r\n              backgroundColor: rowColor,\r\n            })\r\n          })}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  )\r\n}\r\n\r\ninterface TabPanelProps {\r\n  index: number\r\n  value: number\r\n}\r\n\r\nconst TabPanel: FunctionComponent<TabPanelProps> = (props) => {\r\n  const { children, value, index, ...other } = props\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`simple-tabpanel-${index}`}\r\n      aria-labelledby={`simple-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && <Box p={1}>{children}</Box>}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    formControl: {\r\n      margin: theme.spacing(1),\r\n      minWidth: 120,\r\n    },\r\n    selectEmpty: {\r\n      marginTop: theme.spacing(2),\r\n    },\r\n  })\r\n)\r\n\r\nfunction App() {\r\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false)\r\n  const [showStats, setShowStats] = useState(true)\r\n  const [factionIndex, setFactionIndex] = useState(0)\r\n  const [fireteamIndex, setFireteamIndex] = useState(0)\r\n\r\n  const classes = useStyles()\r\n\r\n  const handleCloseDrawer = () => {\r\n    setIsDrawerOpen(false)\r\n  }\r\n\r\n  // const handleOpenDrawer = () => {\r\n  //   setIsDrawerOpen(true)\r\n  // }\r\n\r\n  const toggleStats = () => {\r\n    setShowStats(!showStats)\r\n  }\r\n\r\n  const handleChangeFaction = (event: ChangeEvent<{ value: unknown }>) => {\r\n    setFactionIndex(event.target.value as number)\r\n    setFireteamIndex(0)\r\n  }\r\n\r\n  const handleChangeFireteam = (event: ChangeEvent<{ value: unknown }>) => {\r\n    setFireteamIndex(event.target.value as number)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Drawer\r\n        variant=\"temporary\"\r\n        open={isDrawerOpen}\r\n        anchor=\"right\"\r\n        onClose={handleCloseDrawer}\r\n        style={{ minWidth: '500px' }}\r\n      >\r\n        <Typography variant=\"h6\">Roster</Typography>\r\n      </Drawer>\r\n      <Box ml={2} mt={2}>\r\n        <FormControl className={classes.formControl}>\r\n          <InputLabel>Faction</InputLabel>\r\n          <Select label=\"Faction\" value={factionIndex} onChange={handleChangeFaction}>\r\n            {factions.map((faction, index) => (\r\n              <MenuItem value={index}>{faction.name}</MenuItem>\r\n            ))}\r\n          </Select>\r\n        </FormControl>\r\n        <FormControl className={classes.formControl}>\r\n          <InputLabel>Fireteam</InputLabel>\r\n          <Select label=\"Fireteam\" value={fireteamIndex} onChange={handleChangeFireteam}>\r\n            {factions[factionIndex].fireTeams.map((fireTeam, index) => (\r\n              <MenuItem value={index}>{fireTeam.name}</MenuItem>\r\n            ))}\r\n          </Select>\r\n        </FormControl>\r\n      </Box>\r\n      {factions.map((faction, index) => (\r\n        <>\r\n          <TabPanel index={index} value={factionIndex}>\r\n            {factions[index].fireTeams.map((fireTeam, index) => (\r\n              <TabPanel index={index} value={fireteamIndex}>\r\n                {fireTeam.dataSheets.map((dataSheet) => (\r\n                  <StatBlock dataSheet={dataSheet} onToggleStats={toggleStats} showStats={showStats} />\r\n                ))}\r\n              </TabPanel>\r\n            ))}\r\n          </TabPanel>\r\n        </>\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n\r\n// {\r\n//   dataSheets.map((profile) => generateStatBlock(profile.name, profile.weaponSkill, profile.weapons))\r\n// }\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\nimport '@fontsource/roboto/300.css'\nimport '@fontsource/roboto/400.css'\nimport '@fontsource/roboto/500.css'\nimport '@fontsource/roboto/700.css'\nimport { createTheme, ThemeProvider } from '@material-ui/core'\n\nconst theme = createTheme({\n  palette: {\n    primary: {\n      main: 'rgb(255, 102, 0)',\n      contrastText: 'rgb(255,255,255)',\n    },\n    secondary: {\n      main: 'rgb(0, 0, 0)',\n      contrastText: 'rgb(255,255,255)',\n    },\n  },\n})\n\nReactDOM.render(\n  <React.StrictMode>\n    <ThemeProvider theme={theme}>\n      <App />\n    </ThemeProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}